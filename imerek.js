void 0===window.UYAP_EXT&&(window.UYAP_EXT={}),UYAP_EXT.GOOGLE={token:null,access_token:function(e=!1){return new Promise((async(a,t)=>{let r=localStorage.getItem("_token");if(r)this.token=r,a(this.token);else if(this.token)a(this.token);else if(e)a(this.token);else if(!UYAP_EXT.DIALOG.user_dialog.is_open())if(UYAP_EXT.DIALOG.ActiveLightbox){UYAP_EXT.DIALOG.ActiveLightbox.modal.style.display="none",a(await UYAP_EXT.GOOGLE.googleAuthOner()),$(UYAP_EXT.DIALOG.ActiveLightbox.modal).fadeIn()}else{a(await UYAP_EXT.GOOGLE.googleAuthOner())}}))},googleAuthOner:async function(){let e='<p>&emsp;&emsp;&emsp;&emsp;Saygıdeğer Meslektaşım,<br><br>\n        &emsp;&emsp;UYAP AVUKAT YARDIMCISI aşağıda gerekçeleri açıklanan izinlere ihtiyaç duymaktadır. Dilerseniz izin vermeyerek bu özellikleri kullanmayabilirsiniz.\n        <br>\n        <br>\n        <table class="izin_ihtiyaclari">\n  <tr>\n    <td>Google Takvim</td>\n    <td>:</td>\n    <td>Duruşmalarınızın GOOGLE Takviminize Eklenebilmesi</td>\n  </tr>\n  <tr>\n    <td>Google Görev</td>\n    <td>:</td>\n    <td>Dosya ve Evrak Notlarınızın GOOGLE Görevlere Eklenebilmesi</td>\n  </tr>\n  <tr>\n    <td>Google Drive(App)</td>\n    <td>:</td>\n    <td>Verilerinizin Yedeklenmesi</td>\n  </tr>\n  \n</table>\n  <br>\n    </p>\n    </p>',a=document.createElement("div");a.innerText="İzin Verme",a.className="btn btn-outline-danger",a.onfunc=async function(e){return UYAP_EXT.TOOL._user.options.startUp.durusmaEkle=!1,UYAP_EXT.TOOL._user.options.startUp.satisEkle=!1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,document.querySelector("input[name=dialog_state]").click(),!1};let t=document.createElement("div");t.id="google_yetki_ver",t.innerText=".",t.className="btn",t.onfunc=async function(e){return document.querySelector("input[name=dialog_state]").click(),UYAP_EXT.TOOL.messageToPortal({ask:"google_yetki_ver"}),!0};let r={mesaj:e,buttons:[a,t]};return await UYAP_EXT.DIALOG.user_dialog.show(r)},createCalendarEvent:function(e,a){return new Promise(((t,r)=>{this.access_token().then((async r=>{if("boolean"==typeof r&&t(r),null==UYAP_EXT.TOOL._user.options.calendar){let e=await this.getCalendarList();UYAP_EXT.TOOL._user.options.calendar=e.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}if(null==UYAP_EXT.TOOL._user.options.task_list){let e=await this.getCalendarList();UYAP_EXT.TOOL._user.options.task_list=e.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}setTimeout((()=>{fetch("https://www.googleapis.com/calendar/v3/calendars/"+decodeURI(a)+"/events",{method:"POST",headers:{"Content-Type":"application/json"},headers:new Headers({Authorization:"Bearer "+r}),body:JSON.stringify(e)}).then((e=>{e.json().then((e=>{e.error&&401==e.error.code&&(this.token=null,localStorage.removeItem("_token"),UYAP_EXT.GOOGLE.access_token().then((e=>{t(e)}))),t(e)}))}))}),200)}))}))},updateCalendarEvent:async function(e,a,t){let r=await this.access_token();if("boolean"==typeof r)return r;if(UYAP_EXT.TOOL._user.options.calendar!=t){let a=await this.getCalendarList(),r=a.items.find((e=>e.id==UYAP_EXT.TOOL._user.options.calendar));if(!r)return r=a.items.find((e=>e.id==t)),r&&(UYAP_EXT.TOOL._user.options.calendar=r.id),void await this.createCalendarEvent(e,UYAP_EXT.TOOL._user.options.calendar);UYAP_EXT.TOOL._user.options.calendar=r.id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}let i=await fetch("https://www.googleapis.com/calendar/v3/calendars/"+decodeURI(UYAP_EXT.TOOL._user.options.calendar)+"/events/"+decodeURI(a),{method:"PUT",headers:new Headers({Authorization:"Bearer "+r,"Content-Type":"application/json"}),body:JSON.stringify(e)}),l=await i.json();if(l.error){if(401==l.error.code)return this.token=null,localStorage.removeItem("_token"),await this.access_token();404==l.error.code&&(l=await this.createCalendarEvent(e,UYAP_EXT.TOOL._user.options.calendar))}return l},upsertCalendarEvent:async function(e,a,t){let r=!1,i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"takvim_olaylar",where:[["AND","takvim_olaylar.type","=",t],["AND","takvim_olaylar.kaynakId","=",e]],limit:1}});if(null==UYAP_EXT.TOOL._user.options.calendar){let e=await this.getCalendarList();UYAP_EXT.TOOL._user.options.calendar=e.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}if(null==UYAP_EXT.TOOL._user.options.task_list){let e=await this.getCalendarList();UYAP_EXT.TOOL._user.options.task_list=e.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}return 0==i.length?(r=await UYAP_EXT.GOOGLE.createCalendarEvent(a,UYAP_EXT.TOOL._user.options.calendar),r.created?UYAP_EXT.DB.googeCalendarResponseKaydet(t,e,r):r=!1):(r=await UYAP_EXT.GOOGLE.updateCalendarEvent(a,i[0].takvim_olaylar_google_event_id,i[0].takvim_olaylar_google_takvim),r.created?UYAP_EXT.DB.googeCalendarResponseKaydet(t,e,r):r=!1),r},getCalendarEvent:async function(e){let a=await this.access_token();if("boolean"==typeof a)return new Response(JSON.stringify({result:a}));let t=JSON.parse(localStorage.getItem(UYAP_EXT.GENEL.kimlikBilgileri.avukatId+"-yeni")),r=await fetch("https://www.googleapis.com/calendar/v3/calendars/"+decodeURI(t.options.calendar)+"/events/"+decodeURI(e),{method:"GET",headers:{"Content-Type":"application/json"},headers:new Headers({Authorization:"Bearer "+a})});const i=await r.json();return i.error&&401==i.error.code?(this.token=null,localStorage.removeItem("_token"),await this.access_token()):i},getCalendarList:async function(){let e=await this.access_token();if("boolean"==typeof e)return e;const a=await fetch("https://www.googleapis.com/calendar/v3/users/me/calendarList?minAccessRole=writer",{method:"GET",headers:new Headers({Authorization:"Bearer "+e})}),t=await a.json();return t.error&&401==t.error.code?(this.token=null,localStorage.removeItem("_token"),await this.access_token()):t},searchGfile:async function(){let e=await this.access_token();if("boolean"==typeof e)return e;const a=await fetch("https://www.googleapis.com/drive/v3/files?spaces=appDataFolder&fields=*&orderBy=createdTime asc&q=name='"+UYAP_EXT.GENEL.kimlikBilgileri.avukatId+(UYAP_EXT.TOOL.user.options.promode?".zip'":".json'"),{method:"GET",headers:new Headers({Authorization:"Bearer "+e})}),t=await a.json();return t.error&&401==t.error.code?(this.token=null,localStorage.removeItem("_token"),await this.access_token()):t.files},deleteGfile:async function(e){let a=await this.access_token();if("boolean"==typeof a)return new Response(JSON.stringify({result:a}));const t=await fetch("https://www.googleapis.com/drive/v3/files/"+e,{method:"DELETE",headers:new Headers({Authorization:"Bearer "+a})});return""==await t.text()},getGfile:async function(e,a,t){let r=await this.access_token();if("boolean"==typeof r)return new Response(JSON.stringify({result:r}));let i=new XMLHttpRequest;i.open("GET","https://www.googleapis.com/drive/v3/files/"+e+"?alt=media",!0),i.responseType="json",i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Authorization","Bearer "+r),i.onload=function(){t(i)},i.onerror=async function(e){if(e.error&&401==e.error.code)return this.token=null,localStorage.removeItem("_token"),await this.access_token()},i.onprogress=function(e){a(e)},i.send()},UploadGfile:async function(e,a,t,r,i,l,n){let o=await this.access_token();if("boolean"==typeof o)return new Response(JSON.stringify({result:o}));var s={name:a,mimeType:r,parents:["appDataFolder"],description:t,properties:i},d=new FormData;d.append("metadata",new Blob([JSON.stringify(s)],{type:"application/json"})),d.append("file",new Blob([JSON.stringify(e)],{type:"application/json"}));let u=new XMLHttpRequest;u.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=*",!0),u.setRequestHeader("Authorization","Bearer "+o),u.onload=function(){n(u)},u.onerror=async function(e){if(e.error&&401==e.error.code)return this.token=null,localStorage.removeItem("_token"),await this.access_token()},u.onprogress=function(e){l(e)},u.send(d)}},UYAP_EXT.MENU={isBadgeOlustur:!0,mainBadge:{},MobileMenu:{liDataHelp:function(e){let a=e.getAttribute("name");try{UYAP_EXT.TOOL._user.help.takip.menu[a].hasOwnProperty("count")?(UYAP_EXT.TOOL._user.help.takip.menu[a].count++,UYAP_EXT.TOOL._user.help.takip.menu[a].tarih=new Date):UYAP_EXT.TOOL._user.help.takip.menu[a]={count:1,tarih:new Date}}catch(e){UYAP_EXT.TOOL._user.help.takip.menu[a]={count:1,tarih:new Date}}return UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,!0},inputKapaliTakipet:async function(e){return document.querySelectorAll("input[data-kapalitakipet]").forEach(((a,t,r)=>{a.checked=e.checked})),UYAP_EXT.TOOL._user.options.kapaliDosyalariTakipEt.active=e.checked,!1},safahatliEvrakSorgula:async function(e){return document.querySelectorAll("li[name=menu_item_yeni_evrak_kontrolu_yap] input[type=checkbox]").forEach(((a,t,r)=>{a!=e&&(e.checked?"0991"==a.value||"0992"==a.value||"6700"==a.value||1199==a.value?a.checked=e.checked:"acik"!=a.name&&"kapali"!=a.name&&(a.closest("li").style.color="grey",a.disabled=!0,a.checked=!e.checked):(a.closest("li").style.color="#333",a.disabled=!1))})),!1},anaMenuButton:function(e){if(document.querySelectorAll("#hamburger input[name=kapali]").forEach((function(e){e.checked=UYAP_EXT.TOOL._user.options.kapaliDosyalariTakipEt.active})),document.querySelector(".nav-wrapper").classList.toggle("show-menu"),document.querySelector(".nav-wrapper").classList.contains("show-menu")&&(UYAP_EXT.TOOL._user.help.takip.menu.count++,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,!UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_dosyalarimi_al)){let e='\n                        <h2 style="font-weight:bold">Dosya İşlemleri</h2>\n                        <h4>İlk kurulumda dosyalarınızın tespit edilmesi önemle tavsiye edilir.</h4>\n                        ',a='\n                        <h2 style="font-weight:bold">Yeni Dosya Kontrolü Yap</h2>\n                        <h4>Siz Uyap Portalınızda çalışırken yeni dosyalarınız uygulama tarafından tespit edilir.</h4>\n                        <h4>Ancak yeni dosyalarınızın tespitini sizin adınıza uygulamanın yapması çok daha kolaydır.</h4>\n                        <br>\n                        <h4>Bu işlemi haftada bir yapmanız önerilir</h4>',t='\n                        <h2 style="font-weight:bold">Yeni Dosyalarımı Bul</h2>\n                        <h4>Yeni Dosya Tespiti İlk Defaya Mahsus 10 dakika Sürebilir. Bu süre diğer seferlerde 2 dakika kadar sürer.</h4>',r='\n                        <h2 style="font-weight:bold">Yeni Dosyalar</h2>\n                        <h4>Bulunan Yeni Dosyalarınıza Yönlendiriliyorsunuz.</h4>';return UYAP_EXT.DIALOG.help.show("menu_item_yeni_dosyalarimi_al",t,r,e,a),0}},menu:new function(){this.curItem,this.prototype={},this.curLevel=0,this.transitionEnd=i();var e,a,t={initElem:".main-menu",menuTitle:"Menu"};function r(e,a){for(option in a)e.hasOwnProperty(option)&&(e[option]=a[option])}function i(){var e,a,t=document.createElement("div"),r={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(r.hasOwnProperty(e)&&t.style[e]!==a)return r[e]}function l(e){document.querySelectorAll(t.initElem+" .has-dropdown > a").forEach((function(a){a.addEventListener("click",(function(a){a.preventDefault(),e.curItem=this.parentElement,n(e)}))})),document.querySelectorAll(t.initElem+" .nav-toggle").forEach((function(a){a.addEventListener("click",(function(a){n(e,"back")}))}))}function n(e,a){s(e,a),"back"===a?(e.curItem&&(e.curItem.classList.remove("nav-dropdown-open"),e.curItem.classList.remove("nav-dropdown-active"),e.curItem=e.curItem.parentElement.closest("li")),e.curItem&&(e.curItem.classList.add("nav-dropdown-open"),e.curItem.classList.add("nav-dropdown-active")),o(e)):(e.curItem.classList.add("nav-dropdown-open"),e.curItem.classList.add("nav-dropdown-active"),o(e))}function o(e){var a=t.menuTitle;e.curLevel>0?((a=e.curItem.querySelector("a")?e.curItem.querySelector("a").innerText:e.curItem.querySelector("a").text()).lastIndexOf("\n")>0&&(a=a.substring(0,a.lastIndexOf("\n"))),document.querySelector(t.initElem+" .nav-toggle").classList.add("back-visible")):document.querySelector(t.initElem+" .nav-toggle").classList.remove("back-visible"),document.querySelector(".nav-title").innerText=a}function s(e,a){"back"===a?e.curLevel=e.curLevel>0?e.curLevel-1:0:e.curLevel+=1,document.querySelector(t.initElem+" ul").style.transform="translateX(-"+100*e.curLevel+"%)"}arguments[0]&&"object"==typeof arguments[0]&&(this.options=r(t,arguments[0])),this.prototype.getCurrentItem=function(){return this.curItem},this.prototype.setMenuTitle=function(e){return t.menuTitle=e,o(this),e},e=this,(a=!!t.initElem.length&&t.initElem)&&(t.initElem=a,l(e),o(e))}({initElem:"#hamburger nav",menuTitle:"İMEREK UYAP YARDIMCISI (BETA)"})},muvekkilList:{isReady:!1,muvekkiller:null,hazirla:async function(e){if(!this.isReady){this.muvekkiller=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"taraflar",fields:["taraflar.adi"],where:[["AND","taraflar.vekil","like","%"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"%"]],groupBy:["adi"]}});let e=document.getElementById("menu_muvekkiller_list");for(let a=0;a<this.muvekkiller.length;a++)if(_muhatapUl=e.querySelector("li[data-hiddennumber='"+this.muvekkiller[a].hiddennumber+"']"),_muhatapUl)_muhatapUl.innerText.indexOf("*")>=0&&(_muhatapUl.innerText=this.muvekkiller[a].adi);else{let t=document.createElement("li");t.classList.add("menu_muvekkillist_li"),t.innerText=this.muvekkiller[a].adi,t.dataset.hiddennumber=this.muvekkiller[a].hiddennumber,t.onclick=function(){},e.append(t)}this.isReady=!0}},search:function(e){document.querySelectorAll("li.menu_muvekkillist_li").forEach((function(a,t,r){a.innerText.toLocaleLowerCase("tr-TR").indexOf(e.value.toLocaleLowerCase("tr-TR"))<0?$(a).hide():$(a).show()}))}},badgeOlustur:async function(e){let a={notlarim:async function(){let e={from:"notlar",count:!0};(await UYAP_EXT.DB.connection.select("",{method:"POST",body:e}))[0].sayi>0?(document.querySelector("[name=menu_item_notlarim]").style.display="unset",UYAP_EXT.DIALOG.help.lastShow.reShow()):document.querySelector("[name=menu_item_notlarim]").style.display="none"},dosyalar:async function(){let e={from:"dosyalar",count:!0,fields:["dosyalar.table_name","dosyalar.birimTuru3"],where:[["AND","dosyalar.gorulmemis","istrue","true"],["AND","dosyalar.is_aktif","istrue",!0]],groupBy:["table_name","birimTuru3"]},a={toplam:0,dosyalar:0,yargitaydosyalar:0,danistaydosyalar:0,cbsdosyalar:0},t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:e});for(let e=0;e<t.length;e++)a[t[e].dosyalar_table_name]+=t[e].sayi,a.toplam+=t[e].sayi,a[t[e].dosyalar_birimTuru3]?a[t[e].dosyalar_birimTuru3]+=t[e].sayi:a[t[e].dosyalar_birimTuru3]=t[e].sayi;let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",count:!0,where:[["AND","dosyalar.is_aktif","isfalse",!1],["AND","dosyalar.gorulmemis","istrue",!0]]}});if(r=[{sayi:0}],document.querySelectorAll("li[name=menu_item_dosyalar] .menu_badge").forEach((function(e,a,t){e.remove()})),a.toplam+r[0].sayi>0){UYAP_EXT.MENU.mainBadge.dosyalar=1,this.createMainBadge();let e=document.createElement("span");if(e.className="menu_badge",e.innerHTML=a.toplam+r[0].sayi,a.toplam>0){document.querySelector("[name=menu_item_yeni_dosyalar]").style.display="";let e=document.createElement("span");e.className="menu_badge",document.querySelectorAll("[name=badge_yeni_dosyalar]").forEach((function(t,r,i){e.innerHTML=a.toplam.toString(),t.appendChild(e.cloneNode(!0))}))}if(r[0].sayi>0){document.querySelector("[name=menu_item_azilli_dosya]").style.display="";let e=document.createElement("span");e.className="menu_badge",document.querySelectorAll("[name=menu_item_azilli_dosya] a").forEach((function(a,t,i){e.innerHTML=r[0].sayi.toString(),a.appendChild(e.cloneNode(!0))}))}document.querySelector("[name=menu_item_dosyalar]>[name=badge_yeni_dosyalar] .menu_badge")||document.querySelector("[name=menu_item_dosyalar]>[name=badge_yeni_dosyalar]").appendChild(e.cloneNode(!0))}else UYAP_EXT.MENU.mainBadge.dosyalar=0,document.querySelector("[name=menu_item_yeni_dosyalar]").style.display="none",document.querySelector("[name=menu_item_azilli_dosya]").style.display="none",this.createMainBadge();if(a.dosyalar>0){let e=document.createElement("span");e.className="menu_badge";let t=document.querySelectorAll("[name=menu_son_dosyalar]");for(let r=0;r<t.length;r++)t[r].closest("li").style.display="none",a[t[r].getAttribute("data-yargiTuru")]>0&&(e.innerHTML=a[t[r].getAttribute("data-yargiTuru")].toString(),t[r].querySelector(".menu_badge")||t[r].appendChild(e.cloneNode(!0)),t[r].closest("li").style.display="")}else{let e=document.querySelectorAll("[name=menu_son_dosyalar]");for(let a=0;a<e.length;a++)e[a].closest("li").style.display="none"}if(a.cbsdosyalar>0){let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.cbsdosyalar.toString(),document.querySelector("[name=menu_son_cbs]").closest("li").style.display="none",document.querySelector("[name=menu_son_cbs]").querySelector(".menu_badge")||(document.querySelector("[name=menu_son_cbs]").appendChild(e.cloneNode(!0)),document.querySelector("[name=menu_son_cbs]").closest("li").style.display="")}else document.querySelector("[name=menu_son_cbs]").closest("li").style.display="none";if(a.danistaydosyalar>0){let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.danistaydosyalar.toString(),document.querySelector("[name=menu_son_danistay]").querySelector(".menu_badge")||(document.querySelector("[name=menu_son_danistay]").appendChild(e.cloneNode(!0)),document.querySelector("[name=menu_son_danistay]").closest("li").style.display="")}else document.querySelector("[name=menu_son_danistay]").closest("li").style.display="none";if(a.yargitaydosyalar>0){let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.yargitaydosyalar.toString(),document.querySelector("[name=menu_son_yargitay]").querySelector(".menu_badge")||(document.querySelector("[name=menu_son_yargitay]").appendChild(e.cloneNode(!0)),document.querySelector("[name=menu_son_yargitay]").closest("li").style.display="")}else document.querySelector("[name=menu_son_yargitay]").closest("li").style.display="none"},evraklar:async function(){let e={from:"evraklar",count:!0,fields:["dosyalar.table_name","dosyalar.birimTuru3"],where:[["AND","evraklar.gorulmemis","istrue","true"]],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],groupBy:["evraklar.ana_dosyaId","dosyalar.table_name"]},a={toplam:0,dosyalar:0,yargitaydosyalar:0,danistaydosyalar:0,cbsdosyalar:0},t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:e});for(let e=0;e<t.length;e++)a[t[e].dosyalar_table_name]+=t[e].sayi,a.toplam+=t[e].sayi,a[t[e].dosyalar_birimTuru3]?a[t[e].dosyalar_birimTuru3]+=t[e].sayi:a[t[e].dosyalar_birimTuru3]=t[e].sayi;if(document.querySelectorAll("li[name=menu_item_evraklar] .menu_badge").forEach((function(e,a,t){e.remove()})),a.toplam>0){document.querySelector("[name=menu_item_yeni_evraklar]").style.display="",UYAP_EXT.MENU.mainBadge.evraklar=1,this.createMainBadge();let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.toplam.toString(),document.querySelectorAll("[name=badge_yeni_evraklar]").forEach((function(a,t,r){0==a.getElementsByClassName("menu_badge").length&&a.appendChild(e.cloneNode(!0))}))}else UYAP_EXT.MENU.mainBadge.evraklar=0,document.querySelector("[name=menu_item_yeni_evraklar]").style.display="none",this.createMainBadge();if(a.dosyalar>0){let e=document.createElement("span");e.className="menu_badge";let t=document.querySelectorAll("[name=menu_son_evraklar]");for(let r=0;r<t.length;r++)t[r].closest("li").style.display="none",a[t[r].getAttribute("data-birimTur3")]>0&&(e.innerHTML=a[t[r].getAttribute("data-birimTur3")].toString(),t[r].querySelector(".menu_badge")||t[r].appendChild(e.cloneNode(!0)),t[r].closest("li").style.display="")}else{let e=document.querySelectorAll("[name=menu_son_evraklar]");for(let a=0;a<e.length;a++)e[a].closest("li").style.display="none"}if(a.cbsdosyalar>0){let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.cbsdosyalar.toString(),document.querySelector("[name=menu_son_cbs_evraklar]").closest("li").style.display="none",document.querySelector("[name=menu_son_cbs_evraklar]").querySelector(".menu_badge")||(document.querySelector("[name=menu_son_cbs_evraklar]").appendChild(e.cloneNode(!0)),document.querySelector("[name=menu_son_cbs_evraklar]").closest("li").style.display="")}else document.querySelector("[name=menu_son_cbs_evraklar]").closest("li").style.display="none";if(a.danistaydosyalar>0){let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.danistaydosyalar.toString(),document.querySelector("[name=menu_son_danistay_evraklar]").querySelector(".menu_badge")||(document.querySelector("[name=menu_son_danistay_evraklar]").appendChild(e.cloneNode(!0)),document.querySelector("[name=menu_son_danistay_evraklar]").closest("li").style.display="")}else document.querySelector("[name=menu_son_danistay_evraklar]").closest("li").style.display="none";if(a.yargitaydosyalar>0){let e=document.createElement("span");e.className="menu_badge",e.innerHTML=a.yargitaydosyalar.toString(),document.querySelector("[name=menu_son_yargitay_evraklar]").querySelector(".menu_badge")||(document.querySelector("[name=menu_son_yargitay_evraklar]").appendChild(e.cloneNode(!0)),document.querySelector("[name=menu_son_yargitay_evraklar]").closest("li").style.display="")}else document.querySelector("[name=menu_son_yargitay_evraklar]").closest("li").style.display="none"},islemlerim:async function(){if(document.querySelectorAll("[name=devam_eden_islemlerim] .menu_badge").forEach((function(e,a,t){e.remove()})),UYAP_EXT.TOOL.islemlerim.devamEdenIslemler.length>0){UYAP_EXT.MENU.mainBadge.islemlerim=1,document.querySelector("[name=menu_item_islemlerim]").style.display="",UYAP_EXT.DIALOG.help.lastShow.reShow(),this.createMainBadge();let e=document.createElement("span");e.className="menu_badge",e.innerHTML=UYAP_EXT.TOOL.islemlerim.devamEdenIslemler.length,document.querySelectorAll("[name=devam_eden_islemlerim]").forEach((function(a,t,r){a.appendChild(e.cloneNode(!0))}))}else UYAP_EXT.MENU.mainBadge.islemlerim=0,document.querySelector("[name=menu_item_islemlerim]").style.display="none",this.createMainBadge()},tebligatlar:async function(){let e=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",count:!0,where:[["AND","tebligatlar.muhatap","notlike","%"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"%"],["AND","tebligatlar.gorulmemis","istrue",!0]]}}),a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",count:!0,where:[["AND","tebligatlar.muhatap","like","%"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"%"],["AND","tebligatlar.gorulmemis","istrue",!0]]}}),t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",count:!0,where:[["AND","tebligatlar.barkodNo","=",0]]}}),r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"harici_tebligatlar",count:!0,where:[["AND","harici_tebligatlar.gorulmemis","=",0]]}});if(document.querySelectorAll("[name=menu_item_tebligatlar] .menu_badge").forEach((function(e,a,t){e.remove()})),r[0].sayi+e[0].sayi+a[0].sayi+t[0].sayi>0){UYAP_EXT.MENU.mainBadge.tebligatlar=1,this.createMainBadge();let i=document.createElement("span");i.className="menu_badge",i.innerHTML=(e[0].sayi+a[0].sayi+t[0].sayi).toString(),document.querySelectorAll("[name=badge_yeni_tebligatlar]").forEach((function(e,a,t){e.appendChild(i.cloneNode(!0))})),a[0].sayi>0?(document.querySelector("li[name=menu_item_tebellug]").style.display="",i.innerHTML=a[0].sayi.toString(),document.querySelectorAll("[name=menu_son_tebellug]").forEach((function(e,a,t){e.appendChild(i.cloneNode(!0))}))):document.querySelector("li[name=menu_item_tebellug]").style.display="none",e[0].sayi>0?(document.querySelector("li[name=menu_item_geri_teblig]").style.display="",i.innerHTML=e[0].sayi.toString(),document.querySelectorAll("[name=menu_son_geri_teblig]").forEach((function(e,a,t){e.appendChild(i.cloneNode(!0))}))):document.querySelector("li[name=menu_item_geri_teblig]").style.display="none",t[0].sayi>0?(i.innerHTML=t[0].sayi.toString(),document.querySelectorAll("[name=menu_son_item_hatali_tebligat]").forEach((function(e,a,t){e.appendChild(i.cloneNode(!0))})),document.querySelector("li[name=menu_item_hatali_tebligat]").style.display="block"):document.querySelector("li[name=menu_item_hatali_tebligat]").style.display="none",r[0].sayi>0&&(i.innerHTML=r[0].sayi.toString(),document.querySelectorAll("[name=menu_son_harici_tebligatlar]").forEach((function(e,a,t){e.appendChild(i.cloneNode(!0))})))}else UYAP_EXT.MENU.mainBadge.tebligatlar=0,document.querySelector("li[name=menu_item_tebellug]").style.display="none",document.querySelector("li[name=menu_item_geri_teblig]").style.display="none",this.createMainBadge()},createMainBadge:function(){let e=0;for(const[a,t]of Object.entries(UYAP_EXT.MENU.mainBadge))e+=t;if(e>0){if(null==document.querySelector(".nav-wrapper>span")){let e=document.createElement("span");e.className="menu_badge",e.innerHTML="!",e.style.fontSize="10px",e.style.right="-87px",e.style.top="-9px",document.querySelector(".nav-wrapper").appendChild(e)}}else document.querySelectorAll(".nav-wrapper>span").forEach((function(e,a,t){e.remove()}))}};if(null==e)for(const[e,t]of Object.entries(a))"createMainBadge"!=e&&a[e]();else await a[e]();return!0},gorulmemisHepsiniSec:async function(e){let a=UYAP_EXT.DIALOG.gorulmemisler.column("hepsinisec:name",{page:"current"}).nodes().to$();for(let t=0;t<a.length;t++)a[t].querySelector("input").checked=e.checked},gorulmemisSecilenleriKaldir:async function(){let e=UYAP_EXT.DIALOG.gorulmemisler.column("hepsinisec:name").nodes().to$(),a=UYAP_EXT.DIALOG.gorulmemisler.column("hepsinisec:name").header();for(let a=0;a<e.length;a++)e[a].querySelector("input").checked&&await UYAP_EXT.DB.gorulmemisKaldir(e[a].querySelector("input").dataset.type,e[a].querySelector("input").value).then((t=>{200==t.status&&UYAP_EXT.DIALOG.gorulmemisler.row(e[a].closest("tr")).remove().draw()}));a.querySelector("input")&&(a.querySelector("input").checked=!1),await UYAP_EXT.MENU.badgeOlustur(),document.querySelector("[name=menu_item_yeni_dosyalar] li .menu_badge")||document.querySelector("#hamburger .nav-back").click()},gorulmemisTebellugler:async function(e){return UYAP_EXT.DIALOG.blockUILogo.show("Tebligatlarınız Düzenleniyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body"),UYAP_EXT.DIALOG.openTebligatList.default([["AND","tebligatlar.muhatap","like","%"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"%"]],e,"gorulmemis")},gorulmemisTebligdekiler:async function(e){return UYAP_EXT.DIALOG.blockUILogo.show("Tebligatlarınız Düzenleniyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body"),UYAP_EXT.DIALOG.openTebligatList.default([["AND","tebligatlar.muhatap","notlike","%"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"%"]],e,"gorulmemis")}},UYAP_EXT.DIALOG={cbsDosyaSorgulaOnchange:async function e(a){if(a.checked){let e="<p><strong>UZUN SÜREN İŞLEM UYARISI!!</strong>\n<br><br>\nCBS dosyaları her ilde teşkil edilmiş başsavcılıkları teker teker sorgulandığı için işlem uzun sürmektedir.\n</p>",t=document.createElement("div");t.innerText="Sorgula",t.className="btn btn-outline-danger btn-sm",t.onfunc=async function(){UYAP_EXT.DIALOG.user_dialog.hide()};let r=document.createElement("div");r.innerText="Vazgeç",r.className="btn btn-outline-success-300 btn-sm",r.onfunc=async function(){a.checked=!1,UYAP_EXT.DIALOG.user_dialog.hide()};let i={mesaj:e,buttons:[t,r]};return await UYAP_EXT.DIALOG.user_dialog.show(i)}return!1},uyapBaglantisiKesildi:async function e(a){let t="<p><strong>UYAP BAĞLANTISI KESİLDİ!!</strong>\n<br><br>\nTekrar oturum açmalısınız.\n</p>",r=document.createElement("div");r.innerText="Tamam",r.className="btn btn-outline-success-300 btn-sm",r.onfunc=async function(e){window.location.reload()};let i={mesaj:t,buttons:[r]};return await UYAP_EXT.DIALOG.user_dialog.show(i)},modals:{GlightBox:{altLightboxHTML:'<div id="glightbox-body" class="glightbox-container alt">\n    <div class="gloader visible"></div>\n    <div class="goverlay"></div>\n    <div class="gcontainer">\n    <div id="glightbox-slider" class="gslider"></div>\n    <button class="gnext gbtn" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n    <button class="gprev gbtn" tabindex="1" aria-label="Previous">{prevSVG}</button>\n    <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n</div>\n</div>',altLightboxHTMLSlideButtonsuz:'<div id="glightbox-body" class="glightbox-container alt">\n    <div class="gloader visible"></div>\n    <div class="goverlay"></div>\n    <div class="gcontainer">\n    <div id="glightbox-slider" class="gslider"></div>\n    <button class="gnext gbtn" style="display:none;" tabindex="0" aria-label="Next" data-customattribute="example">{nextSVG}</button>\n    <button class="gprev gbtn" style="display:none;" tabindex="1" aria-label="Previous">{prevSVG}</button>\n    <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n</div>\n</div>',lightBoxex:[],open:function(e){let a=null,t=null;return e.promise=new Promise(((r,i)=>{a=r,t=i;let l=this.lightBoxex[this.lightBoxex.length-1];function n(){UYAP_EXT.DIALOG.modals.GlightBox.lightBoxex.pop(),r(!0)}l?l.lightboxOpen&&(l.apiEvents=l.apiEvents.filter((e=>{e.callback.name})),l.once("close",(function(){e.open(),UYAP_EXT.DIALOG.modals.GlightBox.lightBoxex.push(e)})),e.once("close",(function(e){l.once("close",n),l.open(),n()})),l.close()):(this.lightBoxex.push(e),e.once("close",n),e.open())})),e.resolve=a,e.reject=t,e}}},help:{target_item:null,lastShow:{reShow:function(){document.getElementById("EXT_help")&&UYAP_EXT.DIALOG.help.show(this.elem,this.message,this.backMessage,this.MSG0,this.MSG1)}},div:function(){let e=document.createElement("div");return e.id="EXT_help",e},clipPath:function(e){return`polygon(0px ${e.y}px, 0% 0%, 100% 0%, 100% 100%, 0% 100%, 0px ${e.y+e.height}px, ${e.width}px ${e.y+e.height}px,${e.width}px ${e.y}px)`},arrow:function(e,a,t){let r=document.createElement("div");return r.style.top=a,r.style.left=e,r.style.transform="rotate("+t+"deg)",r.id="arrowAnim",r.innerHTML='\n                 <div class="arrowSliding">\n      <div class="arrow"></div>\n    </div>\n    <div class="arrowSliding delay1">\n      <div class="arrow"></div>\n    </div>\n    <div class="arrowSliding delay2">\n      <div class="arrow"></div>\n    </div>\n    <div class="arrowSliding delay3">\n      <div class="arrow"></div>\n    </div>\n  ',r},message:function(e,a="absolute",t="unset",r="unset",i){let l=document.createElement("div");if(l.id="help_message",l.style.position=a,l.style.top=r,l.style.left=t,l.innerHTML=e,i&&("menu_item_yeni_evraklarimi_al"==i.getAttribute("name")||"menu_item_tebligat_kontrol_et"==i.getAttribute("name"))){let e=document.createElement("a");e.innerText="Daha Sonra",e.onclick=async function(e){"menu_item_tebligat_kontrol_et"==i.getAttribute("name")&&(UYAP_EXT.TOOL._user.help.takip.menu[i.getAttribute("name")]={count:1,tarih:new Date},UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),UYAP_EXT.DIALOG.help.hide()},l.appendChild(e)}return l},menu_toggle:function(){let e=this.div();document.querySelector(".js-nav-toggle").addEventListener("click",(function(){document.querySelector(".menu_toggle")&&document.getElementById("EXT_help").remove()}),{once:!0}),e.className="menu_toggle",e.style.backgroundImage="-webkit-radial-gradient(38px 87px, 70px 70px, rgba(0,0,0,0) 50%, rgba(0,0,0,0.9) 54%)",e.appendChild(this.arrow("45px","120px",45)),e.appendChild(this.message("<span>İmerek Uyap Yardımcısına Hoşgeldiniz</span>","relative")),document.body.appendChild(e)},menu_header:function(e,a){e=e||"Geri",this.menu_itemFocus(document.querySelector(".nav-toggle.back-visible"),e,(()=>{a()}))},menu_itemFocus:function(e,a,t){this.hide();let r=this.div(),i=e;t&&i.addEventListener("click",(function(){t()}),{once:!0});let l=i.getBoundingClientRect();r.style.backgroundColor="rgba(0,0,0,0.9)",r.style.zIndex="1000000",r.style.clipPath=this.clipPath(l),r.appendChild(this.arrow(`${l.width}px`,l.y-4+"px",0)),r.appendChild(this.message(a,"absolute",`${l.width+100}px`,l.y-4+"px",e)),"none"!=i.style.display&&document.body.appendChild(r)},menu_item_dosyalar:function(e){e=e||"<small>Arama Yapın</small>",this.menu_itemFocus(document.querySelector("[name=menu_item_dosyalar]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_evraklar:function(e){e=e||"evrak işlemleri",this.menu_itemFocus(document.querySelector("[name=menu_item_evraklar]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_tebligatlar:function(e){e=e||"tebligat işlemleri",this.menu_itemFocus(document.querySelector("[name=menu_item_tebligatlar]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_islemlerim:function(e){e=e||"İşlemlerim",this.menu_itemFocus(document.querySelector("[name=menu_item_islemlerim]"),e,(()=>{this.hide()}))},menu_item_yedekleme:function(e){e=e||"Yedekleme",this.menu_itemFocus(document.querySelector("[name=menu_item_yedekleme]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_yeni_dosya_kontrolu_yap:function(e,a){e=e||"yeni dosya kontrolü yap",document.querySelector(".nav-dropdown-open [name=menu_item_yeni_dosya_kontrolu_yap]")?this.menu_itemFocus(document.querySelector("[name=menu_item_yeni_dosya_kontrolu_yap]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_yeni_evrak_kontrolu_yap:function(e,a){e=e||"yeni evrak kontrolü yap",document.querySelector(".nav-dropdown-open [name=menu_item_yeni_evrak_kontrolu_yap]")?this.menu_itemFocus(document.querySelector("[name=menu_item_yeni_evrak_kontrolu_yap]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_tebligat_kontrol:function(e,a){e=e||"tebligatları kontrol et",document.querySelector(".nav-dropdown-open [name=menu_item_tebligat_kontrol]")?this.menu_itemFocus(document.querySelector("[name=menu_item_tebligat_kontrol]"),e,(()=>{UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_yeni_dosyalar:function(e,a,t,r){if(e=e||"Yeni Dosyalar",this.target_item=["menu_item_yeni_dosyalar",e,a,t,r],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_dosyalar(t),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel){let t=document.querySelector(".nav-dropdown-open [name=menu_item_yeni_dosyalar]");t?this.menu_itemFocus(t,e,(()=>{this.hide()})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))}2==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_dosya_sync:function e(a,t,r,i){if(a=a||"Yerel Arşivi Eşitle",this.target_item=["menu_item_dosya_sync",a,t,r,i],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_dosyalar(r),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_dosya_sync]")&&this.menu_itemFocus(document.querySelector("[name=menu_item_dosya_sync]"),a,(()=>{this.hide()}))}},menu_item_yeni_dosyalarimi_al:function(e,a,t,r){if(e=e||"yeni dosyalarımı al",this.target_item=["menu_item_yeni_dosyalarimi_al",e,a,t,r],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_dosyalar(t),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_yeni_dosya_kontrolu_yap(r),2==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_yeni_dosyalarimi_al]")?this.menu_itemFocus(document.querySelector("[name=menu_item_yeni_dosyalarimi_al]"),e,(()=>{this.target_item=null,this.hide()})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))}},menu_item_yeni_evraklar:function(e,a,t,r){if(e=e||"Yeni Evraklar",this.target_item=["menu_item_yeni_evraklar",e,a,t,r],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_evraklar(t),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_yeni_evraklar]")?this.menu_itemFocus(document.querySelector("[name=menu_item_yeni_evraklar]"),e,(()=>{this.hide()})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))}2==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))},menu_item_yeni_evraklarimi_al:function(e,a,t,r){if(e=e||"yeni evraklarimi al",this.target_item=["menu_item_yeni_evraklarimi_al",e,a,t,r],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_evraklar(t),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_yeni_evrak_kontrolu_yap(r),2==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_yeni_evraklarimi_al]")?this.menu_itemFocus(document.querySelector("[name=menu_item_yeni_evraklarimi_al]"),e,(()=>{this.hide()})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))}},menu_item_tebligat_kontrol_et:function(e,a,t,r){if(e=e||"yeni evraklarimi al",this.target_item=["menu_item_tebligat_kontrol_et",e,a,t,r],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_tebligatlar(t),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_tebligat_kontrol(r),2==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_tebligat_kontrol_et]")?this.menu_itemFocus(document.querySelector("[name=menu_item_tebligat_kontrol_et]"),e,(()=>{this.hide()})):this.menu_header(a,(()=>{this.hide(),UYAP_EXT.DIALOG.help.target_item&&UYAP_EXT.DIALOG.help[UYAP_EXT.DIALOG.help.target_item[0]](UYAP_EXT.DIALOG.help.target_item[1],UYAP_EXT.DIALOG.help.target_item[2],UYAP_EXT.DIALOG.help.target_item[3],UYAP_EXT.DIALOG.help.target_item[4])}))}},menu_item_yedekle:function e(a,t,r,i){if(a=a||"Yedek al",this.target_item=["menu_item_yedekle",a,t,r,i],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_yedekleme(r),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_yedekle]")&&this.menu_itemFocus(document.querySelector("[name=menu_item_yedekle]"),a,(()=>{this.hide()}))}},menu_item_geri_yukle:function(e,a,t,r){if(e=e||"Geri Yükle",this.target_item=["menu_item_geri_yukle",e,a,t,r],0==UYAP_EXT.MENU.MobileMenu.menu.curLevel&&this.menu_item_yedekleme(t),1==UYAP_EXT.MENU.MobileMenu.menu.curLevel){document.querySelector(".nav-dropdown-open [name=menu_item_geri_yukle]")&&this.menu_itemFocus(document.querySelector("[name=menu_item_geri_yukle]"),e,(()=>{this.hide()}))}},show:function(e,a,t,r,i){this.lastShow.elem=e,this.lastShow.message=a,this.lastShow.backMessage=t,this.lastShow.MSG0=r,this.lastShow.MSG1=i,this.hide(),this[e](a,t,r,i)},hide:function(){document.getElementById("EXT_help")&&document.getElementById("EXT_help").remove()}},blockUILogo:{container:document.createElement("div"),show:function(e,a,t,r="body",i=!1,l=!1,n){if(i?(this.hide(),UYAP_EXT.DIALOG.blockUILogo.container.classList.add("UYP_block"),UYAP_EXT.DIALOG.blockUILogo.container.innerHTML='<div><div class="lds-dual-ring"><img style="width:55px;align-self:center;" src="chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/logo.png" /></div><span style="margin-top: 10px;color: white;width:max-content;margin-left:auto;margin-right:auto;" id="dialog_genel" data-koru="'+l.toString()+'">'+e+'</span><div><span id="dialog_ayrinti" style="margin-top: 5px;color: white;">'+a+'</span><span style="margin-top: 10px;color: white;width:max-content;margin-left:auto;margin-right:auto;" id="dialog_yuzde"></span></div><div><span id="dialog_son" style="color: white;">'+t+'</span><span style="margin-top: 10px;color: white;width:max-content;margin-left:auto;margin-right:auto;" id="dialog_yuzde_son"></span></div><div>',$(r).append($(this.container).css("display","flex").hide().fadeIn(100))):this.container.isConnected||(UYAP_EXT.DIALOG.blockUILogo.container.classList.add("UYP_block"),UYAP_EXT.DIALOG.blockUILogo.container.innerHTML='<div><div class="lds-dual-ring"><img style="width:55px;align-self:center;" src="chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/logo.png" /></div><span style="margin-top: 10px;color: white;width:max-content;margin-left:auto;margin-right:auto;" id="dialog_genel" data-koru="'+l.toString()+'">'+e+'</span><div><span id="dialog_ayrinti" style="margin-top: 5px;color: white;">'+a+'</span><span style="margin-top: 10px;color: white;width:max-content;margin-left:auto;margin-right:auto;" id="dialog_yuzde"></span></div><div><span id="dialog_son" style="color: white;">'+t+'</span><span style="margin-top: 10px;color: white;width:max-content;margin-left:auto;margin-right:auto;" id="dialog_yuzde_son"></span></div><div>',$(r).append($(this.container).css("display","flex").hide().fadeIn(200))),n){let e=document.createElement("a");e.id="duraklat",e.innerText="SONRA DEVAM ET",e.onclick=function e(a){n(a)},document.getElementById("duraklat")||this.container.firstChild.append(e)}},hide:function(){$(this.container).remove()}},user_dialog:{hideMenu:!0,is_open:function(){return document.querySelector("input[name=dialog_state]").checked},onchange:function(e,a=!0){if(this.hideMenu=a,e.checked)document.querySelectorAll("#hamburger,#root").forEach((function(e){e.style.transition="all 0.7s ease-out",e.style.filter="blur(6px)"}));else{document.querySelectorAll("#hamburger,#root").forEach((function(e){e.style.transition="",e.style.filter=""})),this.hideMenu&&document.querySelector(".nav-wrapper").classList.remove("show-menu"),document.querySelectorAll("input[name=dialog_state]+div .dlg-prompt").forEach((function(e){for(;e.firstChild;)e.firstChild.remove()}));let e=document.querySelectorAll("input[name=dialog_state]+div .dlg-content");setTimeout((()=>{e.item(0).className="dlg-content center",e.item(1).className="dlg-content inright"}),500)}},show:async function(e,a,t=!0){return new Promise(((r,i)=>{this.hideMenu=t;let l=document.querySelector("input[name=dialog_state]");document.querySelector("input[name=dialog_state]+div .center .mesaj").innerHTML=e.mesaj,e.buttons.forEach(((e,a)=>{document.querySelector("input[name=dialog_state]+div .center .dlg-prompt").appendChild(e),e.addEventListener("click",(async function(a){let t;null!=e.onfunc&&(t=await e.onfunc()),null!=t&&r(t)}))})),a&&(document.querySelector("input[name=dialog_state]+div .inright .mesaj").innerHTML=a.mesaj,a.buttons.forEach(((e,a)=>{document.querySelector("input[name=dialog_state]+div .inright .dlg-prompt").appendChild(e),e.addEventListener("click",(async function(a){let t;null!=e.onfunc&&(t=await e.onfunc()),null!=t&&r(t)}))}))),l.click()}))},next:function(e){document.querySelectorAll(".dlg-content.center").forEach((function(e){e.classList.add("inleft"),e.classList.remove("center")})),document.querySelectorAll(".dlg-content.inright").forEach((function(e){e.classList.remove("inright"),e.classList.add("center")}))},prev:function(e){document.querySelectorAll(".dlg-content.center").forEach((function(e){e.classList.add("inright"),e.classList.remove("center")})),document.querySelectorAll(".dlg-content.inleft").forEach((function(e){e.classList.remove("inleft"),e.classList.add("center")}))},hide:function(e){let a=document.querySelector("input[name=dialog_state]:checked");a&&(a.click(),document.querySelector("input[name=dialog_state]+div").innerHTML=' <div class="dlg-wrap">\n                    <div class="dlg-content center">\n                        <div class=\'mesaj\'>\n\n                        </div>\n                        <div class="dlg-prompt">\n\n                        </div>\n                    </div>\n                    <div class="dlg-content inright">\n                        <div class=\'mesaj\'>\n\n                        </div>\n                        <div class="dlg-prompt">\n\n                        </div>\n                    </div>\n                </div>\n           \n                ')}},toastr:{upRight:{stack:new PNotify.Stack({dir1:"down",dir2:"left",firstpos1:0,firstpos2:0,modal:!1,maxOpen:1/0}),show:function(e,a,t){let r={icon:"fas fa-envelope",title:a,addClass:"zindexupright",text:t,hide:!0,sticker:!1,closer:!0,closerHover:!1,hide:"error"!=e,delay:"error"==e?null:3e3,icons:{prefix:PNotify.defaults.icons,closer:"fas fa-window-close"},modules:new Map([...PNotify.defaultModules,[PNotifyAnimate,{inClass:"animate__fadeInRight",outClass:"animate__fadeOutRight"}]]),stack:UYAP_EXT.DIALOG.toastr.upRight.stack};return PNotify[e](r)}},downRightStack:new PNotify.Stack({dir1:"up",dir2:"left",firstpos1:25,firstpos2:25,push:"bottom",modal:"ish",maxStrategy:"wait",modalishFlash:!0,context:document.getElementById("tebligat_sidebar")}),upLeft:{stack:new PNotify.Stack({dir1:"down",dir2:"right",firstpos1:25,firstpos2:25,modal:!1,push:"top",maxStrategy:"close"}),show:function(e,a,t){return PNotify[e]({icon:"fas fa-cogs",title:a,addClass:"zindexstacksiz",text:t,sticker:!1,hide:!1,closer:!0,closerHover:!1,icons:{prefix:PNotify.defaults.icons,closer:"fas fa-window-close"},modules:new Map([...PNotify.defaultModules,[PNotifyAnimate,{inClass:"animate__fadeInLeft",outClass:"animate__fadeOutLeft"}]]),stack:UYAP_EXT.DIALOG.toastr.upLeft.stack})}},downLeftStack:{},downCenter:{timeout:null,stack:new PNotify.Stack({dir1:"up",firstpos1:0,spacing1:0,modal:!1,push:"top",maxStrategy:"close"}),show:function(e){if(0==UYAP_EXT.DIALOG.toastr.downCenter.stack.notices.length){let a=document.createElement("ul"),t=document.createElement("li");return t.setAttribute("data-value",e.value),t.innerText=e.text,a.append(t),PNotify.info({icon:"fas fa-cogs",addClass:"stack-bar-bottom",text:a,sticker:!1,hide:!1,closer:!1,modules:new Map([...PNotify.defaultModules,[PNotifyAnimate,{inClass:"animate__fadeInUp",outClass:"animate__fadeOutDown"}]]),stack:UYAP_EXT.DIALOG.toastr.downCenter.stack})}{clearTimeout(UYAP_EXT.DIALOG.toastr.downCenter.timeoutId);let a=UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].text.querySelector('[data-value="'+e.value+'"]');if(a)a.innerText=e.text;else{let a=document.createElement("li");a.setAttribute("data-value",e.value),a.innerText=e.text,UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].text.append(a)}UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].update({text:UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].text})}},hide:function(e){if(1==UYAP_EXT.DIALOG.toastr.downCenter.stack.notices.length){let a=UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].text.querySelector('[data-value="'+e.value+'"]');a&&(a.remove(),UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].update({text:UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].text}),UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].text.querySelector("li")||(UYAP_EXT.DIALOG.toastr.downCenter.timeoutId=setTimeout((()=>{UYAP_EXT.DIALOG.toastr.downCenter.stack.notices[0].close()}),500)))}}}},openAyarlar:{durusmaAutoSyncChanged:function(e){UYAP_EXT.TOOL._user.options.startUp.durusmaEkle=e.checked,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user},autoPDFChange:function(e){e.checked&&1!=UYAP_EXT.TOOL.user.options.promode?(UYAP_EXT.DIALOG.udfIslemleriSunucuda(),e.checked=!1):UYAP_EXT.TOOL._user.options.autoPDF=e.checked,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user},satisAutoSyncChanged:function(e){UYAP_EXT.TOOL._user.options.startUp.satisEkle=e.checked,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user},durusmaOnGelecekAyChanged:function(e){"up"==e.dataset.dir&&UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi<12&&(UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi+=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),"dwn"==e.dataset.dir&&UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi>1&&(UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi-=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),document.getElementById("_durusmaGelecekAyi").innerText=UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi},satisOnGelecekAyChanged:function(e){"up"==e.dataset.dir&&UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi<52&&(UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi+=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),"dwn"==e.dataset.dir&&UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi>1&&(UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi-=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),document.getElementById("_satisGelecekHaftasi").innerText=UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi},arsivOnInputTimeout:function(e){"up"==e.dataset.dir&&(UYAP_EXT.TOOL._user.options.arsiv.timeout+=3e4,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),"dwn"==e.dataset.dir&&UYAP_EXT.TOOL._user.options.arsiv.timeout>6e4&&(UYAP_EXT.TOOL._user.options.arsiv.timeout-=3e4,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),document.getElementById("_arsivInterval").innerText=UYAP_EXT.TOOL._user.options.arsiv.timeout/1e3/60},resetDownloadIds:async function(){let e='<p><strong>Dosya indirme kayıtlarını sıfırlamak üzeresiniz.</strong><br><br>\n<small class="form-text text-muted" style="display: block">(*) İMEREK UYAP YARDIMCISI Daha Önce Arşivlediği Dosyaları Tekrar İndirmemek Adına Kayıt Tutar.</small>\n      <small class="form-text text-muted" style="display: block">(**) Herhangi Bir Sebep İle Dosyalarınızı Tekrar İndirmek Durumunda Kalırsanız, Tutulan Kayıtları Sıfırlamayı Tercih Edebilirsiniz. </small>\n      <small class="form-text text-muted" style="display: block">(***) Kayıtları Silmeden Önce Dosya İçeriğini İndirerek Çözüm Bulmanız Tavsiye Edilir. Zira Dosya İçeriğini İndirmek Tutulan Kayıtlardan Bağımsızdır.  </small>\n     <br><br> Devam etmek istediğinizden emin misiniz?</p>',a=document.createElement("div");a.innerText="Kayıtları Sıfırla",a.className="btn btn-outline-danger btn-sm",a.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),UYAP_EXT.DIALOG.blockUILogo.show("Dosya İndirme Kayıtlarınız Sıfırlanıyor","İşlem Bitene Kadar Bekleyiniz",""),await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.downloadId","<>",0]],data:[{downloadId:0}]}}),UYAP_EXT.DIALOG.blockUILogo.hide(),!0};let t=document.createElement("div");t.innerText="Vazgeç",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let r={mesaj:e,buttons:[a,t]};return await UYAP_EXT.DIALOG.user_dialog.show(r)},deleteEveryThing:async function(){let e='<p><strong>BÜTÜN KAYITLARI SİLMEK ÜZERESİNİZ.</strong>\n<br><br>\n<small class="form-text text-muted" style="display: block">(*) İMEREK UYAP YARDIMCISI Hizmet Verebilmek Adına Bilgisayarınızda Kayıt Tutar.</small>\n      <small class="form-text text-muted" style="display: block">(**) Uygulamayı Kullanırken Sıklıkla Hata İle Karşılaşırsanız  Tutulan Kayıtları Silmek Düzelme Sağlayabilir. </small>\n      <small class="form-text text-muted" style="display: block">(***) Kayıtları Silmeden Önce Yedek Almanız Tavsiye Edilir.  </small> \n<br><br>Devam etmek istediğinizden emin misiniz?</p>',a=document.createElement("div");a.innerText="Kayıtları Sil",a.className="btn btn-outline-danger btn-sm",a.onfunc=async function(e){return UYAP_EXT.TOOL.user.options.promode?UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/deleteEveryThing",request:{method:"PUT",body:JSON.stringify({})}}).then((function(){localStorage.removeItem(UYAP_EXT.GENEL.kimlikBilgileri.avukatId+"-yeni"),window.location.reload()})).catch((function(e){})):UYAP_EXT.DB.connectionJsStore.terminate().then((e=>{const a=window.indexedDB.deleteDatabase(UYAP_EXT.GENEL.kimlikBilgileri.avukatId.toString());a.onerror=e=>{},a.onsuccess=e=>{localStorage.removeItem(UYAP_EXT.GENEL.kimlikBilgileri.avukatId+"-yeni"),window.location.reload()}})),UYAP_EXT.DIALOG.user_dialog.hide(),!0};let t=document.createElement("div");t.innerText="Vazgeç",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let r={mesaj:e,buttons:[a,t]};return await UYAP_EXT.DIALOG.user_dialog.show(r)},sumoCalendarUp:function(e,a){UYAP_EXT.GOOGLE.getCalendarList().then((async t=>{if(null!=t.items){if(t.items.forEach((a=>{$(e)[0].sumo.find(a.id)<0&&$(e)[0].sumo.add(a.id,a.summary)})),null==UYAP_EXT.TOOL._user.options[a])UYAP_EXT.TOOL._user.options[a]=t.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user;else{let e=t.items.find((e=>e.id==UYAP_EXT.TOOL._user.options[a]));UYAP_EXT.TOOL._user.options[a]=null!=e?UYAP_EXT.TOOL._user.options[a]:t.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}$(e)[0].sumo.selectItem(UYAP_EXT.TOOL._user.options[a]),$(e)[0].sumo.reload(),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}else 1==t&&UYAP_EXT.DIALOG.myGalleryAyarlar.close()}))},showArsivFolder:function(e){"UYAP DOSYALAR"==e||""==e?UYAP_EXT.TOOL.user.options.promode?UYAP_EXT.DIALOG.arsivFolderSectir().then((e=>{e&&UYAP_EXT.DIALOG.openAyarlar.showArsivFolder(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder)})):UYAP_EXT.TOOL.messageToPortal({ask:"showDefaultFolder"}):UYAP_EXT.TOOL.user.options.promode?UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/showFolder",request:{method:"POST",body:JSON.stringify({directory:e})}}).then((a=>{if(200==a.status){let a=document.getElementById("yerelArsivFolder");a&&(document.getElementById("openYerelArsivFolder").onclick=function(a){UYAP_EXT.DIALOG.openAyarlar.showArsivFolder(e)},a.innerHTML=e)}else UYAP_EXT.DIALOG.arsivFolderSectir().then((e=>{e&&UYAP_EXT.DIALOG.openAyarlar.showArsivFolder(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder)}));UYAP_EXT.DIALOG.blockUILogo.hide()})):UYAP_EXT.TOOL.messageToPortal({ask:"showDefaultFolder"})},moveArsiv:async function(){let e=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder,a=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder+"/"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad;if(UYAP_EXT.DIALOG.blockUILogo.show("Arşiviniz Taşınıyor","Bu İşlem Uzun Sürebilir",a,"body"),await UYAP_EXT.DIALOG.arsivFolderSectir()){let t=(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder+"/"+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad).normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding);if(200==(await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/moveArsiv",request:{method:"POST",body:JSON.stringify({src:a.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding),dst:t})}})).status){let e=document.getElementById("yerelArsivFolder");if(e){document.getElementById("openYerelArsivFolder").onclick=function(e){UYAP_EXT.DIALOG.openAyarlar.showArsivFolder(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder)};let a=t.replace(/^.*[\\/]/,"");a.toLocaleUpperCase("tr").normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding)==UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad&&(t=t.replace(new RegExp(a+"$"),""),t=t.substring(0,t.length-1)),e.innerHTML=t}let a=`<p><strong>ARŞİVİNİZ BAŞARI İLE TAŞINMIŞTIR</strong>\n                                        <br>\n                                        <br>\n                                        Yeni Arşiv Klasörünüz : <i>${t}</i>\n                                        <br>\n                                      </p>`,r=document.createElement("div");r.innerText="Tamam",r.className="btn btn-outline-success-300 btn-sm",r.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let i={mesaj:a,buttons:[r]};await UYAP_EXT.DIALOG.user_dialog.show(i)}else{UYAP_EXT.TOOL._user.options.arsiv.arsivFolder=e,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user;let a="<p><strong>ARŞİV TAŞINMA ESNASINDA HATA OLUŞTU !</strong>\n                                        <br>\n                                        <br>\n                                        Klasör ve uygulama izinlerini kontrol ederek tekrar deneyiniz.\n                                        <br>\n                                      </p>",t=document.createElement("div");t.innerText="Tamam",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let r={mesaj:a,buttons:[t]};await UYAP_EXT.DIALOG.user_dialog.show(r)}UYAP_EXT.DIALOG.blockUILogo.hide()}},default:async function(){UYAP_EXT.DIALOG.blockUILogo.show("Ayarlar Sayfanız Hazırlanıyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body");let e=`<div class="toc">\n    <ol>\n        <li>\n            <a href="#uyelik">ÜYELİK</a>\n        </li>\n        <li>\n            <a href="#tercihler">TERCİHLER</a>\n        </li>\n        <li>\n            <a href="#google">GOOGLE</a>\n        </li>\n        <li>\n            <a href="#veritabaniBakimi">VERİTABANI ARAÇLARI</a>\n        </li>\n    </ol>\n    <svg class="toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n        <path stroke="#444" stroke-width="3" fill="transparent" stroke-dasharray="0, 0, 0, 1000" stroke-linecap="round"\n            stroke-linejoin="round" transform="translate(-0.5, -0.5)" />\n    </svg>\n</div>\n\n<article class="contents">\n    <section id="uyelik">\n        <div>\n            <legend>Üyelik</legend>\n            <table class="table">\n                <tr>\n                    <th rowspan="5" colspan="4">ÜYELİK BİLGİLERİ</th>\n                </tr>\n                <tr>\n                    <td>Üye ID</td>\n                    <td class="uyeid"></td>\n                </tr>\n                <tr>\n                    <td>Üyelik Türü</td>\n                    <td class="uyeturu"></td>\n                </tr>\n                <tr>\n                    <td>Kullanım Bitiş Tarihi</td>\n                    <td class="sonkullanim"></td>\n                </tr>\n                <tr>\n                    <td>Derdest Dosya Sayısı</td>\n                    <td class="_csa"></td>\n                </tr>\n\n            </table>\n            <table class="table _odemeler">\n\n                <tr class="odemeler">\n                    <th rowspan="500">ÖDEME BİLGİLERİ</th>\n                </tr>\n                <tr class="kayityok">\n                    <td colspan="5">Henüz Bir Ödeme Yapmadınız</td>\n                </tr>\n            </table>\n            <table class="table _ucretsiz">\n                <tr class="ucretsiz_uyelik">\n                    <th rowspan="30">ÜCRETSİZ KULLANIMLAR</th>\n                </tr>\n                <tr class="kayityok_ucretsiz">\n                    <td>S.No</td>\n                    <td>BAŞLANGIÇ TARİHİ</td>\n                    <td>BİTİŞ TARİHİ</td>\n                    <td>KALAN SÜRE(Gün)</td>\n                </tr>\n            </table>\n        </div>\n    </section>\n    <section id="tercihler">\n\n        <legend>Kullanıcı Tercihleri</legend>\n        <div style="display: flex;align-items: baseline;">\n            <input type="checkbox" class="checkbox" ${UYAP_EXT.TOOL._user.options.autoPDF?"checked":null} onchange="UYAP_EXT.DIALOG.openAyarlar.autoPDFChange(this)" />\n            <span style="margin-left: 5px">İndirilen UDF evraklarını PDF formatına çevir.(UDF evraklar çevirme sonrası silinmez.)\n\n                \n            </span>\n\n\n        </div>\n        <div style="display: flex;align-items: baseline;">\n            <input type="checkbox" class="checkbox" ${UYAP_EXT.TOOL._user.options.startUp.durusmaEkle?"checked":null} onchange="UYAP_EXT.DIALOG.openAyarlar.durusmaAutoSyncChanged(this)" />\n            <span style="margin-left: 5px">UYAP Avukat Portal'a giriş yapıldığında gelecek\n\n                <div style="display: inline-flex">\n                    <div class="number-with-buttons">\n                        <button onclick="UYAP_EXT.DIALOG.openAyarlar.durusmaOnGelecekAyChanged(this);" data-dir="dwn"><i\n                                class="fas fa-minus fa-xs"></i></button>\n                        <div id="_durusmaGelecekAyi">${UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi}</div>\n                        <button onclick="UYAP_EXT.DIALOG.openAyarlar.durusmaOnGelecekAyChanged(this);" data-dir="up"><i\n                                class="fas fa-plus fa-xs"></i></button>\n                    </div>\n                </div>\n                ayın DURUŞMA ve KEŞİF günlerini takvimime ekle.\n\n            </span>\n\n\n        </div>\n        <div style="display: flex;align-items: baseline;margin-top: 20px">\n\n            <input type="checkbox" class="checkbox" ${UYAP_EXT.TOOL._user.options.startUp.satisEkle?"checked":null}\n                onchange="UYAP_EXT.DIALOG.openAyarlar.satisAutoSyncChanged(this)" />\n            <span style="margin-left: 5px">SATIŞ/İHALE günlerini UYAP Avukat Portal'a giriş yapıldığında veya herhangi\n                bir şekilde tespit edildiğinde gelecek\n                <div style="display: inline-flex">\n                    <div class="number-with-buttons">\n                        <button onclick="UYAP_EXT.DIALOG.openAyarlar.satisOnGelecekAyChanged(this);" data-dir="dwn"><i\n                                class="fas fa-minus fa-xs"></i></button>\n                        <div id="_satisGelecekHaftasi">${UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi}</div>\n                        <button onclick="UYAP_EXT.DIALOG.openAyarlar.satisOnGelecekAyChanged(this);" data-dir="up"><i\n                                class="fas fa-plus fa-xs"></i></button>\n                    </div>\n\n                </div>\n                haftanın planlamasını takvimime ekle.\n\n            </span>\n\n\n        </div>\n        <h3>Yerel Arşiv</h3>\n        \n        <div style="display: flex;align-items: baseline;margin-top: 20px">\n            \n            <span style="margin-left: 10px" >Arşiv Klasörü : <i id="yerelArsivFolder">${"UYAP DOSYALAR"==UYAP_EXT.TOOL._user.options.arsiv.arsivFolder?"İndirilenler Klasörü Altında 'UYAP DOSYALAR' klasörü":UYAP_EXT.TOOL._user.options.arsiv.arsivFolder}</i>\n            <button type="button" id="openYerelArsivFolder" style="padding:3px;margin-left:20px" class="btn btn-success-200 btn-sm" onclick="UYAP_EXT.DIALOG.openAyarlar.showArsivFolder('${UYAP_EXT.TOOL._user.options.arsiv.arsivFolder}');">Aç</button>\n            ${UYAP_EXT.TOOL.user.options.promode&&"UYAP DOSYALAR"!=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder?'<button type="button" style="padding:3px" class="btn btn-warning-200 btn-sm" onclick="UYAP_EXT.DIALOG.openAyarlar.moveArsiv();">Taşı</button>':""}\n            </span>\n\n\n        </div>\n        \n\n    </section>\n    <section id="google">\n        <legend>Google Ayarları</legend>\n        <div id="takvim">\n            <h3>Google Duruşmalar Takvimi</h3>\n            <p>Duruşmalarınızın kaydedilmesini istediğiniz google takviminizi seçiniz.</p>\n            <select id="takvimler"></select>\n\n\n        </div>\n        <div id="ajanda">\n            <h3>Google Notlar Takvimi</h3>\n            <p>Notlarınızın kaydedilmesini istediğiniz google takviminizi seçiniz.</p>\n            <select id="tasks"></select>\n\n        </div>\n\n    </section>\n\n    <section id="veritabaniBakimi">\n        <legend>Veritabanı Araçları</legend>\n\n\n        <div style="height: 45vh;">\n            <div>\n                <button type="button" style="margin-bottom: 1em" class="btn btn-danger btn-sm"\n                    onclick="UYAP_EXT.DIALOG.openAyarlar.resetDownloadIds();">Dosya İndirme Kayıtlarını Sıfırla</button>\n            </div>\n            <small class="form-text text-muted" style="display: block">(*) İMEREK UYAP YARDIMCISI Daha Önce Arşivlediği\n                Dosyaları Tekrar İndirmemek Adına Kayıt Tutar.</small>\n            <small class="form-text text-muted" style="display: block">(**) Herhangi Bir Sebep İle Dosyalarınızı Tekrar\n                İndirmek Durumunda Kalırsanız, Tutulan Kayıtları Sıfırlamayı Tercih Edebilirsiniz. </small>\n            <small class="form-text text-muted" style="display: block">(***) Kayıtları Silmeden Önce Dosya İçeriğini\n                İndirerek Çözüm Bulmanız Tavsiye Edilir. Zira Dosya İçeriğini İndirmek Tutulan Kayıtlardan Bağımsızdır.\n            </small>\n\n        </div>\n\n\n        <div style="height: 45vh;">\n            <div>\n                <button type="button" style="margin-bottom: 1em" class="btn btn-danger btn-sm"\n                    onclick="UYAP_EXT.DIALOG.openAyarlar.deleteEveryThing();">Bütün Kayıtları Sil</button>\n            </div>\n            <small class="form-text text-muted" style="display: block">(*) İMEREK UYAP YARDIMCISI Hizmet Verebilmek\n                Adına Bilgisayarınızda Kayıt Tutar.</small>\n            <small class="form-text text-muted" style="display: block">(**) Uygulamayı Kullanırken Sıklıkla Hata İle\n                Karşılaşırsanız Tutulan Kayıtları Silmek Düzelme Sağlayabilir. </small>\n            <small class="form-text text-muted" style="display: block">(***) Kayıtları Silmeden Önce Yedek Almanız\n                Tavsiye Edilir. </small>\n\n\n        </div>\n\n\n\n    </section>\n\n\n</article>`,a=document.createElement("div");return a.classList.add("ayarlar"),a.innerHTML=e,UYAP_EXT.DIALOG.myGalleryAyarlar=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:a,width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryAyarlar.once("open",(()=>{function e(){t=(t=(t=[].slice.call(n.querySelectorAll("li"))).map((function(e){var a=e.querySelector("a"),t=document.getElementById(a.getAttribute("href").slice(1));return{listItem:e,anchor:a,target:t}}))).filter((function(e){return!!e.target}));var e,i=[];t.forEach((function(a,t){var r=a.anchor.offsetLeft-5,l=a.anchor.offsetTop,n=a.anchor.offsetHeight;0===t?(i.push("M",r,l,"L",r,l+n),a.pathStart=0):(e!==r&&i.push("L",e,l),i.push("L",r,l),o.setAttribute("d",i.join(" ")),a.pathStart=o.getTotalLength()||0,i.push("L",r,l+n)),e=r,o.setAttribute("d",i.join(" ")),a.pathEnd=o.getTotalLength()})),r=o.getTotalLength(),a()}function a(){var e=window.innerHeight,a=r,n=0,c=0;t.forEach((function(t){var r=t.target.getBoundingClientRect();r.bottom>e*s&&r.top<e*(1-d)?(a=Math.min(t.pathStart,a),n=Math.max(t.pathEnd,n),c+=1,t.listItem.classList.add("visible")):t.listItem.classList.remove("visible")})),c>0&&a<n?a===i&&n===l||(o.setAttribute("stroke-dashoffset","1"),o.setAttribute("stroke-dasharray","1, "+a+", "+(n-a)+", "+r),o.setAttribute("opacity",1)):o.setAttribute("opacity",0),l=n,(i=a)>=52&&u<i&&(u=i,UYAP_EXT.DIALOG.openAyarlar.sumoCalendarUp("#takvimler","calendar"),UYAP_EXT.DIALOG.openAyarlar.sumoCalendarUp("#tasks","task_list"))}var t,r,i,l,n=document.querySelector(".toc"),o=document.querySelector(".toc-marker path"),s=.1,d=.2;document.querySelector(".ginlined-content").addEventListener("resize",e,!1),document.querySelector(".ginlined-content").addEventListener("scroll",a,!1),e();var u=0;UYAP_EXT.TOOL.messageToPortal({ask:"askAyarlar"}),$("#takvimler").SumoSelect({placeholder:"Google Takvimleriniz...",csvDispCount:3,search:!0}),"ADMIN"!=UYAP_EXT.TOOL._user.promode.calisan.username&&document.querySelectorAll("#veritabaniBakimi button").forEach(((e,a,t)=>{e.disabled=!0})),$("#takvimler").on("sumo:closed",(function(e){UYAP_EXT.TOOL._user.options.calendar=e.target.value,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user})),$("#tasks").SumoSelect({placeholder:"Google Görev Listeleriniz...",csvDispCount:3,search:!0}),$("#tasks").on("sumo:closed",(function(e){UYAP_EXT.TOOL._user.options.task_list=e.target.value,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}))})),await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryAyarlar).promise}},openEvrakAra:{modal:null,type:"list",anchorWhere:[],evrakFilter:async function(e=[]){let a;if("list"==this.type&&(a={from:"evraklar",fields:["dosyalar.hash","dosyalar.dosyaId_tam","dosyalar.birimAdi","dosyalar.dosyaNo","dosyalar.esasNo","dosyalar.table_name","evraklar.evraklar_id","evraklar.evrakId","evraklar.anaEvrakId","evraklar.tur","evraklar.downloadId","evraklar.sistemeGonderildigiTarih","evraklar.onaylandigiTarih","evraklar.birimEvrakNo","evraklar.alt_dosyaTur","evraklar.alt_dosyaNo"],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]},a.where=a.where.concat(this.anchorWhere),a.where=a.where.concat(e)),"ara"==this.type){if(a={from:"evraklar",fields:["dosyalar.hash","dosyalar.dosyaId_tam","dosyalar.birimAdi","dosyalar.dosyaNo","dosyalar.esasNo","dosyalar.table_name","evraklar.evraklar_id","evraklar.evrakId","evraklar.anaEvrakId","evraklar.tur","evraklar.downloadId","evraklar.sistemeGonderildigiTarih","evraklar.onaylandigiTarih","evraklar.birimEvrakNo","evraklar.alt_dosyaTur","evraklar.alt_dosyaNo"],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]},a.where=a.where.concat(this.anchorWhere),0==e.length){let a=new Date;a.setDate(a.getDay()-15),e.push(["AND","evraklar.sistemeGonderildigiTarih",">=",a])}a.where=a.where.concat(e)}return{evraklar:await UYAP_EXT.DB.connection.select("",{method:"POST",body:a})||[]}},default:async function(e,a=[],t="ara"){UYAP_EXT.DIALOG.blockUILogo.show("Evraklarınız Arama İçin Düzenleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz","");await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak));"list"==t&&(UYAP_EXT.TOOL._user.help.takip.openEvrakList?(UYAP_EXT.TOOL._user.help.takip.openEvrakList++,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user):(UYAP_EXT.TOOL._user.help.takip.openEvrakList=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),this.type=t,this.modal=e,this.anchorWhere=a,this.openMygalleryEvrakAra(await UYAP_EXT.DIALOG.openEvrakAra.evrakFilter())},folderEvraklarListCreateDateOrder:function(e){let a=e.evraklar;function t(e,a){let t=document.createElement("input");return t.type="checkbox",t.checked=!0,t.classList.add("checkbox"),t.onchange=e,t.dataset.evraklar_id=a,t}let r=new Map,i=document.createElement("ul");i.className="directory-list";for(let e=0;e<a.length;e++)r.has(a[e].dosyalar_hash)?0==a[e].evraklar_anaEvrakId?r.get(a[e].dosyalar_hash).has(a[e].evraklar_evrakId)?r.get(a[e].dosyalar_hash).get(a[e].evraklar_evrakId).evrak=a[e]:r.get(a[e].dosyalar_hash).set(a[e].evraklar_evrakId,{evrak:a[e],ekler:[]}):r.get(a[e].dosyalar_hash).has(a[e].evraklar_anaEvrakId)?r.get(a[e].dosyalar_hash).get(a[e].evraklar_anaEvrakId).ekler.push(a[e]):r.get(a[e].dosyalar_hash).set(a[e].evraklar_anaEvrakId,{evrak:a[e],ekler:[a[e]]}):(r.set(a[e].dosyalar_hash,new Map([["dosya",a[e]]])),0==a[e].evraklar_anaEvrakId?r.get(a[e].dosyalar_hash).set(a[e].evraklar_evrakId,{evrak:a[e],ekler:[]}):r.get(a[e].dosyalar_hash).set(a[e].evraklar_anaEvrakId,{evrak:a[e],ekler:[a[e]]}));sayacevrak=0;for(const[e,l]of r.entries()){let e=document.createElement("li");if(e.innerHTML=(l.get("dosya").dosyalar_esasNo?l.get("dosya").dosyalar_esasNo+" E. - ":l.get("dosya").dosyalar_dosyaNo?l.get("dosya").dosyalar_dosyaNo+" E. - ":"")+l.get("dosya").dosyalar_birimAdi+(null!=l.get("dosya").dosyalar_dosyaTurAciklama?" ( "+l.get("dosya").dosyalar_dosyaTurAciklama+" )":""),$(e).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop=UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openDosyaSummernote(l.get("dosya").dosyalar_hash).then((e=>{UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop,left:0,behavior:"instant"})}))})))),"list"==this.type){let r=UYAP_EXT.TOOL.imerekButtons.download((async function(e){e.stopPropagation();let t=[];document.querySelectorAll(".notlarim_anadiv .directory-list .lastli input[type=checkbox]:checked").forEach((e=>{t.push(parseInt(e.dataset.evraklar_id))}));let r=Array.from(l).reverse();try{if(!UYAP_EXT.TOOL._user.help.takip.filedownload)throw"";UYAP_EXT.TOOL._user.help.takip.filedownload++,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}catch(e){UYAP_EXT.TOOL._user.help.takip.filedownload=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}UYAP_EXT.DIALOG.blockUILogo.show(l.get("dosya").dosyalar_birimAdi+" "+(l.get("dosya").dosyalar_esasNo?l.get("dosya").dosyalar_esasNo+" E.":l.get("dosya").dosyalar_dosyaNo?l.get("dosya").dosyalar_dosyaNo+" E. ":""),"Seçtiğiniz Evraklar İndiriliyor","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0,(e=>{e.target.innerText="SON EVRAKIN İNDİRİLMESİ BEKLENİYOR...",UYAP_EXT.DIALOG.blockUILogo.hide()}));let i=0;if(UYAP_EXT.TOOL._user.interrupts.filedownload={},UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,l.get("dosya").dosyalar_dosyaTurKod,0){let e=await UYAP_EXT.TOOL.pdfDosyaKapakHesabi(l.get("dosya").dosyalar_birimAdi,l.get("dosya").dosyalar_dosyaNo,l.get("dosya").dosyalar_hash);try{e.getDataUrl((e=>{let a=l.get("dosya").dosyalar_birimAdi+" "+(l.get("dosya").dosyalar_dosyaNo?l.get("dosya").dosyalar_dosyaNo.replaceAll("/","-"):l.get("dosya").dosyalar_esasNo?l.get("dosya").dosyalar_esasNo.replaceAll("/","-"):l.get("dosya").dosyalar_hash)+"/0-DOSYA KAPAK HESABI.pdf";UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:e,filename:a.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"")}})}))}catch(e){}}for(let e=0;e<r.length&&UYAP_EXT.DIALOG.blockUILogo.container.isConnected;e++)if("dosya"!=r[e][0]){i++;let l,n=r[e][1].evrak.dosyalar_birimAdi+" "+(r[e][1].evrak.dosyalar_dosyaNo?r[e][1].evrak.dosyalar_dosyaNo.replaceAll("/","-"):r[e][1].evrak.dosyalar_esasNo?r[e][1].evrak.dosyalar_esasNo.replaceAll("/","-"):r[e][1].evrak.dosyalar_hash)+"/"+i+" - "+r[e][1].evrak.evraklar_tur.replaceAll("/","_")+" ( "+(new Date(r[e][1].evrak.evraklar_sistemeGonderildigiTarih)instanceof Date&&!isNaN(new Date(r[e][1].evrak.evraklar_sistemeGonderildigiTarih))?new Date(r[e][1].evrak.evraklar_sistemeGonderildigiTarih).toLocaleDateString("tr-TR"):new Date(r[e][1].evrak.evraklar_created_tarihi).toLocaleDateString("tr-TR"))+" )";document.getElementById("dialog_son").innerText=r[e][1].evrak.evraklar_tur+"....("+i.toString()+"/"+a.length+")",t.includes(r[e][1].evrak.evraklar_evraklar_id)&&(l=await UYAP_EXT.TOOL.fileDownload(r[e][1].evrak.evraklar_evrakId,r[e][1].evrak.evraklar_birimEvrakNo,r[e][1].evrak.dosyalar_hash,null,n).promise);for(let l=0;l<r[e][1].ekler.length&&UYAP_EXT.DIALOG.blockUILogo.container.isConnected;l++){i++;let n,o=r[e][1].ekler[l].dosyalar_birimAdi+" "+(r[e][1].ekler[l].dosyalar_dosyaNo?r[e][1].ekler[l].dosyalar_dosyaNo.replaceAll("/","-"):r[e][1].ekler[l].dosyalar_esasNo?r[e][1].ekler[l].dosyalar_esasNo.replaceAll("/","-"):r[e][1].ekler[l].dosyalar_hash)+"/"+i+" - EK-"+(l+1).toString()+"("+r[e][1].evrak.evraklar_tur.replaceAll("/","_")+")";document.getElementById("dialog_son").innerText=r[e][1].evrak.evraklar_tur+" EKİ - "+(l+1).toString()+"....("+i.toString()+"/"+a.length+")",t.includes(r[e][1].ekler[l].evraklar_evraklar_id)&&(n=await UYAP_EXT.TOOL.fileDownload(r[e][1].ekler[l].evraklar_evrakId,r[e][1].ekler[l].evraklar_birimEvrakNo,r[e][1].ekler[l].dosyalar_hash,null,o).promise)}}if(UYAP_EXT.DIALOG.blockUILogo.container.isConnected){UYAP_EXT.DIALOG.blockUILogo.hide();let e=`<p>${l.get("dosya").dosyalar_birimAdi+" "+(l.get("dosya").dosyalar_esasNo?l.get("dosya").dosyalar_esasNo+" E.":l.get("dosya").dosyalar_dosyaNo?l.get("dosya").dosyalar_dosyaNo+" E. ":"")} Numaralı Dosyanıza Ait Evraklar Başarıyla İndirilmiştir.\n                                        <br>\n                                        <br>\n                                      </p>`,a=document.createElement("div");a.innerText="Tamam",a.className="btn btn-outline-success-300 btn-sm",a.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let t={mesaj:e,buttons:[a]};await UYAP_EXT.DIALOG.user_dialog.show(t)}}));r.classList.add("btn-info-500"),e.append(t((e=>{e.currentTarget.closest("ul").querySelectorAll(" input[type=checkbox]").forEach((a=>{a.checked=e.currentTarget.checked})),e.stopPropagation()}))),$(e).find(".evraklar_buttons").append(r)}"ara"==this.type&&$(e).find(".evraklar_buttons").append(UYAP_EXT.TOOL.imerekButtons.goruntule((function(e){e.stopPropagation(),UYAP_EXT.TOOL.dosyaGoruntule(l.get("dosya"))})));let r=document.createElement("ul");if(e.append(r),l instanceof Map)for(let[e,a]of l)if("dosya"!=e)if(a.ekler.length>0){let e=document.createElement("li");e.innerText=a.evrak.evraklar_tur+" ( "+(a.evrak.evraklar_sistemeGonderildigiTarih?a.evrak.evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR"):a.evrak.evraklar_created_tarihi.toLocaleDateString("tr-TR"))+" )",e.title=a.evrak.evraklar_gonderenYerKisi+"\nAçıklama:"+a.evrak.evraklar_aciklama,"list"==this.type&&e.append(t((e=>{e.currentTarget.closest("li").querySelectorAll(" input[type=checkbox]").forEach((a=>{a.checked=e.currentTarget.checked})),e.stopPropagation()}),a.evrak.evraklar_evraklar_id));let i=document.createElement("ul"),l=document.createElement("li");l.className="lastli",l.onclick=function(e){e.target==this&&(UYAP_EXT.TOOL.fileGoruntule(a.evrak.evraklar_evrakId,a.evrak.evraklar_birimEvrakNo,a.evrak.dosyalar_hash),e.stopPropagation())},l.innerHTML=a.evrak.evraklar_tur+" ( "+(a.evrak.evraklar_sistemeGonderildigiTarih?a.evrak.evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR"):a.evrak.evraklar_created_tarihi.toLocaleDateString("tr-TR"))+" )","list"==this.type&&l.append(t((e=>{e.stopPropagation()}),a.evrak.evraklar_evraklar_id)),$(l).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop=UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openEvrakSummernote(a.evrak).then((e=>{UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.download((function(e){e.stopPropagation(),UYAP_EXT.TOOL.fileDownload(a.evrak.evraklar_evrakId,a.evrak.evraklar_birimEvrakNo,a.evrak.dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),i.append(l);for(let e=0;e<a.ekler.length;e++){let r=document.createElement("li");r.className="lastli",r.innerText="Ek-"+(e+1).toString(),r.onclick=function(t){t.target==this&&(UYAP_EXT.TOOL.fileGoruntule(a.ekler[e].evraklar_evrakId,a.ekler[e].evraklar_birimEvrakNo,a.ekler[e].dosyalar_hash),t.stopPropagation())},"list"==this.type&&r.append(t((e=>{e.stopPropagation()}),a.ekler[e].evraklar_evraklar_id)),$(r).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop=UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openEvrakSummernote(a.evrak).then((e=>{UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.download((function(t){t.stopPropagation(),UYAP_EXT.TOOL.fileDownload(a.ekler[e].evraklar_evrakId,a.ekler[e].evraklar_birimEvrakNo,a.ekler[e].dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),i.append(r)}e.append(i),r.append(e)}else{let e=document.createElement("li");e.onclick=function(e){e.target==this&&(UYAP_EXT.TOOL.fileGoruntule(a.evrak.evraklar_evrakId,a.evrak.evraklar_birimEvrakNo,a.evrak.dosyalar_hash),e.stopPropagation())},e.className="lastli",e.innerText=a.evrak.evraklar_tur+" ( "+(a.evrak.evraklar_sistemeGonderildigiTarih?a.evrak.evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR"):a.evrak.evraklar_created_tarihi.toLocaleDateString("tr-TR"))+" )",e.title=a.evrak.evraklar_gonderenYerKisi+"\nAçıklama:"+a.evrak.evraklar_aciklama,"list"==this.type&&e.append(t((e=>{e.stopPropagation()}),a.evrak.evraklar_evraklar_id)),$(e).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop=UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openEvrakSummernote(a.evrak).then((e=>{UYAP_EXT.DIALOG.myGalleryEvrakAra.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryEvrakAra.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.download((function(e){UYAP_EXT.TOOL.fileDownload(a.evrak.evraklar_evrakId,a.evrak.evraklar_birimEvrakNo,a.evrak.dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),r.append(e)}i.append(e)}return $(i).find("li > ul").each((function(){var e=$(this).parent();e.addClass("folder");var a=$(this);$(this).remove(),e.wrapInner("<a href='#' />"),e.append(a),e.find("a").click((function(e){e.target==this&&($(this).siblings("ul").slideToggle("slow"),e.preventDefault())}))})),"ara"==this.type?$(i).children("li").find("ul").css("display","none"):$(i).children("li").children("ul").find("ul").css("display","none"),i},filtrelerUlcreate:async function(){async function e(){let e=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",fields:["evraklar.tur"],distinct:["evraklar.tur"],where:UYAP_EXT.DIALOG.openEvrakAra.anchorWhere,join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]]}}),a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",fields:["evraklar.tip"],distinct:["evraklar.tip"],where:UYAP_EXT.DIALOG.openEvrakAra.anchorWhere,join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],limit:500}}),t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{where:UYAP_EXT.DIALOG.openEvrakAra.anchorWhere,from:"dosyalar",fields:["dosyalar.birimAdi","dosyalar.birimId"],distinct:["dosyalar.birimId"],join:[["JOIN","evraklar",[["dosyalar.hash","evraklar.ana_dosyaId"]]]]}}),r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{where:UYAP_EXT.DIALOG.openEvrakAra.anchorWhere,from:"dosyalar",fields:["dosyalar.dosyaNo"],distinct:["dosyalar.dosyaNo"],join:[["JOIN","evraklar",[["dosyalar.hash","evraklar.ana_dosyaId"]]]]}}),i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{where:UYAP_EXT.DIALOG.openEvrakAra.anchorWhere,from:"dosyalar",fields:["dosyalar.esasNo"],distinct:["dosyalar.esasNo"],join:[["JOIN","evraklar",[["dosyalar.hash","evraklar.ana_dosyaId"]]]]}});return{evrakTuru:e,evrakTipi:a,evrakBirimAdi:t,evrakDosyaNo:r.concat(i)}}function a(){return UYAP_EXT.DIALOG.blockUILogo.show("Filtreniz Uygulanıyor","Lütfen İşlem Bitene Kadar Bekleyiniz",""),new Promise(((e,a)=>{let t=[];r.value&&t.push(["AND","evraklar.sistemeGonderildigiTarih",">=",new Date(r.value)]),l.value&&t.push(["AND","evraklar.sistemeGonderildigiTarih","<=",new Date(l.value)]);let i=[];for(let e=0;e<s.selectedOptions.length;e++)"null"!=s.selectedOptions[e].value&&i.push(s.selectedOptions[e].value);i.length>0?t.push(["AND","evraklar.tip","in",i]):t.push(["AND","evraklar.tip","=",1]),i=[];for(let e=0;e<u.selectedOptions.length;e++)"null"!=u.selectedOptions[e].value&&i.push(u.selectedOptions[e].value);if(i.length>0?t.push(["AND","evraklar.tur","in",i]):t.push(["AND","evraklar.tur","=",1]),"ara"==UYAP_EXT.DIALOG.openEvrakAra.type){i=[];for(let e=0;e<m.selectedOptions.length;e++)i.push(m.selectedOptions[e].value);i.length>0?t.push(["AND","dosyalar.birimId","in",i]):t.push(["AND","dosyalar.birimId","=",1]),i=[];for(let e=0;e<h.selectedOptions.length;e++)i.push(h.selectedOptions[e].value);t.push(["SUB","AND",["AND","dosyalar.dosyaNo","in",i],["OR","dosyalar.esasNo","in",i]]),i=[];for(let e=0;e<_.selectedOptions.length;e++)i.push(_.selectedOptions[e].value);t.push(["SUB","AND",["OR","dosyalar.birimTuru3","in",i],["OR","dosyalar.table_name","in",i]])}UYAP_EXT.DIALOG.openEvrakAra.evrakFilter(t).then((a=>{$(".notlarim_anadiv .directory-list").replaceWith(UYAP_EXT.DIALOG.openEvrakAra.folderEvraklarListCreateDateOrder(a)),UYAP_EXT.DIALOG.blockUILogo.hide(),e(a)}))}))}let t=document.createElement("ul");t.className="notlarim_filterUl";let r=document.createElement("input");r.style.padding="5px 8px",r.type="date";let i=new Date;i.setDate(i.getDay()-15),r.value=i.toISOString().substring(0,10),r.onchange=function(e){r.valueAsDate&&l.valueAsDate&&r.valueAsDate>=l.valueAsDate?alert("Başlangıç Tarihi Bitiş Tarihinden Büyük Olamaz."):a()};let l=document.createElement("input");l.style.padding="5px 8px",l.type="date",l.onchange=function(e){r.valueAsDate>=l.valueAsDate?alert("Başlangıç Tarihi Bitiş Tarihinden Büyük Olamaz."):a()};let n=await e(),o=n.evrakTipi,s=document.createElement("select");s.setAttribute("multiple","");for(let e=0;e<o.length;e++){let a=document.createElement("option");a.innerText=o[e].evraklar_tip?o[e].evraklar_tip:"EK EVRAK",a.value=o[e].evraklar_tip,a.selected=!0,s.append(a)}let d=n.evrakTuru,u=document.createElement("select");u.setAttribute("multiple","");for(let e=0;e<d.length;e++){let a=document.createElement("option");a.innerText=d[e].evraklar_tur?d[e].evraklar_tur:"EK EVRAK",a.value=d[e].evraklar_tur,a.selected=!0,u.append(a)}let c=n.evrakBirimAdi,m=document.createElement("select");m.setAttribute("multiple","");for(let e=0;e<c.length;e++){let a=document.createElement("option");a.innerText=c[e].dosyalar_birimAdi,a.value=c[e].dosyalar_birimId,a.selected=!0,m.append(a)}let y=["0992","Hukuk Mahkemeleri","0991","Ceza Mahkemeleri","1199","İcra Müdürlükleri","0993","İdari Yargı","9701","Satış Memurluğu","6700","Arabuluculuk","cbsdosyalar","Cumhuriyet Başsavcılığı","danistaydosyalar","Danıştay","yargitaydosyalar","Yargıtay"],_=document.createElement("select");_.setAttribute("multiple","");for(let e=0;e<y.length-1;e+=2){let a=document.createElement("option");a.innerText=y[e+1],a.value=y[e],a.selected=!0,_.append(a)}let T=n.evrakDosyaNo,h=document.createElement("select");h.setAttribute("multiple","");for(let e=0;e<T.length;e++){if(T[e].dosyalar_dosyaNo){let a=document.createElement("option");a.innerText=T[e].dosyalar_dosyaNo,a.value=T[e].dosyalar_dosyaNo,a.selected=!0,h.append(a)}if(T[e].dosyalar_esasNo){let a=document.createElement("option");a.innerText=T[e].dosyalar_esasNo,a.value=T[e].dosyalar_esasNo,a.selected=!0,h.append(a)}}return $(t).append(r),$(t).append(l),"ara"==this.type&&($(t).append(_),$(t).append(m),$(t).append(h)),$(t).append(s),$(t).append(u),$(m).before("<label>Yargı Birimi:</label>"),$(_).before("<label>Yargı Kolu:</label>"),$(h).before("<label>Esas No:</label>"),$(t).children().wrap("<li></li>"),$(r).before("<label>Başlangış Tarihi:</label>"),$(l).before("<label>Bitiş Tarihi:</label>"),$(s).before("<label>Evrak Tipi:</label>"),$(u).before("<label>Evrak Turu:</label>"),$(s).SumoSelect({placeholder:"Evrak Tipi",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(_).SumoSelect({placeholder:"Yargı Kolu",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(u).SumoSelect({placeholder:"Evrak Türü",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(m).SumoSelect({placeholder:"Yargı Birimi",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(h).SumoSelect({placeholder:"Esas Numarası",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},t},openMygalleryEvrakAra:async function(e){let a=document.createElement("div");a.className="notlarim_anadiv",a.append(await this.filtrelerUlcreate(e)),a.append(this.folderEvraklarListCreateDateOrder(e)),UYAP_EXT.DIALOG.blockUILogo.hide();let t={elements:[{content:a,width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1};return"ara"==this.type&&(t.lightboxHTML=UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML),UYAP_EXT.DIALOG.myGalleryEvrakAra=GLightbox(t),await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryEvrakAra).promise}},openDosyaAra:{dosyaFilter:function(e){let a=null,t=null,r=!1,i=new Promise((async function(e,i){a=e,t=i,dosyalar=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.dosyaTurKod","<>",1]]}});for(let e=0;e<dosyalar.length&&!r;e++)document.getElementById("dialog_yuzde_son").innerHTML=" ( "+(e+1)+" / "+dosyalar.length+" )",dosyalar[e].taraflar=await UYAP_EXT.DB.dosyaTaraflariAl(dosyalar[e].dosyalar_hash,dosyalar[e].dosyalar_is_taraf_aktif);e({dosyalar:dosyalar||[]})})).catch((e=>{r=!0,e(dosyalar)}));return{resolve:a,reject:t,promise:i}},default:async function(){let e,a;UYAP_EXT.DIALOG.blockUILogo.show("Dosyalarınız Arama İçin Düzenleniyor","Bu işlem 1 Defaya Mahsus Yapılır","Taraflar Sorgulanıyor ","body",!1,!1,(t=>{t.target.innerText="İŞLEMİN İPTAL EDİLMESİ BEKLENİYOR...",t.target.disabled=!0,e.reject((e=>{a=e}))})),e=UYAP_EXT.DIALOG.openDosyaAra.dosyaFilter();var t=await e.promise;t||(t={dosyalar:a}),this.openMygalleryDosyaAra(t)},openMygalleryDosyaAra:function(e){let a=document.createElement("table");a.innerHTML='<thead>\n<tr class="baslik">\n<th>YARGI BİRİMİ</th>\n<th>ESAS/DOSYA NO</th>\n<th>TARAFLAR</th>\n<th>DOSYA TÜRÜ</th>\n<th>DOSYA DURUMU</th>\n<th>AÇILIŞ TARİHİ</th>\n\n</tr>\n<tr class="filtre">\n<th class="yargi_birimi"></th>\n<th class="esas_no"></th>\n<th class="taraflar"></th>\n<th class="dosya_turu"></th>\n<th class="dosya_durumu"></th>\n<th class="acilis_tarihi"></th>\n\n</tr>\n</thead>\n',a.id="dosya_ara",a.style.width="95%",a.classList.add("display");let t=document.createElement("div");t.append(a),UYAP_EXT.DIALOG.openDosyaAra.Dosyalar=new DataTable(a,{data:e.dosyalar,columns:[{data:"dosyalar_birimAdi"},{data:function(e,a,t,r){return e.dosyalar_esasNo?null!=e.dosyalar_esasNo?e.dosyalar_esasNo:"":null!=e.dosyalar_dosyaNo?e.dosyalar_dosyaNo:""}},{data:function(e,a,t,r){return UYAP_EXT.TOOL.taraflarUlOlustur(e.taraflar).outerHTML}},{data:function(e,a,t,r){return e.dosyalar_dosyaTurAciklama?null!=e.dosyalar_dosyaTurAciklama?e.dosyalar_dosyaTurAciklama:"":e.dosyalar_davaSucTuruAdi?null!=e.dosyalar_davaSucTuruAdi?"Yargıtay Dosyası":"":e.dosyalar_dosyaTur&&null!=e.dosyalar_dosyaTur?e.dosyalar_dosyaTur:""}},{data:function(e,a,t,r){return e.dosyalar_durumAdi?e.dosyalar_karar?e.dosyalar_durumAdi+" ("+e.dosyalar_karar+")":e.dosyalar_durumAdi:e.dosyalar_dosyaDurum?e.dosyalar_dosyaDurum:""}},{type:"number",render:{_:"display",sort:"timestamp"},data:function(e,a,t,r){return e.dosyalar_gelisTarihi?{display:e.dosyalar_gelisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_gelisTarihi.getTime()}:e.dosyalar_dosyaAcilisTarihi?{display:e.dosyalar_dosyaAcilisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_dosyaAcilisTarihi.getTime()}:""}}],dom:"lrtip",columnDefs:[{targets:"_all",orderable:!1}],createdRow:function(e,a,t){e.onclick=async function(e){await UYAP_EXT.TOOL.dosyaGoruntule(a)}},language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},pageLength:10,autoWidth:!0,order:[[5,"desc"]],response:!0,initComplete:function(){this.api();this.api().columns([0,3,4]).every((function(e){var a=this;let t=document.createElement("select");t.id="dosya_ara_select_"+e,t.setAttribute("multiple",""),a.data().unique().sort().each((function(e,a){let r=document.createElement("option");r.innerText=e,r.value=e,r.selected=!0,t.append(r)})),$(a.header()).append(t);$(t).SumoSelect({placeholder:"Ara",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a.draw()};t.onclick=function(e){e.stopPropagation()}})),this.api().columns([1,2]).every((function(){var e=this;$('<input type="text" placeholder="Ara " />').appendTo($(e.header())).on("keyup change clear click",(function(a){a.stopPropagation(),e.search(this.value).draw()}))})),this.api().columns([5]).every((function(){var e=this;$('<input id="baslangic_tarihi" type="date" placeholder="Başlangıç Tarihi"/><br><br>').appendTo($(e.header())).on("change click",(function(a){e.draw()})),$('<input id="bitis_tarihi" type="date" placeholder="Bitiş Tarihi"/>').appendTo($(e.header())).on("change click",(function(a){a.stopPropagation(),e.draw()}))})),UYAP_EXT.DIALOG.blockUILogo.hide()}}),UYAP_EXT.DIALOG.openDosyaAra.myGalleryDosyaAra=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:t,width:"98%",height:"100vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.openDosyaAra.myGalleryDosyaAra.on("open",(function(){UYAP_EXT.DIALOG.openDosyaAra.datatableSearch=DataTable.ext.search.push((function(e,a,t,r,i){let l=!0,n=r.dosyalar_dosyaAcilisTarihi,o=null!=document.getElementById("baslangic_tarihi")?document.getElementById("baslangic_tarihi").valueAsDate:null,s=null!=document.getElementById("bitis_tarihi")?document.getElementById("bitis_tarihi").valueAsDate:null;null!=o&&n<=o&&(l=!1),null!=s&&n>=s&&(l=!1);var d=$(document.getElementById("dosya_ara_select_0").selectedOptions).map((function(){return this.value})).get();if(0===d.length)return!1;let u=!1;d.forEach((function(e){r.dosyalar_birimAdi.includes(e)&&(u=!0)}));var c=$(document.getElementById("dosya_ara_select_3").selectedOptions).map((function(){return this.value})).get();if(0===c.length)return!1;let m=!1;c.forEach((function(e){r.dosyalar_dosyaTur.includes(e)&&(m=!0)}));var y=$(document.getElementById("dosya_ara_select_4").selectedOptions).map((function(){return this.value})).get();if(0===y.length)return!1;let _=!1;return y.forEach((function(e){r.dosyalar_dosyaDurum.includes(e)&&(_=!0)})),u&&l&&m&&_})),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.openDosyaAra.myGalleryDosyaAra.on("close",(function(e){DataTable.ext.search.splice(UYAP_EXT.DIALOG.openDosyaAra.datatableSearch-1,1)})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.openDosyaAra.myGalleryDosyaAra).promise}},openAzilliDosya:{dosyaFilter:function(e){let a=null,t=null,r=!1,i=[],l=new Promise((async function(e,l){a=e,t=l,i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.is_aktif","isfalse",!1],["AND","dosyalar.gorulmemis","istrue",!0]]}});for(let e=0;e<i.length&&!r;e++){let a=await UYAP_EXT.TOOL.updateDosyaId(i[e].dosyalar_hash);document.getElementById("dialog_yuzde_son").innerHTML=" ( "+(e+1)+" / "+i.length+" )",i[e].taraflar=await UYAP_EXT.DB.dosyaTaraflariAl(a.dosyalar_hash,!1)}i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.is_aktif","isfalse",!1],["AND","dosyalar.gorulmemis","istrue",!0]]}}),e({dosyalar:i||[]})})).catch((e=>{r=!0,e(i)}));return{resolve:a,reject:t,promise:l}},default:async function(){let e,a;UYAP_EXT.DIALOG.blockUILogo.show("Vekil Kaydınızın Silindiği Dosyalar Hazırlanıyor","Bu işlem 1 Defaya Mahsus Yapılır","Taraflar Sorgulanıyor ","body",!1,!1,(t=>{t.target.innerText="İŞLEMİN İPTAL EDİLMESİ BEKLENİYOR...",t.target.disabled=!0,e.reject((e=>{a=e}))})),e=UYAP_EXT.DIALOG.openAzilliDosya.dosyaFilter();var t=await e.promise;this.openMygalleryDosyaAra(t)},openMygalleryDosyaAra:function(e){let a=document.createElement("table");a.innerHTML='<thead>\n<tr class="baslik">\n<th>YARGI BİRİMİ</th>\n<th>ESAS/DOSYA NO</th>\n<th>TARAFLAR</th>\n<th>DOSYA TÜRÜ</th>\n<th>DOSYA DURUMU</th>\n<th>AÇILIŞ TARİHİ</th>\n<th></th>\n</tr>\n<tr class="filtre">\n<th class="yargi_birimi"></th>\n<th class="esas_no"></th>\n<th class="taraflar"></th>\n<th class="dosya_turu"></th>\n<th class="dosya_durumu"></th>\n<th class="acilis_tarihi"></th>\n<th></th>\n</tr>\n</thead>\n<tfoot>\n<tr>\n<th class="yargi_birimi"></th>\n<th class="esas_no"></th>\n<th class="taraflar"></th>\n<th class="dosya_turu"></th>\n<th class="dosya_durumu"></th>\n<th class="acilis_tarihi"></th>\n<th><button onclick="UYAP_EXT.MENU.gorulmemisSecilenleriKaldir()" class="btn btn-danger btn-sm imerek-btn" >Tekrar Gösterme</button></th>\n</tr>\n</tfoot>\n',a.id="dosya_ara",a.style.width="95%",a.classList.add("display");let t=document.createElement("div");t.append(a),UYAP_EXT.DIALOG.gorulmemisler=new DataTable(a,{data:e.dosyalar,columns:[{data:"dosyalar_birimAdi"},{data:function(e,a,t,r){return e.dosyalar_esasNo?null!=e.dosyalar_esasNo?e.dosyalar_esasNo:"":null!=e.dosyalar_dosyaNo?e.dosyalar_dosyaNo:""}},{data:function(e,a,t,r){return UYAP_EXT.TOOL.taraflarUlOlustur(e.taraflar).outerHTML}},{data:function(e,a,t,r){return e.dosyalar_dosyaTurAciklama?null!=e.dosyalar_dosyaTurAciklama?e.dosyalar_dosyaTurAciklama:"":e.dosyalar_davaSucTuruAdi?null!=e.dosyalar_davaSucTuruAdi?"Yargıtay Dosyası":"":e.dosyalar_dosyaTur&&null!=e.dosyalar_dosyaTur?e.dosyalar_dosyaTur:""}},{data:function(e,a,t,r){return e.dosyalar_durumAdi?e.dosyalar_karar?e.dosyalar_durumAdi+" ("+e.dosyalar_karar+")":e.dosyalar_durumAdi:e.dosyalar_dosyaDurum?e.dosyalar_dosyaDurum:""}},{type:"number",render:{_:"display",sort:"timestamp"},data:function(e,a,t,r){return e.dosyalar_gelisTarihi?{display:e.dosyalar_gelisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_gelisTarihi.getTime()}:e.dosyalar_dosyaAcilisTarihi?{display:e.dosyalar_dosyaAcilisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_dosyaAcilisTarihi.getTime()}:""}},{data:function(e,a,t,r){return'<input type="checkbox" class="checkbox" data-type="dosyalar" value="'+e.dosyalar_dosyalar_id+'"></input>'},name:"hepsinisec"}],dom:"lrtip",columnDefs:[{targets:"_all",orderable:!1}],createdRow:function(e,a,t){e.onclick=async function(e){}},language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},pageLength:10,autoWidth:!0,order:[[5,"desc"]],response:!0,initComplete:function(){this.api();this.api().columns([0,3,4]).every((function(e){var a=this;let t=document.createElement("select");t.id="dosya_ara_select_"+e,t.setAttribute("multiple",""),a.data().unique().sort().each((function(e,a){let r=document.createElement("option");r.innerText=e,r.value=e,r.selected=!0,t.append(r)})),$(a.header()).append(t);$(t).SumoSelect({placeholder:"Ara",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a.draw()};t.onclick=function(e){e.stopPropagation()}})),this.api().columns([1,2]).every((function(){var e=this;$('<input type="text" placeholder="Ara " />').prependTo($(e.header())).on("keyup change clear click",(function(a){a.stopPropagation(),e.search(this.value).draw()}))})),this.api().columns([5]).every((function(){var e=this;$('<input id="baslangic_tarihi" type="date" placeholder="Başlangıç Tarihi"/><br><br>').appendTo($(e.header())).on("change click",(function(a){e.draw()})),$('<input id="bitis_tarihi" type="date" placeholder="Bitiş Tarihi"/>').appendTo($(e.header())).on("change click",(function(a){a.stopPropagation(),e.draw()}))})),UYAP_EXT.DIALOG.blockUILogo.hide()}}),UYAP_EXT.DIALOG.openAzilliDosya.myGalleryDosyaAra=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:t,width:"98%",height:"100vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.openAzilliDosya.myGalleryDosyaAra.on("open",(function(){UYAP_EXT.DIALOG.openAzilliDosya.datatableSearch=DataTable.ext.search.push((function(e,a,t,r,i){let l=!0,n=r.dosyalar_dosyaAcilisTarihi,o=null!=document.getElementById("baslangic_tarihi")?document.getElementById("baslangic_tarihi").valueAsDate:null,s=null!=document.getElementById("bitis_tarihi")?document.getElementById("bitis_tarihi").valueAsDate:null;null!=o&&n<=o&&(l=!1),null!=s&&n>=s&&(l=!1);var d=$(document.getElementById("dosya_ara_select_0").selectedOptions).map((function(){return this.value})).get();if(0===d.length)return!1;let u=!1;d.forEach((function(e){r.dosyalar_birimAdi.includes(e)&&(u=!0)}));var c=$(document.getElementById("dosya_ara_select_3").selectedOptions).map((function(){return this.value})).get();if(0===c.length)return!1;let m=!1;c.forEach((function(e){r.dosyalar_dosyaTur.includes(e)&&(m=!0)}));var y=$(document.getElementById("dosya_ara_select_4").selectedOptions).map((function(){return this.value})).get();if(0===y.length)return!1;let _=!1;return y.forEach((function(e){r.dosyalar_dosyaDurum.includes(e)&&(_=!0)})),u&&l&&m&&_})),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.openAzilliDosya.myGalleryDosyaAra.on("close",(function(e){DataTable.ext.search.splice(UYAP_EXT.DIALOG.openAzilliDosya.datatableSearch-1,1)})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.openAzilliDosya.myGalleryDosyaAra).promise}},openTebligatList:{modal:null,type:"gorulmemis",anchorWhere:[],tebligatFilter:async function(e=[]){let a;return"gorulmemis"==this.type&&(a={from:"tebligatlar",where:[["AND","tebligatlar.gorulmemis","istrue",!0],["AND","evraklar.anaEvrakId","=",0]],join:[["JOIN","evraklar",[["tebligatlar.evrakId","evraklar.evrakId"],["tebligatlar.dosyaId","evraklar.ana_dosyaId"]]],["JOIN","dosyalar",[["tebligatlar.dosyaId","dosyalar.hash"]]]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]},a.where=a.where.concat(this.anchorWhere),a.where=a.where.concat(e)),"ara"==this.type&&(a={from:"evraklar",where:[["AND","evraklar.tur","in",["Açık Tebligat","Kapalı Tebligat"]],["AND","evraklar.anaEvrakId","=",0]],join:[["LEFT_OUTER_JOIN","tebligatlar",[["evraklar.evrakId","tebligatlar.evrakId"],["evraklar.ana_dosyaId","tebligatlar.dosyaId"]]],["LEFT_OUTER_JOIN","dosyalar",[["tebligatlar.dosyaId","dosyalar.hash"]]]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]},a.where=a.where.concat(this.anchorWhere),a.where=a.where.concat(e)),await UYAP_EXT.DB.connection.select("",{method:"POST",body:a})},filtrelerUlcreate:async function(){async function e(){let e=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",where:UYAP_EXT.DIALOG.openTebligatList.anchorWhere,join:[["JOIN","evraklar",[["tebligatlar.evrakId","evraklar.evrakId"],["tebligatlar.dosyaId","evraklar.ana_dosyaId"]]],["JOIN","dosyalar",[["tebligatlar.dosyaId","dosyalar.hash"]]]],fields:["tebligatlar.isLastState"],distinct:["tebligatlar.isLastState"]}}),a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",where:UYAP_EXT.DIALOG.openTebligatList.anchorWhere,join:[["JOIN","evraklar",[["tebligatlar.evrakId","evraklar.evrakId"],["tebligatlar.dosyaId","evraklar.ana_dosyaId"]]],["JOIN","dosyalar",[["tebligatlar.dosyaId","dosyalar.hash"]]]],fields:["tebligatlar.muhatap"],distinct:["tebligatlar.muhatap"]}});return{tebligatIcerigi:await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",where:UYAP_EXT.DIALOG.openTebligatList.anchorWhere,join:[["JOIN","evraklar",[["tebligatlar.evrakId","evraklar.evrakId"],["tebligatlar.dosyaId","evraklar.ana_dosyaId"]]],["JOIN","dosyalar",[["tebligatlar.dosyaId","dosyalar.hash"]]]],fields:["tebligatlar.icerik"],distinct:["tebligatlar.icerik"]}}),tebligatMuhatap:a,lastState:e}}function a(){return UYAP_EXT.DIALOG.blockUILogo.show("Filtreniz Uygulanıyor","Lütfen İşlem Bitene Kadar Bekleyiniz",""),new Promise(((e,a)=>{let t=[];i.value&&t.push(["AND","tebligatlar.evrakTarihi",">=",new Date(i.value)]),l.value&&t.push(["AND","tebligatlar.evrakTarihi","<=",new Date(l.value)]);let r=[];for(let e=0;e<o.selectedOptions.length;e++)r.push(o.selectedOptions[e].value);t.push(["AND","tebligatlar.isLastState","in",r]),r=[];for(let e=0;e<d.selectedOptions.length;e++)r.push(d.selectedOptions[e].value);t.push(["AND","tebligatlar.icerik","in",r]),r=[];for(let e=0;e<c.selectedOptions.length;e++)r.push(c.selectedOptions[e].value);t.push(["AND","tebligatlar.muhatap","in",r]),UYAP_EXT.DIALOG.openTebligatList.tebligatFilter(t).then((a=>{UYAP_EXT.DIALOG.openTebligatList.folderEvraklarListCreateDateOrder(a).then((t=>{$(".tebligatlarim_anadiv .directory-list").remove(),$(".tebligatlarim_anadiv").append(t),UYAP_EXT.DIALOG.blockUILogo.hide(),e(a)}))}))}))}let t=document.createElement("ul");t.className="notlarim_filterUl";let r=await e(),i=document.createElement("input");i.style.padding="5px 8px",i.type="date",i.onchange=function(e){i.valueAsDate&&l.valueAsDate&&i.valueAsDate>=l.valueAsDate?alert("Başlangıç Tarihi Bitiş Tarihinden Büyük Olamaz."):a()};let l=document.createElement("input");l.style.padding="5px 8px",l.type="date",l.onchange=function(e){i.valueAsDate>=l.valueAsDate?alert("Başlangıç Tarihi Bitiş Tarihinden Büyük Olamaz."):a()};let n=r.lastState,o=document.createElement("select");o.setAttribute("multiple","");for(let e=0;e<n.length;e++){let a=document.createElement("option");switch(n[e].tebligatlar_isLastState){case 0:a.innerText="TESLİMAT AŞAMASINDA";break;case 1:a.innerText="BİLA TEBLİĞ";break;case 2:a.innerText="TEBLİĞ EDİLDİ";break;default:break}a.title=a.innerText,a.value=n[e].tebligatlar_isLastState,a.selected=!0,o.append(a)}let s=r.tebligatIcerigi,d=document.createElement("select");d.setAttribute("multiple","");for(let e=0;e<s.length;e++){let a=document.createElement("option");a.title=s[e].tebligatlar_icerik,a.innerText=s[e].tebligatlar_icerik,a.value=s[e].tebligatlar_icerik,a.selected=!0,d.append(a)}let u=r.tebligatMuhatap,c=document.createElement("select");c.setAttribute("multiple","");for(let e=0;e<u.length;e++){let a=document.createElement("option");a.title=u[e].tebligatlar_muhatap,a.innerText=u[e].tebligatlar_muhatap,a.value=u[e].tebligatlar_muhatap,a.selected=!0,c.append(a)}if($(t).append(i),$(t).append(l),$(t).append(o,d,c),"gorulmemis"==UYAP_EXT.DIALOG.openTebligatList.type){let e=document.createElement("div");e.style.cssText="display: grid\n;\n    grid-template-columns: repeat(2, 1fr);\n    grid-template-rows: repeat(1, 1fr);\n    gap: 3px;";let a=document.createElement("button");a.classList.add("btn","btn-warning","btn-sm","imerek-btn"),a.style.padding="0px 5px",a.innerHTML="Tümünü Seç",a.onclick=function(){document.querySelectorAll("ul.directory-list input.checkbox").forEach((function(e){e.checked=!0})),event.stopPropagation()};let r=document.createElement("button");r.classList.add("btn","btn-danger","btn-sm","imerek-btn"),r.style.padding="0px 5px",r.style.marginLeft="5px",r.innerHTML="Takip Etme",r.onclick=()=>{document.querySelectorAll("ul.directory-list .folder").forEach(((e,a)=>{let t=Array.from(e.querySelectorAll("ul li.lastli input")).slice().reverse();for(let e=0;e<t.length;e++)t[e].checked&&UYAP_EXT.DB.gorulmemisKaldir("tebligatlar",t[e].value).then((a=>{if(delete UYAP_EXT.TOOL._user.interrupts.showToastrs.tebligat[t[e].value],UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,null!=t[e].closest("ul"))if(1==t[e].closest("ul").querySelectorAll("li").length)t[e].closest(".folder").remove();else try{t[e].closest(".lastli").remove()}catch(e){}}))})),UYAP_EXT.MENU.badgeOlustur("tebligatlar")},e.append(a,r),$(t).append(e)}else $(t).append("<div></div>");return $(t).children().wrap("<li></li>"),$(o).before("<label>Tebligat Durumu:</label>"),$(d).before("<label>Tebligat İçeriği:</label>"),$(c).before("<label>Muhatap:</label>"),$(i).before("<label>Başlangış Tarihi:</label>"),$(l).before("<label>Bitiş Tarihi:</label>"),$(d).SumoSelect({placeholder:"Tebligat İçeriği",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(c).SumoSelect({placeholder:"Muhatap",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(o).SumoSelect({placeholder:"Tebligat Durumu",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},t},default:async function(e,a,t="gorulmemis"){return UYAP_EXT.DIALOG.blockUILogo.show("Tebligatlarınız Sunum İçin Düzenleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz",""),this.type=t,"openTebligatList"==a.getAttribute("name")&&(UYAP_EXT.TOOL._user.help.takip.openTebligatList?(UYAP_EXT.TOOL._user.help.takip.openTebligatList++,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user):(UYAP_EXT.TOOL._user.help.takip.openTebligatList=1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user)),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,this.modal=a,this.anchorWhere=e,await this.openMygalleryTebligatList(await this.tebligatFilter()),!0},folderEvraklarListCreateDateOrder:async function(e){let a=e;function t(e){let a=document.createElement("button");return a.classList.add("btn","btn-danger","btn-sm","imerek-btn"),a.onclick=e,a.innerText="Takip Etme",a}function r(e){let a=document.createElement("li");a.onclick=function(a){a.target==this&&(UYAP_EXT.TOOL.fileGoruntule(e.evraklar_evrakId,e.evraklar_birimEvrakNo,e.dosyalar_hash),a.stopPropagation())},a.className="lastli";let t=e.tebligatlar_isLastState,r="unset";switch(t){case 0:t="TESLİMAT AŞAMASINDA";break;case 1:t="BİLA TEBLİĞ",r="orangered";break;case 2:t="TEBLİĞ EDİLDİ",r="seagreen";break;default:break}let i=document.createElement("span");i.innerText=`${t}(${e.tebligatlar_lastStateTarihi.toLocaleDateString("tr-TR")})`,i.style.cssText=`color:${r};display:inline-block;width:30%`,i.onclick=function(a){a.target==this&&(UYAP_EXT.TOOL.fileGoruntule(e.evraklar_evrakId,e.evraklar_birimEvrakNo,e.dosyalar_hash),a.stopPropagation())};let l=document.createElement("span");if(l.innerText=e.tebligatlar__durum,l.style.cssText="text-overflow: ellipsis;white-space: nowrap;overflow: clip;display:inline-block;width: 50%;",l.onclick=function(a){a.target==this&&(UYAP_EXT.TOOL.fileGoruntule(e.evraklar_evrakId,e.evraklar_birimEvrakNo,e.dosyalar_hash),a.stopPropagation())},a.append(i),a.append(l),"gorulmemis"==UYAP_EXT.DIALOG.openTebligatList.type){let t;t=document.createElement("input"),t.type="checkbox",t.classList.add("checkbox"),t.value=e.tebligatlar_tebligatlar_id,a.append(t)}if($(a).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(a){a.stopPropagation(),UYAP_EXT.DIALOG.openEvrakSummernote(e)})),UYAP_EXT.TOOL.imerekButtons.download((function(a){UYAP_EXT.TOOL.fileDownload(e.evraklar_evrakId,e.evraklar_birimEvrakNo,e.dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),0==e.tebligatlar_isLastState){let t=UYAP_EXT.TOOL.imerekButtons.sync((function(a){a.stopPropagation(),UYAP_EXT.DIALOG.blockUILogo.show("<strong><u>"+e.evraklar_evrakId+"</u></strong> Evrak Numaralı Tebligatınız Sorgulanıyor","PTT Gönderi Takip Sisteminin Güvenlik Önlemleri Sebebiyle İşleminiz Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0);let r=e;UYAP_EXT.DB.tebligatCheck.default([r],!1).promise.then((a=>{a&&UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",where:[["AND","tebligatlar.dosyaId","=",e.dosyalar_hash],["AND","tebligatlar.evrakId","=",e.evraklar_evrakId]]}}).then((e=>{switch(e[0]=UYAP_EXT.DB.tebligatCheck.tebligatState(e[0]),e[0].tebligatlar_isLastState){case 0:i.innerText=`TESLİMAT AŞAMASINDA(${e[0].tebligatlar_lastStateTarihi.toLocaleDateString("tr-TR")})`,l.innerText=e[0].tebligatlar__durum,UYAP_EXT.DIALOG.toastr.upRight.show("info","TEBLİGAT DURUMU",e[0].tebligatlar__durum);break;case 1:t.style.display="none",i.style.color="orangered",i.innerText=`BİLA TEBLİĞ(${e[0].tebligatlar_lastStateTarihi.toLocaleDateString("tr-TR")})`,l.innerText=e[0].tebligatlar__durum,UYAP_EXT.DIALOG.toastr.upRight.show("error","TEBLİGAT DURUMU",e[0].tebligatlar__durum);break;case 2:t.style.display="none",i.style.color="seagreen",i.innerText=`TEBLİĞ EDİLDİ(${e[0].tebligatlar_lastStateTarihi.toLocaleDateString("tr-TR")})`,l.innerText=e[0].tebligatlar__durum,UYAP_EXT.DIALOG.toastr.upRight.show("success","TEBLİGAT DURUMU",e[0].tebligatlar__durum);break}UYAP_EXT.DIALOG.blockUILogo.hide()}))}))}));$(a).find(".evraklar_buttons").prepend(t)}return a}let i=new Map,l=document.createElement("ul");l.className="directory-list";for(let e=0;e<a.length;e++)i.has(a[e].dosyalar_hash)?i.get(a[e].dosyalar_hash).has(a[e].evraklar_evrakId)?i.get(a[e].dosyalar_hash).get(a[e].evraklar_evrakId).push(a[e]):i.get(a[e].dosyalar_hash).set(a[e].evraklar_evrakId,[a[e]]):(a[e].taraflar=await UYAP_EXT.DB.dosyaTaraflariAl(a[e].dosyalar_hash),i.set(a[e].dosyalar_hash,new Map([["dosya",a[e]]])),i.get(a[e].dosyalar_hash).set(a[e].evraklar_evrakId,[a[e]]));sayacevrak=0;for(const[e,a]of i.entries()){let e=document.createElement("li");if(e.innerHTML=(a.get("dosya").dosyalar_esasNo?a.get("dosya").dosyalar_esasNo+" E. - ":a.get("dosya").dosyalar_dosyaNo?a.get("dosya").dosyalar_dosyaNo+" E. - ":"")+a.get("dosya").dosyalar_birimAdi+(null!=a.get("dosya").dosyalar_dosyaTurAciklama?" ( "+a.get("dosya").dosyalar_dosyaTurAciklama+" )":""),"gorulmemis"==this.type){let t=document.createElement("input");t.type="checkbox",t.classList.add("checkbox"),t.onclick=function(e){t.closest(".folder").querySelectorAll("ul input").forEach((function(e){e.checked=t.checked})),e.stopPropagation()},e.append(t),$(e).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.goruntule((function(e){e.stopPropagation(),UYAP_EXT.TOOL.dosyaGoruntule(a.get("dosya"))}))))}let i,n=document.createElement("ul");if(e.append(n),i=a.get("dosya").taraflar,"ara"==this.type)for(let e=0;e<i.length;e++){let a=document.createElement("li");a.innerText=i[e].taraflar_adi+" ( "+i[e].taraflar_rol+" ) "+(i[e].taraflar_vekil.length>0?"- Vekil : "+i[e].taraflar_vekil[0]:"");let t=document.createElement("ul");t.dataset.taraf=i[e].taraflar_adi,a.append(t),n.append(a)}for(let[e,t]of a)if("dosya"!=e)for(let e=0;e<t.length;e++){let a;t[e].dosyalar_table_name;t[e]=UYAP_EXT.DB.tebligatCheck.tebligatState(t[e]),sayacevrak++;for(let l=0;l<i.length;l++){if(t[e].tebligatlar_muhatap.indexOf(i[l].taraflar_adi)>=0&&""!=i[l].taraflar_adi){if(a=n.querySelectorAll("ul[data-taraf='"+i[l].taraflar_adi+"']"),0==a.length){let o=document.createElement("li");o.innerText=i[l].taraflar_adi+" ( "+i[l].taraflar_rol+" ) "+(i[l].taraflar_vekil.length?"- Vekil : "+i[l].taraflar_vekil:"");let s=document.createElement("ul");s.dataset.taraf=i[l].taraflar_adi,s.append(r(t[e])),o.append(s),$(o).appendTo(n),a=n.querySelectorAll("ul[data-taraf='"+i[l].taraflar_adi+"']")}else a[0].append(r(t[e]));break}for(let o=0;o<i[l].taraflar_vekil.length;o++)if(t[e].tebligatlar_muhatap.indexOf(i[l].taraflar_vekil[o])>=0&&""!=i[l].taraflar_vekil[o]){if(a=n.querySelectorAll("ul[data-taraf='"+i[l].taraflar_adi+"']"),0==a.length){let o=document.createElement("li");o.innerText=i[l].taraflar_adi+" ( "+i[l].taraflar_rol+" ) "+(i[l].taraflar_vekil.length?"- Vekil : "+i[l].taraflar_vekil:"");let s=document.createElement("ul");s.dataset.taraf=i[l].taraflar_adi,s.append(r(t[e])),o.append(s),n.append(o),a=n.querySelectorAll("ul[data-taraf='"+i[l].taraflar_adi+"']")}else a.forEach((function(a,i,l){a.append(r(t[e]))}));break}}if(a=n.querySelectorAll("ul[data-taraf*='"+t[e].tebligatlar_muhatap+"']"),0==a.length){if(!i.some((a=>a.taraflar_rol.toLocaleLowerCase("TR-tr")+" "+a.taraflar_adi.toLocaleLowerCase("TR-tr")==t[e].tebligatlar_muhatap.toLocaleLowerCase("TR-tr")||a.taraflar_vekil.includes(t[e].tebligatlar_muhatap.replace("Vekil","").trim())||a.taraflar_vekil.includes(t[e].tebligatlar_muhatap.replace("Müdafii","").trim())))){let a=document.createElement("li");a.innerText=t[e].tebligatlar_muhatap;let i=document.createElement("ul");i.dataset.taraf=t[e].tebligatlar_muhatap,i.append(r(t[e])),a.append(i),$(a).appendTo(n)}}else a[0].append(r(t[e]))}if("gorulmemis"==this.type){let e=document.createElement("div");e.classList.add("HepisiniSil"),e.append(t((()=>{let a=e.closest(".folder"),t=Array.from(a.querySelectorAll("ul li.lastli input")).slice().reverse();for(let e=0;e<t.length;e++)t[e].checked&&UYAP_EXT.DB.gorulmemisKaldir("tebligatlar",t[e].value).then((a=>{let r=t[e].closest("ul");if(delete UYAP_EXT.TOOL._user.interrupts.showToastrs.tebligat[t[e].value],UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,null!=r)if(1==t[e].closest("ul").querySelectorAll("li").length)t[e].closest(".folder").remove();else try{t[e].closest(".lastli").remove()}catch(e){}}));UYAP_EXT.MENU.badgeOlustur("tebligatlar")}))),n.append(e)}l.append(e)}return $(l).find("li > ul").each((function(){var e=$(this).parent();e.addClass("folder");var a=$(this);$(this).remove(),e.wrapInner("<a href='#' />"),e.append(a),e.find("a").click((function(e){e.target==this&&($(this).siblings("ul").slideToggle("slow"),e.preventDefault())}))})),0==sayacevrak&&(l.innerHTML="<div class='merkezuyari'>Aradığınız Kriterlerde Tebligat Bulunamadı</div>"),l},openMygalleryTebligatList:async function(e){let a=document.createElement("div");a.className="tebligatlarim_anadiv",a.append(await this.filtrelerUlcreate(e)),a.append(await this.folderEvraklarListCreateDateOrder(e)),UYAP_EXT.DIALOG.blockUILogo.hide();let t={elements:[{content:a,width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1};return"gorulmemis"==this.type&&(t.lightboxHTML=UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML),UYAP_EXT.DIALOG.openMygalleryTebligatList=GLightbox(t),UYAP_EXT.DIALOG.openMygalleryTebligatList.on("open",(()=>{$(".gclose").on("click",(function(){}))})),await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.openMygalleryTebligatList).promise}},openNotlarim:{modal:null,type:"list",anchorWhere:{},notlarFilter:async function(e=[]){let a={from:"notlar",fields:["notlar.type","notlar.kaynakId","notlar.created_tarihi","notlar.creator","notlar.notlar_id","notlar.modified_tarihi","dosyalar.*","ihaleler.*","durusmalar.*","evraklar.*"],where:[],join:[["LEFT_OUTER_JOIN","ihaleler",[["notlar.kaynakId","ihaleler.ihaleKayitId"]]],["LEFT_OUTER_JOIN","durusmalar",[["notlar.kaynakId","durusmalar.kayitId"]]],["LEFT_OUTER_JOIN","dosyalar",[["notlar.kaynakId","dosyalar.dosyalar_id"]]],["LEFT_OUTER_JOIN","evraklar",[["notlar.kaynakId","evraklar.evraklar_id"]]]],orderby:[["notlar.modified_tarihi","DESC"],["notlar.created_tarihi","DESC"]]};if("list"==this.type){a.where=a.where.concat(e),a.where.push(["AND","dosyalar.hash","=",this.anchorWhere.hash]);let t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:a});a.where.pop(),a.where.push(["AND","durusmalar.birimId","=",this.anchorWhere.birimId]),a.where.push(["AND","durusmalar.dosyaNo","=",this.anchorWhere.dosyaNo]);let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:a});a.where.pop(),a.where.pop(),a.where.push(["AND","evraklar.ana_dosyaId","=",this.anchorWhere.hash]);let i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:a});return t.concat(r,i)}return a.where=a.where.concat(e),await UYAP_EXT.DB.connection.select("",{method:"POST",body:a})},filtrelerUlcreate:async function(){async function e(){return{notAlan:await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"notlar",fields:["calisma_grubu.username","calisma_grubu.adi","calisma_grubu.soyadi"],distinct:["notlar.creator"],join:[["JOIN","calisma_grubu",[["notlar.creator","calisma_grubu.username"]]]]}}),notBirimAdi:await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",fields:["dosyalar.birimId","dosyalar.birimAdi"],distinct:["dosyalar.birimId"]}})}}function a(){return UYAP_EXT.DIALOG.blockUILogo.show("Filtreniz Uygulanıyor","Lütfen İşlem Bitene Kadar Bekleyiniz",""),new Promise((async(e,a)=>{let t=[],l=[];r.value&&l.push(["AND","notlar.created_tarihi",">=",new Date(r.value)]),i.value&&l.push(["AND","notlar.created_tarihi","<=",new Date(i.value)]);let n=[];for(let e=0;e<o.selectedOptions.length;e++)n.push(o.selectedOptions[e].value);if(n.length>0?l.push(["AND","notlar.type","in",n]):l.push(["AND","notlar.type","=",1]),"list"!=UYAP_EXT.DIALOG.openNotlarim.type){n=[];for(let e=0;e<d.selectedOptions.length;e++)n.push(d.selectedOptions[e].value);if(n.length>0){l.push(["AND","dosyalar.birimId","in",n]);let e=await UYAP_EXT.DIALOG.openNotlarim.notlarFilter(l);e.filter((e=>"dosyalar"==e.notlar_type)),e=UYAP_EXT.TOOL.uniqueArray(e,"notlar_notlar_id"),l=l.slice(0,-1),l.push(["AND","durusmalar.birimId","in",n]);let a=await UYAP_EXT.DIALOG.openNotlarim.notlarFilter(l);a.filter((e=>"durusmalar"==e.notlar_type)),a=UYAP_EXT.TOOL.uniqueArray(a,"notlar_notlar_id"),l=l.slice(0,-1),l.push(["AND","evraklar.evraklar_id","isnotnull",void 0]);let r=await UYAP_EXT.DIALOG.openNotlarim.notlarFilter(l);l=l.slice(0,-1),r=r.filter((e=>"evraklar"==e.notlar_type&&n.some((a=>{if("string"==typeof e.evraklar_ana_dosyaId)return e.evraklar_ana_dosyaId.indexOf(a)>=0})))),r=UYAP_EXT.TOOL.uniqueArray(r,"notlar_notlar_id"),t=e.concat(a,r)}}else t=await UYAP_EXT.DIALOG.openNotlarim.notlarFilter(l);UYAP_EXT.DIALOG.openNotlarim.folderEvraklarListCreateDateOrder(t).then((a=>{$(".notlarim_anadiv .directory-list").replaceWith(a),UYAP_EXT.DIALOG.blockUILogo.hide(),e(t)}))}))}let t=document.createElement("ul");t.className="notlarim_filterUl";let r=document.createElement("input");r.style.padding="5px 8px",r.type="date",r.onchange=function(e){r.valueAsDate&&i.valueAsDate&&r.valueAsDate>=i.valueAsDate?alert("Başlangıç Tarihi Bitiş Tarihinden Büyük Olamaz."):a()};let i=document.createElement("input");i.style.padding="5px 8px",i.type="date",i.onchange=function(e){if(r.valueAsDate>=i.valueAsDate)return alert("Başlangıç Tarihi Bitiş Tarihinden Büyük Olamaz."),void(i.valueAsDate=bitis);a()};let l=await e(),n=["dosyalar","Dosya Notları","evraklar","Evrak Notları","durusmalar","Duruşma ve Keşif Notları","ihaleler","İhale Notları"],o=document.createElement("select");o.setAttribute("multiple","");for(let e=0;e<n.length-1;e+=2){let a=document.createElement("option");a.innerText=n[e+1],a.value=n[e],a.selected=!0,o.append(a)}document.createElement("select").setAttribute("multiple","");let s=l.notBirimAdi,d=document.createElement("select");d.setAttribute("multiple","");for(let e=0;e<s.length;e++){let a=document.createElement("option");a.innerText=s[e].dosyalar_birimAdi,a.value=s[e].dosyalar_birimId,a.selected=!0,d.append(a)}return $(t).append(o),$(t).append(r),$(t).append(i),$(t).append(),"ara"==this.type&&$(t).append(d),$(t).children().wrap("<li></li>"),$(r).before("<label>Başlangış Tarihi:</label>"),$(i).before("<label>Bitiş Tarihi:</label>"),$(d).before("<label>Yargı Birimi:</label>"),$(o).before("<label>Not Türü:</label>"),$(o).SumoSelect({placeholder:"Not Türü",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},$(d).SumoSelect({placeholder:"Yargı Birimi",csvDispCount:3,captionFormat:"{0} Şeçildi",captionFormatAllSelected:"{0} Hepsi Seçildi!",okCancelInMulti:!0,selectAll:!0,search:!0,searchText:"Ara...",searchFn:function(e,a,t){return e.toLocaleLowerCase("tr-TR").indexOf(a.toLocaleLowerCase("tr-TR"))<0},noMatch:'Sonuç "{0}"',prefix:"",locale:["Tamam","İptal","Hepsini Seç"],up:!1,showTitle:!0,renderLi:(e,a)=>e}).onchange=function(){a()},t},folderEvraklarListCreateDateOrder:async function(e){let a=new Map;for(let t=0;t<e.length;t++)switch(e[t].notlar_type){case"dosyalar":a.has("dosyalar")||a.set("dosyalar",new Map),a.get("dosyalar").has(e[t].dosyalar_hash)?a.get("dosyalar").get(e[t].dosyalar_hash).has("dosya_notu")?a.get("dosyalar").get(e[t].dosyalar_hash).get("dosya_notu").has(e[t].dosyalar_hash)?a.get("dosyalar").get(e[t].dosyalar_hash).get("dosya_notu").get(e[t].dosyalar_hash).push(e[t]):a.get("dosyalar").get(e[t].dosyalar_hash).get("dosya_notu").set(e[t].dosyalar_hash,[e[t]]):a.get("dosyalar").get(e[t].dosyalar_hash).set("dosya_notu",new Map([[e[t].dosyalar_hash,[e[t]]]])):a.get("dosyalar").set(e[t].dosyalar_hash,new Map([["dosya_notu",new Map([[e[t].dosyalar_hash,[e[t]]]])]]));break;case"evraklar":let r=await UYAP_EXT.TOOL.findDosya(null,e[t].evraklar_ana_dosyaId);Object.assign(e[t],r),a.has("dosyalar")||a.set("dosyalar",new Map),a.get("dosyalar").has(e[t].evraklar_ana_dosyaId)?a.get("dosyalar").get(e[t].evraklar_ana_dosyaId).has("evraklar")?a.get("dosyalar").get(e[t].evraklar_ana_dosyaId).get("evraklar").has(e[t].evraklar_evrakId)?a.get("dosyalar").get(e[t].evraklar_ana_dosyaId).get("evraklar").get(e[t].evraklar_evrakId).push(e[t]):a.get("dosyalar").get(e[t].evraklar_ana_dosyaId).get("evraklar").set(e[t].evraklar_evrakId,[e[t]]):a.get("dosyalar").get(e[t].evraklar_ana_dosyaId).set("evraklar",new Map([[e[t].evraklar_evrakId,[e[t]]]])):a.get("dosyalar").set(e[t].evraklar_ana_dosyaId,new Map([["evraklar",new Map([[e[t].evraklar_evrakId,[e[t]]]])]]));break;case"durusmalar":let i=await UYAP_EXT.TOOL.findDurusmaDosyasi(e[t].durusmalar_dosyaId);Object.assign(e[t],i),a.has("dosyalar")||a.set("dosyalar",new Map),a.get("dosyalar").has(e[t].dosyalar_hash)?a.get("dosyalar").get(e[t].dosyalar_hash).has("durusmalar")?a.get("dosyalar").get(e[t].dosyalar_hash).get("durusmalar").has(e[t].durusmalar_kayitId)?a.get("dosyalar").get(e[t].dosyalar_hash).get("durusmalar").get(e[t].durusmalar_kayitId).push(e[t]):a.get("dosyalar").get(e[t].dosyalar_hash).get("durusmalar").set(e[t].durusmalar_kayitId,[e[t]]):a.get("dosyalar").get(e[t].dosyalar_hash).set("durusmalar",new Map([[e[t].durusmalar_kayitId,[e[t]]]])):a.get("dosyalar").set(e[t].dosyalar_hash,new Map([["durusmalar",new Map([[e[t].durusmalar_kayitId,[e[t]]]])]]));break;default:break}let t=document.createElement("ul");return t.id="notlarimUl",t.className="directory-list",a.forEach(((e,a)=>{e instanceof Map&&e.forEach(((e,a)=>{let r=document.createElement("li"),i=document.createElement("ul");if(e.has("dosya_notu")){e.get("dosya_notu").entries().next().value[1].forEach((e=>{r.innerText=`${e.dosyalar_dosyaNo?e.dosyalar_dosyaNo:e.dosyalar_esasNo} E. - ${e.dosyalar_birimAdi} ( ${null!=e.dosyalar_dosyaTurAciklama?e.dosyalar_dosyaTurAciklama:null!=e.dosyalar_davaSucTuruAdi?e.dosyalar_davaSucTuruAdi:null!=e.dosyalar_dosyaTurKoduAciklama?e.dosyalar_dosyaTurKoduAciklama:e.dosyalar_dosyaTur} )`;let a=document.createElement("li");a.className="lastli",a.innerText="Dosya Notum ("+e.notlar_created_tarihi.toLocaleDateString("tr-TR")+")",a.onclick=function(a){a.stopPropagation(),UYAP_EXT.DIALOG.openDosyaSummernote(e.dosyalar_hash,(()=>{UYAP_EXT.DIALOG.myGalleryNotlarim.open()}))},i.append(a),r.append(i),"ara"==this.type&&$(r).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.goruntule((function(a){a.stopPropagation(),UYAP_EXT.TOOL.dosyaGoruntule(e)}))))}))}else if(e.has("durusmalar")){let a=e.get("durusmalar").entries().next().value[1][0];r.innerText=`${null!=a.dosyalar_dosyaNo?a.dosyalar_dosyaNo:a.dosyalar_esasNo} E. - ${a.dosyalar_birimAdi} ( ${null!=a.dosyalar_dosyaTurAciklama?a.dosyalar_dosyaTurAciklama:null!=a.dosyalar_davaSucTuruAdi?a.dosyalar_davaSucTuruAdi:null!=a.dosyalar_dosyaTurKoduAciklama?a.dosyalar_dosyaTurKoduAciklama:a.dosyalar_dosyaTur} )`,r.append(i),"ara"==this.type&&$(r).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.goruntule((function(e){e.stopPropagation(),UYAP_EXT.TOOL.dosyaGoruntule(a)}))))}else if(e.has("evraklar")){let a=e.get("evraklar").entries().next().value[1][0];r.innerText=`${null!=a.dosyalar_dosyaNo?a.dosyalar_dosyaNo:a.dosyalar_esasNo} E. - ${a.dosyalar_birimAdi} ( ${null!=a.dosyalar_dosyaTurAciklama?a.dosyalar_dosyaTurAciklama:null!=a.dosyalar_davaSucTuruAdi?a.dosyalar_davaSucTuruAdi:null!=a.dosyalar_dosyaTurKoduAciklama?a.dosyalar_dosyaTurKoduAciklama:a.dosyalar_dosyaTur} )`,r.append(i),"ara"==this.type&&$(r).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.goruntule((function(e){e.stopPropagation(),UYAP_EXT.TOOL.dosyaGoruntule(a)}))))}if(e.has("durusmalar")){let a=document.createElement("ul"),t=document.createElement("li");t.innerText="Duruşma Ve Keşif Notlarım",a.append(t);let r=document.createElement("ul");e.get("durusmalar").forEach(((e,a)=>{e.forEach((e=>{let a=document.createElement("li");a.className="lastli",a.innerText=e.durusmalar_islemTuruAciklama+" ( "+e.durusmalar_tarihSaat.toLocaleDateString("tr-TR")+" )",a.onclick=function(a){a.stopPropagation(),UYAP_EXT.DIALOG.openDurusmaSummernote(e.durusmalar_kayitId,(()=>{UYAP_EXT.DIALOG.myGalleryNotlarim.open()}))},r.append(a)}))})),t.append(r),i.append(t)}if(e.has("ihale_notu")){let a=e.get("ihale_notu");r.innerText=`${null!=a.dosyaNo?a.dosyaNo:a.esasNo} E. - ${a.satisiYapanBirim}`;let t=document.createElement("li");$(r).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.goruntule((function(e){window.open("http://esatis.uyap.gov.tr/main/jsp/esatis/index.jsp?menuId=37120&kayitId="+a.ihaleKayitId,"_blank")})))),t.className="lastli",t.innerText="İhale Notum",t.onclick=function(e){e.stopPropagation(),UYAP_EXT.DIALOG.openNotlarIhaleSummernote(a,(()=>{UYAP_EXT.DIALOG.myGalleryNotlarim.open()}))},i.append(t),r.append(i)}if(e.has("evraklar")){let a=document.createElement("ul"),t=document.createElement("li");t.innerText="Evrak Notlarım",a.append(t);let r=document.createElement("ul");e.get("evraklar").forEach(((e,a)=>{e.forEach((e=>{let a=document.createElement("li");a.className="lastli",a.onclick=function(a){a.target==this&&(UYAP_EXT.TOOL.fileGoruntule(e.evraklar_evrakId,e.evraklar_birimEvrakNo,e.dosyalar_hash),a.stopPropagation())},a.innerText=(null==(e.evraklar_tur&&e.evraklar_aciklama)?"EK":e.evraklar_tur+" - "+e.evraklar_aciklama)+" ( "+e.notlar_created_tarihi.toLocaleDateString("tr-TR")+" )",$(a).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(a){a.stopPropagation(),UYAP_EXT.DIALOG.openEvrakSummernote(e).then((()=>{UYAP_EXT.DIALOG.myGalleryNotlarim.open()}))})),UYAP_EXT.TOOL.imerekButtons.download((function(a){a.stopPropagation(),UYAP_EXT.TOOL.fileDownload(e.evraklar_evrakId,e.evraklar_birimEvrakNo,e.dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),r.append(a)}))})),t.append(r),i.append(t)}t.append(r)}))})),$(t).find("li > ul").each((function(){var e=$(this).parent();e.addClass("folder");var a=$(this);$(this).remove(),e.wrapInner("<a href='#' />"),e.append(a),e.find("a").click((function(e){e.target==this&&($(this).siblings("ul").slideToggle("slow"),e.preventDefault())}))})),t},default:async function(e,a={},t="ara"){UYAP_EXT.DIALOG.blockUILogo.show("Notlarınız Düzenleniyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body"),this.type=t,this.modal=e,this.anchorWhere=a,this.openMygalleryNotlarim(await UYAP_EXT.DIALOG.openNotlarim.notlarFilter())},openMygalleryNotlarim:async function(e){let a=document.createElement("div");a.className="notlarim_anadiv",a.append(await this.filtrelerUlcreate(e)),a.append(await this.folderEvraklarListCreateDateOrder(e)),UYAP_EXT.DIALOG.blockUILogo.hide();let t={elements:[{content:a,width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1};return"ara"==this.type&&(t.lightboxHTML=UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML),UYAP_EXT.DIALOG.myGalleryNotlarim=GLightbox(t),UYAP_EXT.DIALOG.myGalleryNotlarim.once("open",(()=>{UYAP_EXT.DIALOG.blockUILogo.hide()})),await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryNotlarim).promise}},openYeniDanistayDosyalar:async function(e){UYAP_EXT.DIALOG.myGalleryYeniler=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="yeni_dosyalar" class="display" width="100%">\n                <tfoot>\n            <tr>\n                <th></th>\n                <th></th>\n                <th></th>\n                <th><button onclick="UYAP_EXT.MENU.gorulmemisSecilenleriKaldir()" class="btn btn-danger btn-sm imerek-btn" >Gösterme</i></button></th>\n            </tr>\n            </tfoot></table>',width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryYeniler.on("open",(function(){UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.table_name","=","danistaydosyalar"],["AND","dosyalar.gorulmemis","istrue","true"],["AND","dosyalar.is_aktif","istrue",!0]]}}).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.listener=e=>{function a(e){$("#"+e+" button.close").unbind("click.sil"),$("#"+e+" .modal-footer button.default").unbind("click.sil"),UYAP_EXT.DIALOG.openDosyaAra.myGalleryDosyaAra.open()}$("#"+e+" button.close").bind("click.sil",(function(){a(e)})),$("#"+e+" .modal-footer button.default").bind("click.sil",(function(){a(e)}))},UYAP_EXT.DIALOG.gorulmemisler=new DataTable("#yeni_dosyalar",{data:e,columns:[{data:"dosyalar_birimAdi",title:"BİRİM"},{data:"dosyalar_dosyaNo",title:"DOSYA NO"},{type:"number",render:{_:"display",sort:"timestamp"},data:function(e,a,t,r){return e.dosyalar_dosyaAcilisTarihi?{display:e.dosyalar_dosyaAcilisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_dosyaAcilisTarihi.getTime()}:""},title:"DOSYA AÇILIŞ TARİHİ"},{data:function(e,a,t,r){return'<input type="checkbox" class="checkbox" data-type="dosyalar" value="'+e.dosyalar_dosyalar_id+'"></input>'},name:"hepsinisec",title:'<input type="checkbox" class="checkbox" onclick="UYAP_EXT.MENU.gorulmemisHepsiniSec(this)"/>'}],createdRow:function(e,a,t){$(e).find("td:not(:last)").on("click",(async function(e){await UYAP_EXT.TOOL.dosyaGoruntule(a)}))},language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},autoWidth:!0,order:[[2,"desc"]],initComplete:function(){this.api().columns([0,1,2]).every((function(){var e=this,a=$('<select><option value=""></option></select>').appendTo($(e.footer()).empty()).on("change",(function(){var a=DataTable.util.escapeRegex($(this).val());e.search(a?"^"+a+"$":"",!0,!1).draw()}));e.data().unique().sort().each((function(e,t){a.append('<option value="'+e+'">'+e+"</option>")}))}))}})})),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryYeniler).promise},openDosyaSummernote:async function(e){return new Promise((async(a,t)=>{let r;function i(){let a=new Date;return Jodit.make("#joditnote",{toolbarButtonSize:"small",uploader:{insertImageAsBase64URI:!0},extraButtons:[{tooltip:"Kaydet",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/save-regular.png",exec:e=>{"<p><br></p>"==e.getEditorValue()?o.length>0&&UYAP_EXT.DB.notuSil(o[0].notlar_notlar_id):UYAP_EXT.DB.notuKaydet(n.dosyalar_dosyalar_id,e.getEditorValue(),"dosyalar")}},{tooltip:"Takvime Ekle",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/google_drive.png",exec:t=>{"<p><br></p>"==t.getEditorValue()?o.length>0&&UYAP_EXT.DB.notuSil(o[0].notlar_notlar_id).then((t=>{UYAP_EXT.DIALOG.dosyaCalendarTaskFormSend(e,new Date(a))})):UYAP_EXT.DB.notuKaydet(n.dosyalar_dosyalar_id,t.getEditorValue(),"dosyalar").then((t=>{UYAP_EXT.DIALOG.dosyaCalendarTaskFormSend(e,new Date(a))}))},popup:function(e){let t=document.createElement("div");t.style.cssText="display: flex;justify-content: center;align-items: baseline;column-gap: 5px;";let r=document.createElement("input");return r.type="date",r.onchange=()=>{a=r.value},t.append(r),t}},{tooltip:"Notu Sil",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/delete.png",exec:e=>{o.length>0?UYAP_EXT.DB.notuSil(o[0].notlar_notlar_id).then((e=>{UYAP_EXT.DIALOG.myGallery.close()})):UYAP_EXT.DIALOG.myGallery.close()}}],height:"90%",placeholder:"Dosya Notunuzu Kaydetmeyi Unutmayın"})}UYAP_EXT.DIALOG.blockUILogo.show("Notunuz Hazırlanıyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body");const l='<div id="glightbox-body" class="glightbox-container">\n        <div class="gloader visible"></div>\n        <div class="goverlay"></div>\n        <div class="gcontainer">\n        <div id="glightbox-slider" ></div>\n        <button class="gnext gbtn" tabindex="0" aria-label="Next" style="display:none" data-customattribute="example"></button>\n        <button class="gprev gbtn" tabindex="1" style="display:none" aria-label="Previous"></button>\n        <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n    </div>\n    </div>';let n=await UYAP_EXT.TOOL.findDosya(null,e),o=await UYAP_EXT.DB.notuAl(n.dosyalar_dosyalar_id,"dosyalar",n.notlar_notlar_id?n.notlar_notlar_id:null),s=null==o[0]||null==o[0].notlar_alinan_not?null:o[0].notlar_alinan_not;UYAP_EXT.DIALOG.myGallery=GLightbox({lightboxHTML:l,elements:[{content:'<h2 id="baslik" style="text-align:center;font-weight:bold;">'+(n.dosyalar_dosyaNo?n.dosyalar_dosyaNo+" E. - ":n.dosyalar_esasNo?n.dosyalar_esasNo+" E. - ":"")+n.dosyalar_birimAdi+'</h2><textarea id="joditnote" ></textarea>',width:"90%",height:"85vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGallery.on("close",(function(e){r.destruct(),delete UYAP_EXT.DIALOG.myGallery})),UYAP_EXT.DIALOG.myGallery.on("open",(function(e){r=i(),r.setEditorValue(s||""),i(),UYAP_EXT.DIALOG.blockUILogo.hide()})),a(await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGallery).promise)}))},openDurusmaSummernote:async function(e){return new Promise((async(a,t)=>{let r;function i(){let a=!0;return Jodit.make("#joditnote",{toolbarButtonSize:"small",uploader:{insertImageAsBase64URI:!0},extraButtons:[{tooltip:"Kaydet",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/save-regular.png",exec:e=>{"<p><br></p>"==e.getEditorValue()?o.length>0&&UYAP_EXT.DB.notuSil(o[0].notlar_notlar_id):UYAP_EXT.DB.notuKaydet(n.durusmalar_kayitId,e.getEditorValue(),"durusmalar")}},{tooltip:"Takvime Ekle",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/google_drive.png",exec:t=>{"<p><br></p>"==t.getEditorValue()?o.length>0&&UYAP_EXT.DB.notuSil(o[0].notlar_notlar_id).then((t=>{UYAP_EXT.DIALOG.durusmaCalendarEventFormSend(e,!0,a)})):UYAP_EXT.DB.notuKaydet(n.durusmalar_kayitId,t.getEditorValue(),"durusmalar").then((t=>{UYAP_EXT.DIALOG.durusmaCalendarEventFormSend(e,!0,a)}))},popup:function(e){let t=document.createElement("div");t.style.cssText="display: flex;justify-content: center;align-items: baseline;column-gap: 5px;";let r=document.createElement("input");r.type="checkbox",r.className="checkbox",r.checked=!0,r.onchange=()=>{a=r.checked};let i=document.createElement("span");return i.innerText="Dosya Notumu Ekle",t.append(r,i),t}},{tooltip:"Notu Sil",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/delete.png",exec:e=>{o.length>0?UYAP_EXT.DB.notuSil(o[0].notlar_notlar_id).then((e=>{UYAP_EXT.DIALOG.myGallery.close()})):UYAP_EXT.DIALOG.myGallery.close()}}],height:"100%",placeholder:"Duruşma Notunuzu Kaydetmeyi Unutmayın"})}UYAP_EXT.DIALOG.blockUILogo.show("Notunuz Hazırlanıyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body");const l='<div id="glightbox-body" class="glightbox-container">\n        <div class="gloader visible"></div>\n        <div class="goverlay"></div>\n        <div class="gcontainer">\n        <div id="glightbox-slider" ></div>\n        <button class="gnext gbtn" tabindex="0" aria-label="Next" style="display:none" data-customattribute="example"></button>\n        <button class="gprev gbtn" tabindex="1" style="display:none" aria-label="Previous"></button>\n        <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n    </div>\n    </div>';let n=(await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"durusmalar",where:[["AND","durusmalar.kayitId","=",e]]}}))[0],o=await UYAP_EXT.DB.notuAl(n.durusmalar_kayitId,"durusmalar",n.notlar_notlar_id?n.notlar_notlar_id:null),s=null==o[0]||null==o[0].notlar_alinan_not?null:o[0].notlar_alinan_not;UYAP_EXT.DIALOG.myGallery=GLightbox({lightboxHTML:l,elements:[{content:`<h2 id="baslik" style="text-align:center;font-weight:bold;">${n.durusmalar_dosyaNo+"E. - "+n.durusmalar_yerelBirimAd}</h2><textarea id="joditnote" ></textarea>`,width:"90%",height:"85vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGallery.on("close",(function(e){r.destruct(),delete UYAP_EXT.DIALOG.myGallery})),UYAP_EXT.DIALOG.myGallery.on("open",(function(e){r=i(),r.setEditorValue(s||""),UYAP_EXT.DIALOG.blockUILogo.hide()})),a(await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGallery).promise)}))},openYeniYargitayDosyalar:async function(e){UYAP_EXT.DIALOG.myGalleryYeniler=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="yeni_dosyalar" class="display" width="100%">\n                <tfoot>\n            <tr>\n                <th>Name</th>\n                <th>Position</th>\n                <th>Office</th>\n                <th>Age</th>\n                <th></th>\n                <th></th>\n                <th></th>\n                <th></th>\n                <th></th>\n                <th></th>\n                <th><button onclick="UYAP_EXT.MENU.gorulmemisSecilenleriKaldir()" class="btn btn-danger btn-sm imerek-btn" >Gösterme</button></th>\n            </tr>\n            </tfoot></table>',width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryYeniler.on("open",(function(){UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.table_name","=","yargitaydosyalar"],["AND","dosyalar.gorulmemis","istrue","true"],["AND","dosyalar.is_aktif","istrue",!0]]}}).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.listener=()=>{if(window.location.href.indexOf("/main/jsp/avukat/index.jsp?menuId=12558")<0)return alert("Talep Etmiş Olduğunuz İşlemi Gerçekleştirmek Üzere Yönlendiriliyorsunuz.\nLütfen Açılan Sayfada Tekrar Deneyiniz."),window.location.href="/main/jsp/avukat/index.jsp?menuId=12558#",!1;function e(){UYAP_EXT.DIALOG.myGalleryYeniler.open(),document.getElementById("btnCloseDocView").removeEventListener("click",e),document.getElementById("dosya_goruntule").querySelector("button.close").removeEventListener("click",e)}document.getElementById("btnCloseDocView").addEventListener("click",e),document.getElementById("dosya_goruntule").querySelector("button.close").addEventListener("click",e)},UYAP_EXT.DIALOG.gorulmemisler=new DataTable("#yeni_dosyalar",{data:e,columns:[{data:"dosyalar_birimAdi",title:"BİRİM"},{data:"dosyalar_mahkemeBirimAdi",title:"MAHKEME"},{data:"dosyalar_esasNo",title:"ESAS NO"},{type:"number",render:{_:"display",sort:"timestamp"},data:function(e,a,t,r){return e.dosyalar_dosyaAcilisTarihi?{display:e.dosyalar_gelisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_gelisTarihi.getTime()}:""},title:"GELİŞ TARİHİ"},{data:"dosyalar_ilislikiDosyaListesi",title:"İLİŞKİLİ DOSYA"},{data:"dosyalar_mahkemeEsasNo",title:"MAHKEME ESAS NO"},{data:"dosyalar_mahkemeKararNo",title:"MAHKEME KARAR NO"},{type:"date",data:function(e,a,t,r){return e.dosyalar_mahkemeKararTarihi.toLocaleString("tr-TR")},title:"MAHKEME KARAR TARİHİ"},{data:"dosyalar_davaSucTuruAdi",title:"DAVA SUÇ TÜRÜ"},{data:"dosyalar_durumAdi",title:"DURUMU"},{data:function(e,a,t,r){return'<input type="checkbox" class="checkbox" data-type="dosyalar" value="'+e.dosyalar_dosyalar_id+'"></input>'},name:"hepsinisec",title:'<input type="checkbox" class="checkbox" onclick="UYAP_EXT.MENU.gorulmemisHepsiniSec(this)"/>'}],language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},createdRow:function(e,a,t){$(e).find("td:not(:last)").on("click",(async function(e){await UYAP_EXT.TOOL.dosyaGoruntule(a)}))},autoWidth:!0,order:[[3,"desc"]],initComplete:function(){this.api().columns([0,1,2,3,4,5,6,7,8]).every((function(){var e=this,a=$('<select><option value=""></option></select>').appendTo($(e.footer()).empty()).on("change",(function(){var a=DataTable.util.escapeRegex($(this).val());e.search(a?"^"+a+"$":"",!0,!1).draw()}));e.data().unique().sort().each((function(e,t){a.append('<option value="'+e+'">'+e+"</option>")}))}))}})})),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryYeniler).promise},openYeniCbsDosyalar:async function(e){UYAP_EXT.DIALOG.myGalleryYeniler=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="yeni_dosyalar" class="display" width="100%">\n                   <tfoot>\n               <tr>\n                   <th>Name</th>\n                   <th>Office</th>\n                   <th>Age</th>\n                   <th></th>\n                   <th></th>\n                   <th></th>\n                   <th><button onclick="UYAP_EXT.MENU.gorulmemisSecilenleriKaldir()" class="btn btn-danger btn-sm imerek-btn" >Gösterme</button></th>\n               </tr>\n               </tfoot></table>',width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryYeniler.on("open",(function(){UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.table_name","=","cbsdosyalar"],["AND","dosyalar.gorulmemis","istrue","true"],["AND","dosyalar.is_aktif","istrue",!0]]}}).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.listener=()=>{function e(){UYAP_EXT.DIALOG.myGalleryYeniler.open(),document.getElementById("dosya_goruntule_modal").querySelector("button.close").removeEventListener("click",e),document.getElementById("modal-footer").querySelector("button").removeEventListener("click",e)}document.getElementById("dosya_goruntule_modal").querySelector("button.close").addEventListener("click",e),document.getElementById("modal-footer").querySelector("button").addEventListener("click",e)},Object.defineProperty(UYAP_EXT.DIALOG,"tmp",{value:e,writable:!0,configurable:!0,enumerable:!0}),UYAP_EXT.DIALOG.gorulmemisler=new DataTable("#yeni_dosyalar",{data:e,columns:[{data:"dosyalar_birimAdi",title:"MAHKEME"},{data:"dosyalar_dosyaNo",title:"ESAS NO"},{data:"dosyalar_dosyaTur",title:"DOSYA TÜRÜ"},{data:"dosyalar_dosyaDurum",title:"DOSYA DURUMU"},{data:function(e,a,t,r){return"H"==e.dosyalar_davaAcilmisMi?"Hayır":"Evet"},title:"DAVA AÇILMIŞ MI?"},{type:"number",render:{_:"display",sort:"timestamp"},data:function(e,a,t,r){return e.dosyalar_dosyaAcilisTarihi?{display:e.dosyalar_dosyaAcilisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_dosyaAcilisTarihi.getTime()}:""},title:"AÇILIŞ TARİHİ"},{data:function(e,a,t,r){return'<input type="checkbox" class="checkbox" data-type="dosyalar" value="'+e.dosyalar_dosyalar_id+'"></input>'},name:"hepsinisec",title:'<input type="checkbox" class="checkbox" onclick="UYAP_EXT.MENU.gorulmemisHepsiniSec(this)"/>'}],language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},autoWidth:!0,order:[[5,"desc"]],createdRow:function(e,a,t){$(e).find("td:not(:last)").on("click",(async function(e){await UYAP_EXT.TOOL.dosyaGoruntule(a)}))},initComplete:function(){this.api().columns([0,1,2,3,4]).every((function(){var e=this,a=$('<select><option value=""></option></select>').appendTo($(e.footer()).empty()).on("change",(function(){var a=DataTable.util.escapeRegex($(this).val());e.search(a?"^"+a+"$":"",!0,!1).draw()}));e.data().unique().sort().each((function(e,t){a.append('<option value="'+e+'">'+e+"</option>")}))}))}})})),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryYeniler).promise},openYeniDosyalar:async function(e){UYAP_EXT.DIALOG.myGalleryYeniler=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="yeni_dosyalar" class="display" width="100%">\n                <tfoot>\n            <tr>\n                <th>Name</th>\n                <th>Office</th>\n                <th>Age</th>\n                <th></th>\n                <th></th>\n                <th><button onclick="UYAP_EXT.MENU.gorulmemisSecilenleriKaldir()" class="btn btn-danger btn-sm imerek-btn" >Gösterme</button></th>\n            </tr>\n            </tfoot></table>',width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryYeniler.on("open",(function(){let a=e.getAttribute("data-yargiTuru");UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.birimTuru3","=",a],["AND","dosyalar.gorulmemis","istrue","true"],["AND","dosyalar.is_aktif","istrue",!0]]}}).then((e=>{Object.defineProperty(UYAP_EXT.DIALOG,"tmp",{value:e,writable:!0,configurable:!0,enumerable:!0}),UYAP_EXT.DIALOG.gorulmemisler=new DataTable("#yeni_dosyalar",{data:e,columns:[{data:"dosyalar_birimAdi",title:"MAHKEME"},{data:"dosyalar_dosyaNo",title:"ESAS NO"},{data:"dosyalar_dosyaTur",title:"DOSYA TÜRÜ"},{data:"dosyalar_dosyaDurum",title:"DOSYA DURUMU"},{type:"number",render:{_:"display",sort:"timestamp"},data:function(e,a,t,r){return e.dosyalar_dosyaAcilisTarihi?{display:e.dosyalar_dosyaAcilisTarihi.toLocaleString("tr-TR"),timestamp:e.dosyalar_dosyaAcilisTarihi.getTime()}:""},title:"AÇILIŞ TARİHİ"},{data:function(e,a,t,r){return'<input type="checkbox" class="checkbox" data-type="dosyalar" value="'+e.dosyalar_dosyalar_id+'"></input>'},name:"hepsinisec",title:'<input type="checkbox" class="checkbox" onclick="UYAP_EXT.MENU.gorulmemisHepsiniSec(this)"/>'}],language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},autoWidth:!0,dom:"lrtip",order:[[4,"desc"]],buttons:{buttons:["copy",{text:"My button",action:function(e){}}]},createdRow:function(e,a,t){$(e).find("td:not(:last)").on("click",(async function(e){await UYAP_EXT.TOOL.dosyaGoruntule(a)}))},initComplete:function(){this.api().columns([0,1,2,3,4]).every((function(){var e=this,a=$('<select><option value=""></option></select>').appendTo($(e.footer()).empty()).on("change",(function(){var a=DataTable.util.escapeRegex($(this).val());e.search(a?"^"+a+"$":"",!0,!1).draw()}));e.data().unique().sort().each((function(e,t){a.append('<option value="'+e+'">'+e+"</option>")}))}))}})})),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryYeniler).promise},openYeniEvraklar:async function(e){function a(e){function a(e,a){let t=document.createElement("input");return t.type="checkbox",t.classList.add("checkbox"),t.onchange=e,t.dataset.table_name="evraklar",t.value=a,t}let t=new Map,r=document.createElement("ul");r.className="directory-list";for(let a=0;a<e.length;a++)t.has(e[a].dosyalar_hash)?0==e[a].evraklar_anaEvrakId?t.get(e[a].dosyalar_hash).has(e[a].evraklar_evrakId)?t.get(e[a].dosyalar_hash).get(e[a].evraklar_evrakId).evrak=e[a]:t.get(e[a].dosyalar_hash).set(e[a].evraklar_evrakId,{evrak:e[a],ekler:[]}):t.get(e[a].dosyalar_hash).has(e[a].evraklar_anaEvrakId)?t.get(e[a].dosyalar_hash).get(e[a].evraklar_anaEvrakId).ekler.push(e[a]):t.get(e[a].dosyalar_hash).set(e[a].evraklar_anaEvrakId,{evrak:e[a],ekler:[e[a]]}):(t.set(e[a].dosyalar_hash,new Map([["dosya",e[a]]])),0==e[a].evraklar_anaEvrakId?t.get(e[a].dosyalar_hash).set(e[a].evraklar_evrakId,{evrak:e[a],ekler:[]}):t.get(e[a].dosyalar_hash).set(e[a].evraklar_anaEvrakId,{evrak:e[a],ekler:[e[a]]}));sayacevrak=0;for(const[i,l]of t.entries()){let t=document.createElement("li");t.innerHTML=(l.get("dosya").dosyalar_dosyaNo?l.get("dosya").dosyalar_dosyaNo+" E. - ":l.get("dosya").dosyalar_esasNo?l.get("dosya").dosyalar_esasNo+" E. - ":"")+l.get("dosya").dosyalar_birimAdi+(null!=l.get("dosya").dosyalar_dosyaTurAciklama?" ( "+l.get("dosya").dosyalar_dosyaTurAciklama+" )":""),t.append(a((e=>{e.currentTarget.closest(".folder").querySelectorAll("ul input").forEach((function(a){a.checked=e.currentTarget.checked})),e.stopPropagation()}))),$(t).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop=UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openDosyaSummernote(l.get("dosya").dosyalar_hash).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.open(),UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.goruntule((function(e){e.stopPropagation(),UYAP_EXT.TOOL.dosyaGoruntule(l.get("dosya"))}))));let i=document.createElement("ul");if(t.append(i),l instanceof Map){for(let[e,t]of l)if("dosya"!=e)if(t.ekler.length>0){sayacevrak++;let e=document.createElement("li");e.innerText=t.evrak.evraklar_tur+" ( "+(t.evrak.evraklar_sistemeGonderildigiTarih?t.evrak.evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR"):t.evrak.evraklar_created_tarihi.toLocaleDateString("tr-TR"))+" )",e.title=t.evrak.evraklar_gonderenYerKisi+"\nAçıklama:"+t.evrak.evraklar_aciklama;let r=document.createElement("ul"),l=document.createElement("li");l.className="lastli",l.onclick=function(e){e.target==this&&(UYAP_EXT.TOOL.fileGoruntule(t.evrak.evraklar_evrakId,t.evrak.evraklar_birimEvrakNo,t.evrak.dosyalar_hash),e.stopPropagation())},l.innerHTML=t.evrak.evraklar_tur+" ( "+(t.evrak.evraklar_sistemeGonderildigiTarih?t.evrak.evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR"):t.evrak.evraklar_created_tarihi.toLocaleDateString("tr-TR"))+" )",l.append(a((e=>{1==e.currentTarget.checked&&e.currentTarget.closest("ul").querySelectorAll("input:not(:checked)").forEach((function(e,a,t){e.checked=!0})),e.stopPropagation()}),t.evrak.evraklar_evraklar_id)),$(l).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop=UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openEvrakSummernote(t.evrak).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.download((function(e){e.stopPropagation(),UYAP_EXT.TOOL.fileDownload(t.evrak.evraklar_evrakId,t.evrak.evraklar_birimEvrakNo,t.evrak.dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),r.append(l);for(let e=0;e<t.ekler.length;e++){let i=document.createElement("li");i.className="lastli",i.innerText="Ek-"+(e+1).toString(),i.onclick=function(a){a.target==this&&(UYAP_EXT.TOOL.fileGoruntule(t.ekler[e].evraklar_evrakId,t.ekler[e].evraklar_birimEvrakNo,t.ekler[e].dosyalar_hash),a.stopPropagation())},i.append(a((e=>{0==e.currentTarget.checked&&(e.currentTarget.closest("ul").querySelector("li:first-child input").checked=!1),e.stopPropagation()}),t.ekler[e].evraklar_evraklar_id)),$(i).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(a){a.stopPropagation(),UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop=UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openEvrakSummernote(t.ekler[e]).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.download((function(a){a.stopPropagation(),UYAP_EXT.TOOL.fileDownload(t.ekler[e].evraklar_evrakId,t.ekler[e].evraklar_birimEvrakNo,t.ekler[e].dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),r.append(i)}e.append(r),i.append(e)}else{sayacevrak++;let e=document.createElement("li");e.onclick=function(e){e.target==this&&(UYAP_EXT.TOOL.fileGoruntule(t.evrak.evraklar_evrakId,t.evrak.evraklar_birimEvrakNo,t.evrak.dosyalar_hash),e.stopPropagation())},e.className="lastli",e.innerText=t.evrak.evraklar_tur+" ( "+(t.evrak.evraklar_sistemeGonderildigiTarih?t.evrak.evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR"):t.evrak.evraklar_created_tarihi.toLocaleDateString("tr-TR"))+" )",e.title=t.evrak.evraklar_gonderenYerKisi+"\nAçıklama:"+t.evrak.evraklar_aciklama,e.append(a((e=>{e.stopPropagation()}),t.evrak.evraklar_evraklar_id)),$(e).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notAl((function(e){e.stopPropagation(),UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop=UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTop,UYAP_EXT.DIALOG.openEvrakSummernote(t.evrak).then((e=>{UYAP_EXT.DIALOG.myGalleryYeniler.activeSlide.querySelector(".ginlined-content").scrollTo({top:UYAP_EXT.DIALOG.myGalleryYeniler.scrollTop,left:0,behavior:"instant"})}))})),UYAP_EXT.TOOL.imerekButtons.download((function(e){UYAP_EXT.TOOL.fileDownload(t.evrak.evraklar_evrakId,t.evrak.evraklar_birimEvrakNo,t.evrak.dosyalar_hash).promise.then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))})))),i.append(e)}let e=document.createElement("button");e.onclick=async function(e){let a=e.currentTarget.closest(".folder"),t=Array.from(a.querySelectorAll("ul li.lastli input")).slice().reverse();for(let e=0;e<t.length;e++)t[e].checked&&UYAP_EXT.DB.gorulmemisKaldir(t[e].dataset.table_name,t[e].value).then((a=>{if(null!=t[e].closest("ul"))if(1==t[e].closest("ul").querySelectorAll("li").length)t[e].closest(".folder").remove();else try{t[e].closest(".lastli").remove()}catch(e){}}));await UYAP_EXT.MENU.badgeOlustur("evraklar"),document.querySelector("[name=menu_item_yeni_evraklar] li .menu_badge")||document.querySelector("#hamburger .nav-back").click()},e.classList.add("btn","btn-danger","btn-sm","imerek-btn"),e.innerText="Tekrar Gösterme";let t=document.createElement("div");t.className="HepisiniSil",t.append(e),i.append(t)}if(r.append(t),sayacevrak>500){alert(e.length+" Yeni Evrakınızın "+sayacevrak+" Tanesi Gösteriliyor");break}}return $(r).find("li > ul").each((function(){var e=$(this).parent();e.addClass("folder");var a=$(this);$(this).remove(),e.wrapInner("<a href='#' />"),e.append(a),e.find("a").click((function(e){e.target==this&&($(this).siblings("ul").slideToggle("slow"),e.preventDefault())}))})),$(r).children("li").find("ul").css("display","none"),r}UYAP_EXT.DIALOG.blockUILogo.show("Evrak Listeniz Oluşturuluyor...","İşlem Biraz Zaman Alabilir","Lütfen İşlem Bitene Kadar Bekleyiniz");let t={from:"evraklar",join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[["AND","evraklar.gorulmemis","istrue",!0]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]],limit:2e3};if(e.dataset.filter)t.where.push(["AND","dosyalar.table_name","=",e.dataset.filter]);else{let a=e.getAttribute("data-birimTur3");t.where.push(["AND","dosyalar.birimTuru3","=",a]),t.where.push(["AND","dosyalar.table_name","=","dosyalar"])}let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t});UYAP_EXT.DIALOG.myGalleryYeniler=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:a(r),width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryYeniler.once("open",(function(){UYAP_EXT.DIALOG.blockUILogo.hide()})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryYeniler).promise},openYeniCbsEvraklar:async function(e){e.dataset.filter="cbsdosyalar",await UYAP_EXT.DIALOG.openYeniEvraklar(e)},openYeniDanistayEvraklar:async function(e){e.dataset.filter="danistaydosyalar",await UYAP_EXT.DIALOG.openYeniEvraklar(e)},openYeniYargitayEvraklar:async function(e){e.dataset.filter="yargitaydosyalar",await UYAP_EXT.DIALOG.openYeniEvraklar(e)},openDevamedenIslemlerim:async function(e){UYAP_EXT.DIALOG.DevamedenIslemlerim=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="devam_eden_islemler" class="display" width="100%">\n               </table>',width:"90%",height:"95vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.DevamedenIslemlerim.on("open",(function(){UYAP_EXT.DIALOG.devam_eden_islemler=new DataTable("#devam_eden_islemler",{data:UYAP_EXT.TOOL.islemlerim.devamEdenIslemler,columns:[{data:function(e,a,t,r){const i=new Date,l=Math.abs(i-e.isEmirTarihi);return Math.ceil(l/864e5)},title:"GEÇEN SÜRE(GÜN)"},{data:"name",title:"İŞİN ADI"},{data:function(e,a,t,r){return e.isEmirTarihi.toLocaleDateString("tr-TR")},title:"İŞ EMİR TARİHİ"},{data:"birimAdi",title:"GELEN EVRAK KAYDI"},{data:"dosyaNo",title:"DOSYA NO"},{data:"isinSahibi",title:"İŞ KİMDE"}],language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},autoWidth:!0,order:[[0,"desc"]],responsive:!0}),$("#devam_eden_islemler tbody").on("click","tr",(function(){}))})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.DevamedenIslemlerim).promise},durusmaCalendarEventFormSend:async function(e,a=!0){a&&UYAP_EXT.DIALOG.blockUILogo.show("DURUŞMA Takviminize Ekleniyor","GOOGLE Takviminizden Cevap Bekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let t={from:"dosyalar",join:[["JOIN","durusmalar",[["dosyalar.birimId","durusmalar.birimId"],["dosyalar.dosyaNo","durusmalar.dosyaNo"]]]],where:[["AND","durusmalar.kayitId","=",e]]},r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t}),i=!1,l="",n="",o="",s=!0,d="",u="",c=await UYAP_EXT.DB.dosyaTaraflariAl(r[0].dosyalar_hash);for(let e=0;e<c.length;e++)l+=c[e].taraflar_rol+":"+c[e].taraflar_adi+"[Vekil: "+c[e].taraflar_vekil.join()+"]\n";let m=await UYAP_EXT.DB.dosyaAyrintilariAl(r[0].dosyalar_hash);for(let e=0;e<m.length;e++)"davaTurleriStr"==m[e].dosya_ayrintilar_key&&""!=m[e].dosya_ayrintilar_val&&(n+=m[e].dosya_ayrintilar_key+":"+m[e].dosya_ayrintilar_val+"\n");u=await UYAP_EXT.DB.notuAl(e,"durusmalar"),1==s&&(o=await UYAP_EXT.DB.notuAl(r[0].dosyalar_dosyalar_id,"dosyalar")),d=r[0].durusmalar_islemTuruAciklama.toLocaleUpperCase("Tr-tr")+" - "+(r[0].dosyalar_esasNo?r[0].dosyalar_esasNo:r[0].dosyalar_dosyaNo)+" "+r[0].dosyalar_birimAdi;var y={summary:d,description:`${n}\n${l}${o[0]?"\nDOSYA NOTUM:\n"+o[0].notlar_alinan_not:""}\nDURUŞMA NOTUM:\n${u[0]?u[0].notlar_alinan_not:""}`,start:{dateTime:r[0].durusmalar_tarihSaat.toISOString()},end:{dateTime:new Date(r[0].durusmalar_tarihSaat.setMinutes(r[0].durusmalar_tarihSaat.getMinutes()+10)).toISOString()},reminders:{useDefault:!0,overrides:[]}};a&&(document.getElementById("dialog_ayrinti").innerHTML=d);try{let t=await UYAP_EXT.GOOGLE.upsertCalendarEvent(e,y,"durusmalar");if("boolean"==typeof t){a&&"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),elem.disabled=!1;let e=$("<div>"),i=$(`<table class="toast-table">\n<tr><td>Mahkeme</td><td>:</td><td>${r[0].dosyalar_birimAdi}</td></tr>\n<tr><td>Dosya No</td><td>:</td><td>${r[0].dosyalar_esasNo?r[0].dosyalar_esasNo:r[0].dosyalar_dosyaNo}</td></tr>\n<tr><td>${n.length>0?"Dava Türü":""}</td><td>${n.length>0?":":""}</td><td>${n.length>0?n.split(":")[1]:""}</td></tr>\n<tr><td>Tarih</td><td>:</td><td>${r[0].durusmalar_tarihSaat.toLocaleString("TR-tr")}</td></tr>\n<tr><td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold">${r[0].durusmalar_islemTuruAciklama+" takviminize eklenemedi"}</td></tr>\n<tr><td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td></tr>\n</table>`);return $(e).append(i),UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",$(e)[0]),t?"google_yetki_islemi_basladi":"google_yetki_verilmedi"}t.created?(UYAP_EXT.DIALOG.myGallery&&UYAP_EXT.DIALOG.myGallery.close(),i=!0):(i=!1,elem.disabled=!1)}catch(e){i=!1}d.split("-");let _=$("<div>");if(1==i){let e=$(`<table class="toast-table">\n<tr><td>Mahkeme</td><td>:</td><td>${r[0].dosyalar_birimAdi}</td></tr>\n<tr><td>Dosya No</td><td>:</td><td>${r[0].dosyalar_esasNo?r[0].dosyalar_esasNo:r[0].dosyalar_dosyaNo}</td></tr>\n<tr><td>${n.length>0?"Dava Türü":""}</td><td>${n.length>0?":":""}</td><td>${n.length>0?n.split(":")[1]:""}</td></tr>\n<tr><td>Tarih</td><td>:</td><td>${r[0].durusmalar_tarihSaat.toLocaleString("TR-tr")}</td></tr>\n<tr><td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold">${r[0].durusmalar_islemTuruAciklama+" notunuz takviminizde başarı ile güncellenmiştir"}</td></tr>\n<tr><td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td></tr>\n</table>`);$(_).append(e),UYAP_EXT.DIALOG.toastr.upRight.show("success","GOOGLE TAKVİM BİLDİRİMİ",$(_)[0])}if(0==i){let e=$(`<table class="toast-table">\n<tr><td>Mahkeme</td><td>:</td><td>${r[0].dosyalar_birimAdi}</td></tr>\n<tr><td>Dosya No</td><td>:</td><td>${r[0].dosyalar_esasNo?r[0].dosyalar_esasNo:r[0].dosyalar_dosyaNo}</td></tr>\n<tr><td>${n.length>0?"Dava Türü":""}</td><td>${n.length>0?":":""}</td><td>${n.length>0?n.split(":")[1]:""}</td></tr>\n<tr><td>Tarih</td><td>:</td><td>${r[0].durusmalar_tarihSaat.toLocaleString("TR-tr")}</td></tr>\n<tr><td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold">${r[0].durusmalar_islemTuruAciklama+" takviminize eklenemedi"}</td></tr>\n<tr><td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td></tr>\n</table>`);$(_).append(e),UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",$(_)[0])}return a&&"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),i},ihaleCalendarEventFormSend:async function(e,a=!0){a&&UYAP_EXT.DIALOG.blockUILogo.show("İHALENİZ Takviminize Ekleniyor","GOOGLE Takviminizden Cevap Bekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let t={from:"ihaleler",where:[["AND","ihaleler.ihaleKayitId","=",e]]},r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t}),i=!1,l="",n="";n=await UYAP_EXT.DB.notuAl(e,"ihaleler",r[0].ihaleler_ihaleler_id),l="SATIŞ - "+(r[0].ihaleler_esasNo?r[0].ihaleler_esasNo:r[0].ihaleler_dosyaNo)+" "+r[0].ihaleler_satisiYapanBirim;var o={summary:l,description:`SATIŞ NOTUM:\n${n[0]?n[0].notlar_alinan_not:""}`,start:{dateTime:r[0].ihaleler_tarihAraligi_1.toISOString()},end:{dateTime:r[0].ihaleler_tarihAraligi_2.toISOString()},reminders:{useDefault:!0,overrides:[]}};a&&(document.getElementById("dialog_ayrinti").innerHTML=l);try{let t=await UYAP_EXT.GOOGLE.upsertCalendarEvent(e,o,"ihaleler");if("boolean"==typeof t){a&&"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),elem.disabled=!1;let e=$("<div>"),i=$(`<table class="toast-table">\n<tr><td>Satış Birimi</td><td>:</td><td>${r[0].ihaleler_satisiYapanBirim}</td></tr>\n<tr><td>Dosya No</td><td>:</td><td>${r[0].ihaleler_esasNo?r[0].ihaleler_esasNo:r[0].ihaleler_dosyaNo}</td></tr>\n<tr><td>Tarih</td><td>:</td><td>${r[0].ihaleler_tarihAraligi_2.toLocaleString("TR-tr")}</td></tr>\n<tr><td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold"> + "SATIŞ takviminize eklenemedi"}</td></tr>\n<tr><td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td></tr>\n</table>`);return $(e).append(i),UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",$(e)[0]),t?"google_yetki_islemi_basladi":"google_yetki_verilmedi"}t.created?(UYAP_EXT.DIALOG.myGallery&&UYAP_EXT.DIALOG.myGallery.close(),i=!0):(i=!1,elem.disabled=!1)}catch(e){i=!1}l.split("-");let s=$("<div>");if(1==i){let e=$(`<table class="toast-table">\n<tr><td>Satış Birimi</td><td>:</td><td>${r[0].ihaleler_satisiYapanBirim}</td></tr>\n<tr><td>Dosya No</td><td>:</td><td>${r[0].ihaleler_esasNo?r[0].ihaleler_esasNo:r[0].ihaleler_dosyaNo}</td></tr>\n<tr><td>Tarih</td><td>:</td><td>${r[0].ihaleler_tarihAraligi_2.toLocaleString("TR-tr")}</td></tr>\n<tr><td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold">SATIŞ notunuz takviminizde başarı ile güncellenmiştir</td></tr>\n<tr><td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td></tr>\n</table>`);$(s).append(e),UYAP_EXT.DIALOG.toastr.upRight.show("success","GOOGLE TAKVİM BİLDİRİMİ",$(s)[0])}if(0==i){let e=$(`<table class="toast-table">\n<tr><td>Satış Birimi</td><td>:</td><td>${r[0].ihaleler_satisiYapanBirim}</td></tr>\n<tr><td>Dosya No</td><td>:</td><td>${r[0].ihaleler_esasNo?r[0].ihaleler_esasNo:r[0].ihaleler_dosyaNo}</td></tr>\n<tr><td>Tarih</td><td>:</td><td>${r[0].ihaleler_tarihAraligi_2.toLocaleString("TR-tr")}</td></tr>\n<tr><td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold">SATIŞ takviminize eklenemedi</td></tr>\n<tr><td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td></tr>\n</table>`);$(s).append(e),UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",$(s)[0])}return a&&"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),i},evrakCalendarTaskFormSend:async function(e,a=new Date){UYAP_EXT.DIALOG.blockUILogo.show("Görev Ekleniyor","GOOGLE Takviminizden Cevap Bekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let t,r={from:"evraklar",join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[["AND","evraklar.evraklar_id","=",e]]},i=await UYAP_EXT.DB.notuAl(e,"evraklar"),l=await UYAP_EXT.DB.connection.select("",{method:"POST",body:r}),n="",o="",s=null,d=null;s=await UYAP_EXT.DB.dosyaTaraflariAl(l[0].dosyalar_hash);for(let e=0;e<s.length;e++)n+=s[e].taraflar_rol+":"+s[e].taraflar_adi+"[Vekil: "+s[e].taraflar_vekil.join()+"]\n";d=await UYAP_EXT.DB.dosyaAyrintilariAl(l[0].dosyalar_hash);for(let e=0;e<d.length;e++)"davaTurleriStr"==d[e].dosya_ayrintilar_key&&""!=d[e].dosya_ayrintilar_val&&(o+=d[e].dosya_ayrintilar_key+":"+d[e].dosya_ayrintilar_val+"\n");t=0==d.length?s:d;var u={summary:"EVRAK GÖREVİ - "+l[0].dosyalar_birimAdi+" - "+l[0].dosyalar_dosyaNo+"E.["+(l[0].evraklar_anaEvrakId>0?"EK EVRAK":l[0].evraklar_tur)+"]",description:o+"\n"+n+"\nEVRAK GÖREVİM:\n"+(i[0]?i[0].notlar_alinan_not.replaceAll(/"data:image.*"/g,'""'):"")+"\n\n"+window.location.protocol+"//"+window.location.host+"/main/jsp/viewer.jsp?",start:{date:a.toISOString().split("T")[0]},end:{date:a.toISOString().split("T")[0]},reminders:{useDefault:!0,overrides:[]}};if(null==UYAP_EXT.TOOL._user.options.task_list){let e=await UYAP_EXT.GOOGLE.getCalendarList();UYAP_EXT.TOOL._user.options.task_list=e.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}let c=await UYAP_EXT.GOOGLE.createCalendarEvent(u,UYAP_EXT.TOOL._user.options.task_list);return null!=c.id?(await UYAP_EXT.DB.googeCalendarResponseKaydet("evraklar",l[0].evraklar_evraklar_id,c),UYAP_EXT.DIALOG.toastr.upRight.show("success","GOOGLE TAKVİM BİLDİRİMİ",l[0].dosyalar_birimAdi+" - "+l[0].dosyalar_dosyaNo+"E.["+(l[0].evraklar_anaEvrakId>0?"EK EVRAK":l[0].evraklar_tur)+"] ile İlgili notunuz takviminize başarı ile eklenmiştir."),UYAP_EXT.DIALOG.myGallery.close()):(elem.disabled=!1,UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",l[0].dosyalar_birimAdi+" - "+l[0].dosyalar_dosyaNo+"E.["+(l[0].evraklar_anaEvrakId>0?"EK EVRAK":l[0].evraklar_tur)+"] ile İlgili notunuzun takvime eklenmesi sırasında hata oluştu .")),"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),!1},dosyaCalendarTaskFormSend:async function(e,a=new Date){UYAP_EXT.DIALOG.blockUILogo.show("Görev Ekleniyor","GOOGLE Takviminizden Cevap Bekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let t="",r="",i=await UYAP_EXT.TOOL.findDosya(null,e),l=await UYAP_EXT.DB.dosyaTaraflariAl(i.dosyalar_hash);for(let e=0;e<l.length;e++)t+=l[e].taraflar_rol+":"+l[e].taraflar_adi+"[Vekil: "+l[e].taraflar_vekil.join()+"]\n";let n=await UYAP_EXT.DB.dosyaAyrintilariAl(e),o=await UYAP_EXT.DB.notuAl(i.dosyalar_dosyalar_id,"dosyalar");for(let e=0;e<n.length;e++)"Dava Suç Türü"!=n[e].dosya_ayrintilar_key&&"Dosya Türü"!=n[e].dosya_ayrintilar_key&&"Dava Konusu"!=n[e].dosya_ayrintilar_key&&("Dava Türleri"!=n[e].dosya_ayrintilar_key&&"Yolu"!=n[e].dosya_ayrintilar_key&&"Davanın Konusu"!=n[e].dosya_ayrintilar_key||""==n[e].dosya_ayrintilar_val)||(r+=n[e].dosya_ayrintilar_key+":"+n[e].dosya_ayrintilar_val+"\n");var s={summary:"DOSYA GÖREVİ - "+(i.dosyalar_dosyaNo?i.dosyalar_dosyaNo:i.dosyalar_esasNo)+" E. - "+i.dosyalar_birimAdi,description:r+"\n"+t+"\nDOSYA GÖREVİM:\n"+(o[0]?o[0].notlar_alinan_not.replaceAll(/"data:image.*"/g,'""'):""),start:{date:a.toISOString().split("T")[0]},end:{date:a.toISOString().split("T")[0]},reminders:{useDefault:!0,overrides:[]}};if(null==UYAP_EXT.TOOL._user.options.task_list){let e=await UYAP_EXT.GOOGLE.getCalendarList();UYAP_EXT.TOOL._user.options.task_list=e.items[0].id,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}let d=await UYAP_EXT.GOOGLE.createCalendarEvent(s,UYAP_EXT.TOOL._user.options.task_list);return null!=d.id?(await UYAP_EXT.DB.googeCalendarResponseKaydet("dosyalar",e,d),UYAP_EXT.DIALOG.toastr.upRight.show("success","GOOGLE TAKVİM BİLDİRİMİ",(i.dosyalar_dosyaNo?i.dosyalar_dosyaNo:i.dosyalar_esasNo)+" E. - "+i.dosyalar_birimAdi+" ile İlgili notunuz takviminize başarı ile eklenmiştir."),UYAP_EXT.DIALOG.myGallery.close()):(UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",(i.dosyalar_dosyaNo?i.dosyalar_dosyaNo:i.dosyalar_esasNo)+" E. - "+i.dosyalar_birimAdi+" ile İlgili notunuzun takvime eklenmesi sırasında hata oluştu ."),elem.disabled=!1),"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),!1},openEvrakSummernote:function(e){return new Promise((async(a,t)=>{let r;function i(){let a=new Date;return Jodit.make("#joditnote",{toolbarButtonSize:"small",uploader:{insertImageAsBase64URI:!0},extraButtons:[{tooltip:"Kaydet",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/save-regular.png",exec:a=>{"<p><br></p>"==a.getEditorValue()?n.length>0&&UYAP_EXT.DB.notuSil(n[0].notlar_notlar_id):UYAP_EXT.DB.notuKaydet(e.evraklar_evraklar_id,a.getEditorValue(),"evraklar")}},{tooltip:"Takvime Ekle",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/google_drive.png",exec:t=>{"<p><br></p>"==t.getEditorValue()?n.length>0&&UYAP_EXT.DB.notuSil(n[0].notlar_notlar_id).then((t=>{UYAP_EXT.DIALOG.evrakCalendarTaskFormSend(e.evraklar_evraklar_id,new Date(a))})):UYAP_EXT.DB.notuKaydet(e.evraklar_evraklar_id,t.getEditorValue(),"evraklar").then((t=>{UYAP_EXT.DIALOG.evrakCalendarTaskFormSend(e.evraklar_evraklar_id,new Date(a))}))},popup:function(e){let t=document.createElement("div");t.style.cssText="display: flex;justify-content: center;align-items: baseline;column-gap: 5px;";let r=document.createElement("input");return r.type="date",r.onchange=()=>{a=r.value},t.append(r),t}},{tooltip:"Notu Sil",iconURL:"chrome-extension://hlgcdafdokigonljodongahofoeaedjk/style/img/delete.png",exec:e=>{n.length>0?UYAP_EXT.DB.notuSil(n[0].notlar_notlar_id).then((e=>{UYAP_EXT.DIALOG.myGallery.close()})):UYAP_EXT.DIALOG.myGallery.close()}}],height:"90%",placeholder:"Evrak Notunuzu Kaydetmeyi Unutmayın"})}UYAP_EXT.DIALOG.blockUILogo.show("Notunuz Hazırlanıyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body");const l='<div id="glightbox-body" class="glightbox-container">\n        <div class="gloader visible"></div>\n        <div class="goverlay"></div>\n        <div class="gcontainer">\n        <div id="glightbox-slider" ></div>\n        <button class="gnext gbtn" tabindex="0" aria-label="Next" style="display:none" data-customattribute="example"></button>\n        <button class="gprev gbtn" tabindex="1" style="display:none" aria-label="Previous"></button>\n        <button class="gclose gbtn" tabindex="2" aria-label="Close">{closeSVG}</button>\n    </div>\n    </div>';let n=await UYAP_EXT.DB.notuAl(e.evraklar_evraklar_id,"evraklar",e.notlar_notlar_id?e.notlar_notlar_id:null),o=null==n[0]||null==n[0].notlar_alinan_not?null:n[0].notlar_alinan_not;UYAP_EXT.DIALOG.myGallery=GLightbox({lightboxHTML:l,elements:[{content:'<h2 id="baslik" style="text-align:center;font-weight:bold;">'+(e.evraklar_anaEvrakId>0?"EK EVRAK":e.evraklar_tur)+'</h2><textarea id="joditnote" ></textarea>',width:"90%",height:"85vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGallery.on("close",(function(e){r.destruct(),delete UYAP_EXT.DIALOG.myGallery})),UYAP_EXT.DIALOG.myGallery.on("open",(function(e){r=i(),r.setEditorValue(o||""),i(),UYAP_EXT.DIALOG.blockUILogo.hide()})),a(await UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGallery).promise)}))},onerEvraklariEsitle:async function(e,a){try{if(UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al){let t=new Date(UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al.tarih),r=Math.ceil((new Date-t)/864e5);if(r>e){let e=`<p>Saygıdeğer Meslektaşım,\n                                    <br>\n                                    <br>\n                                    <strong>Yeni evraklarınızın kontrolünü en son ${r} gün önce yaptınız.</strong>\n                                    <br>\n                                \n                                    ${"<br>"+a+"</br>"}\n                                   \n                                    <br>\n                                    <u>Yeni Evrak Kontrolü</u> yaparak devam etmek ister misiniz?\n                                    <br>\n                                    </p>`,t=document.createElement("div");t.innerText="Evet",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let i=document.createElement("div");i.innerText="Devam",i.className="btn btn-outline-danger-300 btn-sm",i.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let l={mesaj:e,buttons:[i,t]};await UYAP_EXT.DIALOG.user_dialog.show(l,null,!1)&&await UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.esitle().promise}}else{let e=`<p>Saygıdeğer Meslektaşım,\n            <br>\n            <br>\n            <strong>Daha önce evrak kontrolü yapmadınız.</strong>\n            <br>\n            \n                                    ${"<br>"+a+"</br>"}\n                                   \n            <br>\n            <u>Yeni Evrak Kontrolü</u> yaparak devam etmek ister misiniz?\n            <br>\n            </p>`,t=document.createElement("div");t.innerText="Evet",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let r=document.createElement("div");r.innerText="Devam",r.className="btn btn-outline-danger-300 btn-sm",r.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let i={mesaj:e,buttons:[r,t]};if(!await UYAP_EXT.DIALOG.user_dialog.show(i,null,!1))return!1;await UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.esitle().promise}}catch(e){}},onerGuncelSunucu:function(){let e=document.createElement("div"),a=document.createElement("table");a.className="toast-table",a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Güncel sunucu dosyasını indirip çift tıklayarak yükleyiniz.</td><td></td>',a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Eski sunucunuz varsa kaldırınız. </td><td></td>';let t=document.createElement("a");t.target="_blank",t.onclick=function e(a){UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/updateSunucu",request:{method:"GET"}})},t.innerHTML="Sunucuyu İndirmek İçin Tıklayınız",t.style.cssText="float: right;\n    font-weight: 600;\n    padding-top: 5px;\n    color: ghostwhite;\n",t.href="https://uyap.imerek.com/jaws/downloadNew.php",a.insertRow().insertCell().appendChild(t),$(e).append(a),UYAP_EXT.DIALOG.toastr.upLeft.show("notice","SUNUCUNUZ GÜNCEL DEĞİL",e)},sunucuBulunamadi:function(){let e=document.createElement("div"),a=document.createElement("table");a.className="toast-table",a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Kurumsal çalışabilmeniz için sunucuyu çalıştırıp sayfayı tekrar yükleyiniz.</td><td></td>',a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Çakışma yaşanmaması için UYAP YARDIMCISI etkisizleştirildi</td><td></td>';let t=document.createElement("a");t.innerHTML="Sunucuyu İndir",t.target="_blank",t.style.cssText="float: right;\n    font-weight: 600;\n    padding-top: 5px;\n    color: ghostwhite;\n    text-transform: uppercase;",t.href="https://uyap.imerek.com/jaws/downloadNew.php",a.insertRow().insertCell().appendChild(t);let r=document.createElement("a");r.innerHTML="Kurumsal Kipi Devre Dışı Bırak",r.style.cssText="float: right;\n    font-weight: 600;\n    padding-top: 5px;\n    color: ghostwhite;\n    text-transform: uppercase;",r.onclick=async function(){let e='<p><strong>KURUMSAL ÇALIŞMA KİPİNİ DEVRE DIŞI BIRAKMAK ÜZERESİNİZ!</strong>\n<br><br>Kurumsal kipteki verileriniz silinecektir. Yedek almadıysanız bu verilere tekrar ulaşamazsınız!\n<br>\n<small class="form-text text-muted" style="display: block">(**)Dilediğiniz zaman sunucuyu çalıştırıp tekrar kurumsal kipe geçebilirsiniz. </small> \n<br><br>Devam etmek istediğinizden emin misiniz?</p>',a=document.createElement("div");a.innerText="DEVRE DIŞI BIRAK",a.className="btn btn-outline-danger-300 btn-sm",a.onfunc=async function(e){return localStorage.removeItem(UYAP_EXT.GENEL.kimlikBilgileri.avukatId+"-yeni"),window.location.reload(),!0};let t=document.createElement("div");t.innerText="Vazgeç",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let r={mesaj:e,buttons:[t,a]};return await UYAP_EXT.DIALOG.user_dialog.show(r)},a.insertRow().insertCell().appendChild(r),$(e).append(a),UYAP_EXT.DIALOG.toastr.upLeft.show("error","SUNUCU BULUNAMADI",e),$("#hamburger").remove()},udfIslemleriSunucuda:async function(e){let a="<p><strong><b>UDF Özellikleri İçin Sunucu Gerekmektedir</b></strong><br><br>\n                    <p>UDF dosyalarının PDF ye çevrilme işlemi için sunucu kullanmalısınız.</p>\n                    <br> \n                    <p><strong><b>Ek ücret ödemeden</b></strong> kullanabileceğiniz sunucuyu indirin</p> \n                    </p>\n                    ",t=document.createElement("div");t.innerText="Kapat",t.className="btn btn-outline-danger-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let r=document.createElement("div");r.innerText="İndir",r.className="btn btn-outline-success-300 btn-sm",r.onclick=function e(a){return window.open("https://uyap.imerek.com/jaws/downloadNew.php","blank"),UYAP_EXT.DIALOG.user_dialog.hide(),!0};let i={mesaj:a,buttons:[t,r]};return await UYAP_EXT.DIALOG.user_dialog.show(i)},onerPromode:function(){if(void 0===UYAP_EXT.DIALOG.promodeOnerShow){let e=document.createElement("div"),a=document.createElement("table");a.className="toast-table",a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Dosya ve evrak sayınızın fazlalığı sebebi ile tarayıcınız yeterli perforansı sağlayamıyor.</td><td></td>',a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Ek ücret ödemeden kullanabileceğiniz sunucuyu indirmeniz önerilir.</td><td></td>';let t=document.createElement("a");t.target="_blank",t.onclick=function e(a){UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/updateSunucu",request:{method:"GET"}})},t.innerHTML="Sunucuyu İndirmek İçin Tıklayınız",t.style.cssText="float: right;\n    font-weight: 600;\n    padding-top: 5px;\n    color: ghostwhite;\n",t.href="https://uyap.imerek.com/jaws/downloadNew.php",a.insertRow().insertCell().appendChild(t),$(e).append(a),UYAP_EXT.DIALOG.toastr.upLeft.show("notice","SİSTEM YAVAŞLAMASI",e),UYAP_EXT.DIALOG.promodeOnerShow=!1}},arsivFolderSectir:async function(e){let a='<p><strong>Yerel Arşiv Klasörünüzü Seçiniz</strong><br><br>\n                    <p><strong>Daha sonra değişiklik yapmak isterseniz <u>AYARLAR MENÜSÜ</u> üzerinden <u>YAPMALISINIZ!</u></strong></p>\n                    <small class="form-text text-muted" style="display: block">(*) Seçeceğiniz klasör içinde adınıza yeni bir klasör oluşturulacaktır! </small> \n                    </p>\n                    ',t=document.createElement("div");t.innerText="Klasör Seç",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return new Promise((e=>{UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:"https://google.com",filename:"ornek.html",evraklar_id:0,saveAs:!0,deleteDownloaded:!0}}).then((a=>{UYAP_EXT.TOOL._user.options.arsiv.arsivFolder=a.downloadedFile.filename.current.substring(0,a.downloadedFile.filename.current.lastIndexOf("/"));let t=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder.replace(/^.*[\\/]/,"");t.toLocaleUpperCase("tr").normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding)==UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad&&(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder.replace(new RegExp(t+"$"),""),UYAP_EXT.TOOL._user.options.arsiv.arsivFolder=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder.substring(0,UYAP_EXT.TOOL._user.options.arsiv.arsivFolder.length-1)),""==UYAP_EXT.TOOL._user.options.arsiv.arsivFolder&&(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder=a.downloadedFile.filename.current.substring(0,a.downloadedFile.filename.current.lastIndexOf("\\"))),""!=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder?e(!0):(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder="UYAP DOSYALAR",e(!1)),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.DIALOG.user_dialog.hide()}))}))};let r={mesaj:a,buttons:[t]};return await UYAP_EXT.DIALOG.user_dialog.show(r)},openHariciTebligatlar:{dosyaFilter:function(e){let a=null,t=null,r=!1,i=new Promise((async function(e,r){a=e,t=r,dosyalar=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"harici_tebligatlar"}}),e({dosyalar:dosyalar||[]})})).catch((e=>{r=!0,e(dosyalar)}));return{resolve:a,reject:t,promise:i}},default:async function(){let e,a;UYAP_EXT.DIALOG.blockUILogo.show("Harici Tebligatlarınız Düzenleniyor","","","body",!1,!1,(t=>{t.target.innerText="İŞLEMİN İPTAL EDİLMESİ BEKLENİYOR...",t.target.disabled=!0,e.reject((e=>{a=e}))})),e=UYAP_EXT.DIALOG.openHariciTebligatlar.dosyaFilter();var t=await e.promise;t||(t={tebligatlar:a}),this.openMygalleryHariciTebligatlar(t)},openMygalleryHariciTebligatlar:function(e){let a=document.createElement("table");a.innerHTML='<thead>\n                                <tr class="baslik">\n                                <th>SONUÇ</th>\n                                <th>BARKOD NO</th>\n                                <th>MUHATAP</th>\n                                <th>İÇERİK</th>\n                                <th>DURUM</th>\n                                </thead>\n                                ',a.id="harici_tebligatlar",a.style.width="95%",a.classList.add("display","compact");let t=document.createElement("div");t.append(a),UYAP_EXT.DIALOG.openHariciTebligatlar.Tebligatlar=new DataTable(a,{data:e.dosyalar,columns:[{render:function(e,a,t){return""},createdCell:function(e,a,t,r,i){let l=a.harici_tebligatlar_isLastState,n="unset";switch(l){case 0:l="TESLİMAT AŞAMASINDA";break;case 1:l="BİLA TEBLİĞ",n="orangered";break;case 2:l="TEBLİĞ EDİLDİ",n="seagreen";break;default:break}let o=document.createElement("span");"BARKOD HATALI"==a.harici_tebligatlar_durum?(o.innerText="BARKOD HATALI",n="orangered"):o.innerText=`${l}(${a.harici_tebligatlar_lastStateTarihi.toLocaleDateString("tr-TR")})`,o.style.cssText=`color:${n};display:inline-block`,e.append(o)},data:function(e,a,t,r){return e}},{data:"harici_tebligatlar_barkodNo"},{data:"harici_tebligatlar_muhatap"},{data:"harici_tebligatlar_icerik"},{render:function(e,a,t){return""},createdCell:function(e,a,t,r,i){let l=Math.ceil((new Date-a.harici_tebligatlar_lastStateTarihi)/864e5),n=document.createElement("span");n.innerText=0!=a.harici_tebligatlar_isLastState?l-1+" GÜN ÖNCE "+a.harici_tebligatlar_durum:l-1+" GÜNDÜR "+a.harici_tebligatlar_durum,n.style.cssText="white-space: nowrap;display:inline-block;",e.append(n)},data:function(e,a,t,r){return e}},{orderable:!1,render:function(e,a,t){return""},createdCell:function(e,a,t,r,i){$(e).append($(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(0==a.harici_tebligatlar_isLastState?UYAP_EXT.TOOL.imerekButtons.sync((function(t){UYAP_EXT.DIALOG.blockUILogo.show("Tebligatınız Sorgulanıyor","PTT Gönderi Takip Sisteminin Güvenlik Önlemleri Sebebiyle İşleminiz Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0),UYAP_EXT.DB.tebligatCheck.askPTT([a],"harici_tebligatlar").then((a=>{if(1==a.length){let t=e.closest("tr").querySelector("td:nth-child(1) span"),r=e.closest("tr").querySelector("td:nth-child(5) span"),i=a[0].checkedTebligat.isLastState,l="unset";switch(i){case 0:i="TESLİMAT AŞAMASINDA";break;case 1:i="BİLA TEBLİĞ",l="orangered";break;case 2:i="TEBLİĞ EDİLDİ",l="seagreen";break;default:break}"BARKOD HATALI"==a[0].checkedTebligat.durum?(t.innerText="BARKOD HATALI",l="orangered"):t.innerText=`${i}(${a[0].checkedTebligat.lastStateTarihi.toLocaleDateString("tr-TR")})`,t.style.color=l;let n=Math.ceil((new Date-a[0].checkedTebligat.lastStateTarihi)/864e5);r.innerText=0!=a[0].checkedTebligat.isLastState?n-1+" GÜN ÖNCE "+a[0].checkedTebligat.checkedTebligat.durum:n-1+" GÜNDÜR "+a[0].checkedTebligat.durum}UYAP_EXT.DIALOG.blockUILogo.hide()}))})):null,UYAP_EXT.TOOL.imerekButtons.delete((function(e){UYAP_EXT.DIALOG.blockUILogo.show("Tebligatınız Siliniyor","","","body",!1,!0),UYAP_EXT.DB.connection.delete({method:"PUT",body:{from:"harici_tebligatlar",where:[["AND","harici_tebligatlar.barkodNo","=",a.harici_tebligatlar_barkodNo]]}}).then((e=>{UYAP_EXT.DIALOG.openHariciTebligatlar.Tebligatlar.row(r).remove().draw(!1),UYAP_EXT.DIALOG.blockUILogo.hide()}))}))))},data:function(e,a,t,r){return e}}],language:{decimal:"",emptyTable:"Gösterilecek Veri Yok",info:"Toplam _TOTAL_ Satırın _START_ ile _END_ Arası Gösteriliyor",infoEmpty:"Toplam 0 Satırın 0 ile 0 Arası Gösteriliyor",infoFiltered:"(Toplam _MAX_ filtreleniyor)",infoPostFix:"",thousands:",",lengthMenu:"_MENU_ Satır Göster",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Aranan Bulunamadı",paginate:{first:"İlk",last:"Son",next:"Sonraki",previous:"Önceki"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},pageLength:10,autoWidth:!0,response:!0,layout:{topEnd:{buttons:[{text:"Tebligat Ekle",className:"btn btn-outline-success-300 btn-sm",action:function(e,a,t,r){let i=`<form class="form-vertical" style="display: grid">\n                                    <h5 style="text-align: right;font-weight: bold;"> TEBLİGAT EKLE</h5>\n                                    <div class="form-row" style="display: flex;column-gap: 5%;"> \n                                    <div class="form-group" style="width:47.5%;">\n                                        <label for="tebligatBarkodNo" class="control-label">BAKOD NO</label>\n                                        <div>\n                                            <input type="text" id="tebligatBarkodNo" value="" oninput="this.value = this.value.replace(/[^0-9,]/g, '').replace(/(\\..*)\\./g, '$1');" class="form-control input-sm"  placeholder="Barkod No" >\n                                        </div>\n                                    </div>\n                                     <div class="form-group" style="width:47.5%">\n                                        <label for="hariciTebligatTarihi"  class="control-label">TARİH</label>\n                                        <div>\n                                            <input type="date" value="${(new Date).toISOString().substring(0,10)}" id="hariciTebligatTarihi" class="form-control input-sm" id="inputEmail3">\n                                        </div>\n                                    </div>\n                                    </div>\n                                    \n                                    <div class="form-group">\n                                        <label for="tebligatMuhatap" class="col-sm-2 control-label">MUHATAP</label>\n                                        <div>\n                                            <textarea id="tebligatMuhatap" class="form-control input-sm" rows="1" placeholder="Muhatap"></textarea>\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <label for="tebligatIcerik" class="col-sm-2 control-label">İÇERİK</label>\n                                        <div >\n                                            <textarea id="tebligatIcerik" class="form-control input-sm" rows="1" placeholder="Tebligat İçeriği Veya Notunuz"></textarea>\n                                        </div>\n                                    </div>\n\n                                </form>`,l=document.createElement("div");l.innerText="İptal",l.className="btn btn-outline-danger btn-sm",l.onfunc=async function(){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let n=document.createElement("div");n.innerText="Ekle",n.className="btn btn-outline-success-200 btn-sm",n.onfunc=async function(e){let a=document.getElementById("tebligatBarkodNo").value,t=new Date(document.getElementById("hariciTebligatTarihi").value),r=document.getElementById("tebligatMuhatap").value,i=document.getElementById("tebligatIcerik").value;UYAP_EXT.DIALOG.user_dialog.hide(),UYAP_EXT.DIALOG.blockUILogo.show("Tebligatınız Sorgulanıyor","PTT Gönderi Takip Sisteminin Güvenlik Önlemleri Sebebiyle İşleminiz Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0),await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harici_tebligatlar",data:[{barkodNo:a,evrakTarihi:t,muhatap:r,icerik:i,lastStateTarihi:new Date,isLastState:0,gorulmemis:!1}]}});let l=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"harici_tebligatlar",where:[["AND","harici_tebligatlar.barkodNo","=",a]]}}),n=(await UYAP_EXT.DB.tebligatCheck.askPTT(l,"harici_tebligatlar"),await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"harici_tebligatlar"}}));return UYAP_EXT.DIALOG.openHariciTebligatlar.Tebligatlar.clear().rows.add(n).draw(!1),UYAP_EXT.DIALOG.blockUILogo.hide(),!1};let o={mesaj:i,buttons:[l,n]};UYAP_EXT.DIALOG.user_dialog.show(o)}}]}},initComplete:function(){UYAP_EXT.DIALOG.blockUILogo.hide()}}),UYAP_EXT.DIALOG.openHariciTebligatlar.myGalleryHariciTebligatlar=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTMLSlideButtonsuz,elements:[{content:t,width:"98%",height:"100vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.openHariciTebligatlar.myGalleryHariciTebligatlar.on("open",(function(){$(".dt-buttons").removeClass("dt-buttons"),$(".gclose").on("click",(function(){}))})),UYAP_EXT.DIALOG.openHariciTebligatlar.myGalleryHariciTebligatlar.on("close",(function(e){})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.openHariciTebligatlar.myGalleryHariciTebligatlar).promise}}},UYAP_EXT.TOOL={UDF:{toPDF:{convert:(e,a=null)=>new Promise((t=>{UYAP_EXT.TOOL.UDF.unzip(e).then((e=>{e.forEach((function(e,r){r.name.indexOf("content.xml")>-1&&r.async("uint8array").then((e=>{var r=(new TextDecoder).decode(e);(new DOMParser).parseFromString(r,"application/xml");UYAP_EXT.TOOL.user.options.promode?UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/toPDF",request:{method:"POST",body:JSON.stringify({content:r,filename:a})}}).then((e=>{e.body=JSON.parse(e.body),t(e)})):UYAP_EXT.DIALOG.udfIslemleriSunucuda().then((e=>{UYAP_EXT.DIALOG.blockUILogo.hide()}))}))}))}))}))},talepOlustur:{templates:{talep:'<?xml version="1.0" encoding="UTF-8"?>\n<template format_id="1.8">\n<content data-icerik="0"><![CDATA[]]></content>\n<properties>\n<pageFormat mediaSizeName="1" leftMargin="70.875" rightMargin="70.875" topMargin="70.875"\nbottomMargin="70.875" paperOrientation="1" headerFOffset="20.0" footerFOffset="20.0" />\n</properties>\n<elements resolver="hvl-default">\n</elements>\n<styles>\n<style name="default" description="Geçerli" family="Lucida Grande" size="13" bold="false"\nitalic="false"\nFONT_ATTRIBUTE_KEY="com.apple.laf.AquaFonts$DerivedUIResourceFont[family=Lucida Grande,name=Lucida Grande,style=plain,size=13]" />\n<style name="hvl-default" family="Times New Roman" size="12" description="Gövde" />\n</styles>\n</template>'},createTable:function(e){let a=e.createElement("table");return a.setAttribute("data-table","0"),a.setAttribute("tableName","Sabit"),a.setAttribute("columnCount","3"),a.setAttribute("columnSpans","63,8,229"),a.setAttribute("border","borderNone"),a.setAttribute("borderWidth","1.0"),a.setAttribute("borderSpec","31"),a.setAttribute("borderColor","-16777216"),a.setAttribute("borderStyle","borderStyle-plain"),a.setAttribute("rowSpans","457,457,457,457,457,457,457"),a},createTableRow:function(e,a=[]){let t=e.createElement("row");t.setAttribute("rowName","row1"),t.setAttribute("rowType","dataRow"),t.setAttribute("height","0.0"),t.setAttribute("columnSpans","63,8,229"),t.setAttribute("border","borderNone"),t.setAttribute("borderWidth","0.5"),t.setAttribute("borderSpec","31"),t.setAttribute("borderColor","-16777216"),t.setAttribute("borderStyle","borderStyle-plain");for(let r=0;r<a.length;r++){let i=UYAP_EXT.TOOL.UDF.talepOlustur.createTableCell(e);for(let t=0;t<a[r].paragraphs.length;t++){let l=UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(e,a[r].paragraphs[t].paragraph,a[r].paragraphs[t].content);i.append(l)}t.append(i)}return t},createTableCell:function(e){let a=e.createElement("cell");return a.setAttribute("border","borderNone"),a.setAttribute("borderWidth","0.5"),a.setAttribute("borderSpec","31"),a.setAttribute("borderColor","-16777216"),a.setAttribute("borderStyle","borderStyle-plain"),a},createParagraph:function(e,a={Alignment:"1",bold:"false",underline:"false"},t={Alignment:"1",bold:"false",underline:"false",text:" "}){let r=e.querySelector("[data-icerik]").childNodes[0],i=e.querySelector("[data-icerik]").childNodes[0].length;r.appendData(t.text);let l=e.createElement("paragraph");l.setAttribute("Alignment",a.Alignment),l.setAttribute("LeftIndent","0.0"),l.setAttribute("RightIndent","1.0"),l.setAttribute("borderWidth","1.0"),l.setAttribute("borderSpec","31"),l.setAttribute("borderColor","-16777216"),l.setAttribute("borderStyle","borderStyle-plain");let n=e.createElement("content");return n.setAttribute("bold",t.bold),n.setAttribute("underline",t.underline),n.setAttribute("startOffset",i),n.setAttribute("length",t.text.length.toString()),n.setAttribute("Alignment",t.Alignment),n.setAttribute("LeftIndent","3.0"),n.setAttribute("RightIndent","1.0"),n.setAttribute("border","borderCell"),n.setAttribute("borderSpec","31"),n.setAttribute("borderColor","-16777216"),n.setAttribute("borderStyle","borderStyle-plain"),n.setAttribute("borderWidth","1.0"),l.append(n),l},dosyalar:async function(e){UYAP_EXT.DIALOG.blockUILogo.show("Talep Evrakınız Oluşturuluyor","UYAP Portaldan Yanıt Bekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let a=await UYAP_EXT.TOOL.findDosya(null,e),t=await UYAP_EXT.TOOL.makeRequest("/dosya_taraf_bilgileri_brd.ajx",JSON.stringify({dosyaId:a.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",a).promise;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.taraf));let r=[],i=JSON.parse(t.xhr.response);for(let a=0;a<i.length;a++){let t={};t.dosyaId=e,t.rol=i[a].rol,t.adi=i[a].adi;let l=[];try{l=i[a].vekil.replaceAll("[","").replaceAll("]","").split(",").map((function(e){return e.trim()}))}catch(e){}t.vekil=JSON.stringify(l),r.push(t)}let l=r.filter((e=>e.vekil.includes(UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad)));l.sort(((e,a)=>e.adi-a.adi));let n=r.filter((e=>0==e.vekil.includes(UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad))),o=(new DOMParser).parseFromString(UYAP_EXT.TOOL.UDF.talepOlustur.templates.talep,"text/xml"),s=o.querySelector("elements");s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"1",bold:"false",underline:"false"},{Alignment:"1",bold:"false",underline:"false",text:a.dosyalar_birimAdi.toLocaleUpperCase("tr")+"'NE"})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o));let d=UYAP_EXT.TOOL.UDF.talepOlustur.createTable(o);if(a.dosyalar_dosyaTur.indexOf("Değişik")>=0){let e=UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:"DOSYA NO\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:a.dosyalar_dosyaNo+" D.İş\n"}},{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}]}]);d.append(e)}else if(-1==a.dosyalar_dosyaTur.indexOf("Talimat")){let e=UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:"DOSYA NO\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:a.dosyalar_dosyaNo+" Esas\n"}},{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}]}]);d.append(e)}else{let e=UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:"DOSYA NO\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:a.dosyalar_dosyaNo+" Talimat\n"}},{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}]}]);d.append(e)}let u=[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:l[0].rol.toLocaleUpperCase("tr")+"\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:(l.length>1?"1. ":"")+l[0].adi.toLocaleUpperCase("tr")+"\n"}}]}];for(let e=1;e<l.length;e++)u[2].paragraphs.push({paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:(e+1).toString()+". "+l[e].adi.toLocaleUpperCase("tr")+"\n"}});if(u[2].paragraphs.push({paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}),d.append(UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,u)),d.append(UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:a.dosyalar_dosyaTur.indexOf("Ceza")>=0?"MÜDAFİİ\n":"VEKİLİ\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"AV. "+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"\n"}},{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}]}])),n.length>0){let e=[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:n[0].rol.toLocaleUpperCase("tr")+"\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[]}];if(-1==a.dosyalar_dosyaTur.indexOf("Ceza")){if(n.length>1)for(let a=0;a<n.length;a++)e[2].paragraphs.push({paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:(a+1).toString()+". "+n[a].adi.toLocaleUpperCase("tr")+"\n"}});else e[2].paragraphs.push({paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:n[0].adi.toLocaleUpperCase("tr")+"\n"}});e[2].paragraphs.push({paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}),d.append(UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,e))}}d.append(UYAP_EXT.TOOL.UDF.talepOlustur.createTableRow(o,[{paragraphs:[{paragraph:{Alignment:"0",bold:"true",underline:"false"},content:{Alignment:"0",bold:"true",underline:"false",text:"KONU\n"}}]},{paragraphs:[{paragraph:{Alignment:"1",bold:"true",underline:"false"},content:{Alignment:"1",bold:"true",underline:"false",text:":\n"}}]},{paragraphs:[{paragraph:{Alignment:"0",bold:"false",underline:"false"},content:{Alignment:"0",bold:"false",underline:"false",text:"\n"}}]}])),s.append(d),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"0",bold:"true",underline:"true"},{Alignment:"0",bold:"true",underline:"true",text:"AÇIKLAMALAR\n"})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"0",bold:"true",underline:"true"},{Alignment:"0",bold:"true",underline:"true",text:"DELİL LİSTESİ:\n"})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"0",bold:"true",underline:"true"},{Alignment:"0",bold:"true",underline:"true",text:"HUKUKİ SEBEPLER:\n"})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"0",bold:"true",underline:"true"},{Alignment:"0",bold:"true",underline:"true",text:"SONUÇ VE İSTEM:\n"})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),a.dosyalar_dosyaTur.indexOf("Ceza")>=0?s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"1",bold:"false",underline:"false"},{Alignment:"1",bold:"false",underline:"false",text:"karar verilmesini saygılarımızla arz ve talep ederiz."+(new Date).toLocaleDateString("tr")})):s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"1",bold:"false",underline:"false"},{Alignment:"1",bold:"false",underline:"false",text:"karar verilmesini saygılarımızla vekaleten arz ve talep ederiz."+(new Date).toLocaleDateString("tr")})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"2",bold:"false",underline:"false"},{Alignment:"2",bold:"false",underline:"false",text:l[0].rol.toLocaleUpperCase("tr")+" "+(a.dosyalar_dosyaTur.indexOf("Ceza")>=0?"MÜDAFİİ":"VEKİLİ")})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"2",bold:"false",underline:"false"},{Alignment:"2",bold:"false",underline:"false",text:"AV. "+UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad})),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o)),s.append(UYAP_EXT.TOOL.UDF.talepOlustur.createParagraph(o,{Alignment:"0",bold:"true",underline:"true"},{Alignment:"0",bold:"true",underline:"true",text:"EKLER:\n"}));const c=new Blob([o.documentElement.outerHTML],{type:"text/html"});UYAP_EXT.TOOL.UDF.createUDF(c,"TALEP-"+a.dosyalar_birimAdi+" "+a.dosyalar_dosyaNo+".udf"),UYAP_EXT.DIALOG.blockUILogo.hide()}},unzip:async function(e){var a=new JSZip;return await a.loadAsync(e)},createUDF:function(e,a="download.udf"){let t=new JSZip;t.file("content.xml",e),t.generateAsync({type:"blob"}).then((function(e){let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=a,t.click()}))}},injections:{_chunks:{},get chunksFuncs(){return new Promise((async(e,a)=>{for(let a=0;a<webpackChunkavukat.length;a++)for(const[t,r]of Object.entries(webpackChunkavukat[a][1]))if(r.toString().indexOf("./pages/dosya-sorgulama")>0){let a=[...r.toString().matchAll(/{\".*?\.\/pages\/dosya-sorgulama.*?};/gm)];a[0][0]=a[0][0].substring(0,a[0][0].length-1);try{e(JSON.parse(a[0][0]))}catch(a){e({})}}fetch(document.querySelector('head script[src*="main"]').getAttribute("src")).then((a=>{a.text().then((a=>{let t=a.indexOf('"./pages/dosya-sorgulama":'),r=a.substring(a.lastIndexOf("{",t),a.indexOf("}",t)+1);try{e(JSON.parse(r))}catch(a){e({})}}))}))}))},get chunks(){return new Promise((async(e,a)=>{Object.keys(UYAP_EXT.TOOL.injections._chunks).length>0?e(UYAP_EXT.TOOL.injections._chunks):fetch(document.querySelector('head script[src*="main"]').getAttribute("src")).then((a=>{a.text().then((a=>{let t=/.=>"static\/js\/".+?({.*?})/gm.exec(a)[1].replaceAll(/,(.*?):/gm,',"$1":').replaceAll(/{(.*?):/gm,'{"$1":');for(const[e,a]of Object.entries(JSON.parse(t)))UYAP_EXT.TOOL.injections._chunks[Number(e)]=a;e(UYAP_EXT.TOOL.injections._chunks)}))}))}))},inject:{dosyaGoruntule:async()=>{let e=await UYAP_EXT.TOOL.injections.chunks,a=await UYAP_EXT.TOOL.injections.chunksFuncs;if(Array.isArray(a["./pages/dosya-sorgulama"]))for(let r=0;r<a["./pages/dosya-sorgulama"].length;r++)if(e[a["./pages/dosya-sorgulama"][r]]){let i=await fetch("/static/js/"+a["./pages/dosya-sorgulama"][r]+"."+e[a["./pages/dosya-sorgulama"][r]]+".chunk.js");if(i.ok){let e=await i.text();var t=/id:"dosya-goruntule".*?,onClick:\(\)=>{(.*?)\(.*?\)/g.exec(e);let a=document.createElement("script"),r=e;t&&(r=e.replace(t[1]+"=",t[1]+"=UYAP_EXT.TOOL.injections.dosyaGoruntule=")),a.innerHTML=r,$("body").append(a),a.remove()}}}},dosyaGoruntule:null},errors:[{errorCode:"PRTL_GNL_10001-4",error:"Doğrulama hatası.Lütfen tekrar deneyiniz. "},{errorCode:"Yapılmak istenen işlem sırasında hata oluştu.",error:"Yapılmak istenen işlem sırasında hata oluştu. "},{errorCode:"PRTL_GNL_1-1",error:"Bu dosya üzerinde ilgili işlemi yapma yetkiniz bulunmamaktadır. "},{errorCode:"PRTL_GNL_1-1",error:"Gerçekleştirdiğiniz işlemde Hata Oluştu !:avukat-fts-service null "},{errorCode:"PRTL_GNL_10001-61",error:"Eş zamanlı olarak birden fazla sorgulama yapamazsınız! "},{errorCode:"SYS_GNL_10274",error:"İlgili dosyada  vekil kaydınız bulunmamaktadır. İlgili yargı birimi tarafından vekil kaydınız yapıldıktan sonra evrak görüntüleme işlemi yapabilirsiniz. "},{errorCode:"PRTL_GNL_10000-2",error:"Birkaç defa denemenize ragmen sorun devam ediyorsa TC Kimlik ve telefon numaranız, yapılan isleme ait ekran görüntüsü ve girilen tum bilgilerin detayları ile birlikte avukat@adalet.gov.tr ye mail gonderebilirsiniz. "},{errorCode:"PRTL_GNL_100026",error:"Başka bir bilgisayarda ya da tarayıcıda oturum açıldı. "},{errorCode:"PRTL_GNL_1-1",error:"Bu birim için tanımlı safahat türü bulunamadı. "},{errorCode:"PRTL_GNL_1-1",error:"PRTL_GNL_1-2 Tarih aralığı 7-14 gün seçilmesi halinde sorgulama işlemi 120 dakikada 1 defa yapılabilmektedir. "}],imerekButtons:{buttonsContainer:function(){let e=document.createElement("div");return e.classList.add("evraklar_buttons"),e},tebligatList:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-info","btn-sm","imerek-btn"),a.setAttribute("name","openTebligatList"),a.innerHTML='<i class="fas fa-envelope-open-text"></i>',a.style.bottom="13px",a.onclick=e,a},evrakList:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-warning","btn-sm","imerek-btn"),a.innerHTML='<i class="fas fa-list"></i>',a.style.top="18px",a.onclick=e,a},notAl:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-success","btn-sm","imerek-btn"),a.innerHTML='<i class="fas fa-comment-medical" ></i>',a.onclick=e,a},notlar:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-success","btn-sm","imerek-btn","btn-info"),a.innerHTML='<i class="fas fa-clipboard-list" ></i>',a.onclick=e,a},download:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-warning","btn-sm","imerek-btn"),a.innerHTML='<i class="fas fa-download" ></i>',a.onclick=e,a},goruntule:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-info","btn-sm","imerek-btn"),a.innerHTML='<i class="fas fa-eye" ></i>',a.onclick=e,a},talep:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-warning-300","btn-sm","imerek-btn"),a.innerHTML="Talep Oluştur",a.onclick=e,a},sync:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-primary","btn-sm","imerek-btn"),a.innerHTML='<i class="fas fa-sync"></i>',a.onclick=e,a},delete:function(e){let a=document.createElement("button");return a.classList.add("btn","btn-danger","btn-sm","imerek-btn"),a.innerHTML='<i class="fas fa-trash"></i>',a.onclick=e,a}},isDateValid:function(e){return e instanceof Date&&!isNaN(e.valueOf())},taraflarUlOlustur:function(e=[]){let a=document.createElement("ul");return a.innerHTML="Taraflar Sorgulanıyor...",a.classList="taraflarList",e.length>0&&(a.innerHTML="",e.forEach((function(e,t,r){let i=document.createElement("li");i.style.cssText="list-style:none;",e.taraflar_adi.length>20&&(e.taraflar_adi=e.taraflar_adi.slice(0,20)+"..."),e.taraflar_vekil.includes(UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad)&&i.classList.add("muvekkil"),i.innerHTML=e.taraflar_rol+":"+e.taraflar_adi,a.appendChild(i)}))),a},messageToPortal:function(e){return new Promise(((a,t)=>{const r=new MessageChannel;r.port1.onmessage=({data:e})=>{r.port1.close(),a(e)},window.postMessage(e,location.protocol+"//avukatbeta.uyap.gov.tr",[r.port2])}))},hookUrlList:["/search_phrase_detayli.ajx","/avukat_dosya_sorgula_cbs_brd.ajx","/getYargitayDosyalar_brd.ajx","/avukat_durusma_sorgula_brd.ajx","/avukatIhalegunuSorgula_brd.ajx","/list_dosya_evraklar.ajx","/dosyaAyrintiBilgileri_brd.ajx","/dosya_taraf_bilgileri_brd.ajx","/yargitayDosyaAyrintiBilgileri_brd.ajx","/uyap_islem_sorgula.ajx","/avukatDanistayDosyaSorgula.ajx","/danistayDosyaAyrintiBilgileri_brd.ajx","/dosya_islem_turleri_sorgula_brd.ajx","/download_document_brd.uyap"],disableExtension:async function(){let e='\n <p style="clear:both" xmlns="http://www.w3.org/1999/html"><span style="display: block;text-align: center;font-weight: bold;">İMEREK UYAP AVUKAT YARDIMCISINI DURAKLATMAK ÜZERESİNİZ!!</span>\n<br><br>\n        &emsp;&emsp;(*)UYAP Avukat portal sayfasında herhangi bir yere sağ tıklayarak gelen menuden tekrar çalıştırabilirsiniz.\n        <br>\n        <br>\n      \n    </p>\n    </p>',a=document.createElement("div");a.innerText="Duraklat",a.className="btn btn-outline-danger-300 btn-sm",a.onfunc=async function(e){return UYAP_EXT.TOOL._user.options.extensionStatus=!1,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.TOOL.messageToPortal({ask:"disableExtension"}),!1};let t=document.createElement("div");t.innerText="Vazgeç",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return document.querySelector("input[name=dialog_state]").click(),blockUILogo.hide(),!0};let r={mesaj:e,buttons:[a,t]};UYAP_EXT.DIALOG.user_dialog.show(r)},systemInformation:function(e){return e.fileNameEncoding="Mac OS"==e.os.name?"NFD":void 0,e}(UAParser()),pdfDosyaKapakHesabi:async function(e,a,t){return!0},dosyaGoruntule:async function(e,a){if(UYAP_EXT.DIALOG.blockUILogo.show("Dosya Bilgileriniz Getiriliyor","UYAP Portaldan Yanıt Bekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz"),"dosyalar"==e.dosyalar_table_name){document.querySelector('a[href="/dosya-sorgulama"]').click();let a=await UYAP_EXT.TOOL.updateDosyaId(e.dosyalar_hash);UYAP_EXT.TOOL.injections.dosyaGoruntule||(await UYAP_EXT.TOOL.injections.inject.dosyaGoruntule(),document.querySelector('a[href="/dosya-sorgulama"]').click()),UYAP_EXT.TOOL.injections.dosyaGoruntule(a.dosyalar_dosyaId_tam,a.dosyalar_dosyaNo,a.dosyalar_birimId,a.dosyalar_birimAdi,a.dosyalar_dosyaTurKod,a.dosyalar_dosyaDurumAciklama||"",a.dosyalar_dosyaDurum,a.dosyalar_dosyaDurumKod,a.dosyalar_birimTuru3)}UYAP_EXT.DIALOG.blockUILogo.hide()},getFileExtension:function(e){return new Promise(((a,t)=>{var r,i=new FileReader;i.onloadend=function(e){for(var t=new Uint8Array(e.target.result).subarray(0,4),i="",l=0;l<t.length;l++)i+=t[l].toString(16);switch(i){case"504b34":r="udf";break;case"d0cf11e0":r="xls";break;case"89504e47":r="png";break;case"47494638":r="gif";break;case"ffd8ffe2":r="jpeg";break;case"ffd8ffe0":r="jpg";break;case"49492a00":r="tif";break;case"4949002a":r="tiff";break;case"25504446":r="pdf";break;case"3c3f786d":r="xml";break}a(r?["."+r,r]:null)},i.readAsArrayBuffer(e)}))},getYargiBirimi:function(e){let a="",t=e.split(/ |\./).filter((e=>e.length>0));var r=[];for(let e=0;e<t.length;e++)t[e]>0&&r.push(e);switch(r.length){case 0:if("Yargıtay"==t[0]){a="YARGITAY DOSYALARI";break}if("Arabuluculuk"==t[0]){a="ARABULUCULUK DOSYALARI";break}for(let e=1;e<t.length;e++)a=a+t[e]+" ";if(a.indexOf("Ceza")>=0||a.indexOf("İnfaz")>=0||a.indexOf("Çocuk")>=0){a="CEZA DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR");break}if(a.indexOf("İcra Dairesi")>=0||a.indexOf("Takip")>=0){a="İCRA TAKİPLERİ",a=a.trim().toLocaleUpperCase("tr-TR");break}if(a.indexOf("İdare Mahkemesi")>=0||a.indexOf("İdari")>=0){a="İDARİ YARGI DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR");break}if(a.indexOf("Cumhuriyet Başsavcılığı")>=0){a="CBS SORUŞTURMA DOSYALARI",a=a.trim().toLocaleUpperCase("tr-TR");break}a="HUKUK DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR");break;case 1:if(r[0]>2){for(let e=1;e<r[0];e++)a=a+t[e]+" ";a=e.indexOf("Ceza")>=0||a.indexOf("İnfaz")>=0||a.indexOf("Çocuk")>=0?"CEZA DOSYALARI/"+a:"HUKUK DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR")}if(r[0]<3){if("Danıştay"==t[0]){a="DANIŞTAY DOSYALARI";break}if("Yargıtay"==t[0]){a="YARGITAY DOSYALARI";break}if(t[0]==r[0]){a="YARGITAY DOSYALARI";break}for(let e=r[0]+1;e<t.length;e++)a=a+t[e]+" ";if(a.indexOf("Ceza")>=0||a.indexOf("İnfaz")>=0||a.indexOf("Çocuk")>=0){a="CEZA DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR");break}if(a.indexOf("İcra Dairesi")>=0||a.indexOf("Takip")>=0){a="İCRA TAKİPLERİ",a=a.trim().toLocaleUpperCase("tr-TR");break}if(a.indexOf("İdare Mahkemesi")>=0||a.indexOf("İdari")>=0){a="İDARİ YARGI DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR");break}a="HUKUK DOSYALARI/"+a,a=a.trim().toLocaleUpperCase("tr-TR")}break}return a},getYargiTuru:function(e){return new Map([["0991",0],["0992",1],["1199",1],["0993",6],["9701",11],["6700",25],["danistay",2],["yargitay",3],["cbs",1],["cbsdosyalar",1],["evraklar",2],["dosyalar",1],["yargitayevraklar",3],["yargitaydosyalar",3]]).get(e)},fileIntegrityCheck:async function(e,a){if(e.getResponseHeader("content-disposition"))return{success:!0,xhr:e};if(!e.response)return{success:!1,xhr:e,reload:!1};const t=await e.response.text();return/İşlem Başarışız/gim.test(t)?{success:!1,xhr:e}:/Evrak UYAP sistemine yüklenmemiş/gim.test(t)||/Döküman saklama sistemine ulaşırken hata oluştu/gim.test(t)||/Evrak bulunamadı veya yetkiniz/gim.test(t)?{success:null,xhr:e}:/vekil kaydınız bulunmamaktadır/gim.test(t)?(await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(a,!1),{success:!0,xhr:e}):0==await UYAP_EXT.TOOL.isOnline()?{success:!1,xhr:e,reload:!0}:{success:!1,xhr:e,reload:!1}},isOnline:async()=>{let e=await UYAP_EXT.TOOL.makeRequest("/getSozlesme.ajx",JSON.stringify({}),null,null,"application/json; charset=utf-8","POST").promise;try{return JSON.parse(e.xhr.response).onay}catch(e){return!1}},makeRequest:function(e,a,t,r,i="application/x-www-form-urlencoded",l="POST",n){let o=null,s=null,d=new XMLHttpRequest,u=new Promise((async function(u,c){let m;n&&(d.assocData=n),o=u,s=c;for(let n=0;n<3&&(m=await new Promise((function(n,o){d.open(l,e,!0),d.timeout=6e4,d.setRequestHeader("Content-type",i),"application/download"==t&&(d.responseType="blob",d.timeout=0),d.onreadystatechange=function(){d.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(d.timeout=0)},d.onload=async function(){try{if(d.status<200||d.status>=300)return void n({success:!1,xhr:d})}catch(e){}n({success:!0,xhr:d})},d.onerror=function(e){d.abort()},d.ontimeout=e=>{d.abort()},d.onprogress=function(e){d.timeout=0,r&&r(e)},d.onabort=function(){n({success:!1,xhr:d})},setTimeout((()=>{d.send(a)}),UYAP_EXT.TOOL.options.requestInterval)})),0==m.success);n++)UYAP_EXT.TOOL.options.requestInterval=UYAP_EXT.TOOL.options.requestInterval<1500?UYAP_EXT.TOOL.options.requestInterval+=150:UYAP_EXT.TOOL.options.requestInterval,("/getSozlesme.ajx"==e||0==await UYAP_EXT.TOOL.isOnline())&&await UYAP_EXT.DIALOG.uyapBaglantisiKesildi(1);u(m)}));return{resolve:o,reject:s,promise:u,XHR:d}},toPromode:async function(){let e={dosyalar:async function(e,a){await UYAP_EXT.DB.connection.mergeUsing({method:"PUT",body:{into:"dosyalar",using:"DUAL",on:[["and","dosyalar.hash"]],data:e}})},borclu_bilgileri:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"borclu_bilgileri",data:e}})},borclu_sorgulari:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"borclu_sorgulari",data:e}})},evraklar:async function(e,a){const t=4e3;for(let a=0;a<e.length;a+=t){const r=e.slice(a,a+t);document.getElementById("dialog_yuzde_son").innerHTML=a+" / "+e.length,await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"evraklar",data:r}})}},tebligatlar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"tebligatlar",data:e}})},dosya_ayrintilar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"dosya_ayrintilar",data:e}})},calisma_grubu:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"calisma_grubu",data:e}})},harcTahsilatAyrinti:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harcTahsilatAyrinti",data:e}})},harcTahsilatToplam:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harcTahsilatToplam",data:e}})},harici_tebligatlar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harici_tebligatlar",data:e}})},durusmalar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"durusmalar",data:e.map((e=>(e.izinliHakimList=e.izinliHakimList?JSON.stringify(e.izinliHakimList):e.izinliHakimList,e)))}})},ihaleler:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"ihaleler",data:e}})},notlar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"notlar",data:e}})},muhasebe:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"muhasebe",data:e}})},takvim_olaylar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"takvim_olaylar",data:e}})},taraflar:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"taraflar",data:e.map((e=>(e.vekil=e.vekil?JSON.stringify(e.vekil):e.vekil,e.adres=e.adres?JSON.stringify(e.adres):e.adres,e)))}})},yedekler:async function(e,a){await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"yedekler",data:e}})}};if((await indexedDB.databases()).find((e=>e.name==UYAP_EXT.GENEL.kimlikBilgileri.avukatId.toString()))){if(UYAP_EXT.DIALOG.blockUILogo.show("Kurumsal Veritabanınız Hazırlanıyor","Veritabanları Eşitleniyor","","body",!1,!0),await UYAP_EXT.DB.connectionJsStore.initDb(UYAP_EXT.DB.db),200==(await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/deleteEveryThing",request:{method:"PUT",body:JSON.stringify({})}})).status){if(200==(await UYAP_EXT.TOOL.messageToPortal({ask:"connectH2"})).status){let a=["calisma_grubu","dosyalar","evraklar","durusmalar","dosya_ayrintilar","borclu_bilgileri","borclu_sorgulari","harcTahsilatAyrinti","harcTahsilatToplam","harici_tebligatlar","ihaleler","muhasebe","notlar","takvim_olaylar","taraflar","tebligatlar","yedekler"];for(let t=0;t<a.length;t++){document.getElementById("dialog_yuzde_son").innerHTML=t+1+" / "+a.length;let r=await UYAP_EXT.DB.connectionJsStore.select({from:a[t]});await e[a[t]](r,a[t])}indexedDB.deleteDatabase(UYAP_EXT.GENEL.kimlikBilgileri.avukatId.toString()),UYAP_EXT.TOOL._user.options.arsiv.arsivFolder="UYAP DOSYALAR"==UYAP_EXT.TOOL._user.options.arsiv.arsivFolder?"UYAP DOSYALAR":UYAP_EXT.TOOL._user.options.arsiv.arsivFolder+"/UYAP DOSYALAR"}}}return UYAP_EXT.TOOL._user.options.autoPDF=!0,UYAP_EXT.TOOL.user.promode.activated=!0,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.DIALOG.blockUILogo.hide(),window.location.reload(),!0},tasksInterrupts:{mainqueue:{},showTebligatToasters:async function(){let e=Object.keys(UYAP_EXT.TOOL._user.interrupts.showToastrs);for(let a=0;a<e.length;a++){let t=Object.values(UYAP_EXT.TOOL._user.interrupts.showToastrs[e[a]]);for(;void 0!==(_dosyatoinsert=t.shift());)UYAP_EXT.DB.tebligatCheck.toastr.show(_dosyatoinsert)}},default:function(){let e=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let a=0;a<e.length;a++)Array.isArray(e[a])?e[a]=[]:e[a].reject();let a=null,t=null,r=!0,i=new Promise((async function(e,r){a=e,t=r,UYAP_EXT.DIALOG.toastr.downCenter.hide({value:"veritabanihazirlaniyor"}),await UYAP_EXT.TOOL.tasksInterrupts.showTebligatToasters(),UYAP_EXT.DIALOG.toastr.upLeft.isShown&&UYAP_EXT.TOOL.tasksRequests.toastr.ready(),e(!0)})).catch((()=>{r=!1})).finally((()=>{delete UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts}));return UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts={resolve:a,reject:t,promise:i},UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts}},pdf:{readPDF:function(e,a){let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return UYAP_EXT.DB.queue.pdf[t]=new Promise((async(t,r)=>{let i=new FileReader;try{i.readAsArrayBuffer(e)}catch(e){r(e)}i.onloadend=function(){var e=new Uint8Array(i.result);window.loadingTask=pdfjsLib.getDocument({data:e}),window.loadingTask.promise.then((function(i){i.getPage(1).then((function(i){let l=/^\*(\d*)\*$/;i.getTextContent().then((function(i){let n={barkodNo:0,icerik:"",eTebligat:!1},o=0;for(let e=0;e<i.items.length;e++){if("Kapalı E-Tebliğ Mazbatası"==a&&!n.teslimTarihi){if(/^(\d{2}\/\d{2}\/\d{4}) (.*)/.test(i.items[e].str)){let a=/^(\d{2}\/\d{2}\/\d{4}) (.*)/.exec(i.items[e].str);n.teslimTarihi=new Date(a[1].split("/").reverse().join("-"));continue}if(/^(\d{4}-\d{2}-\d{2}) (.*)/.test(i.items[e].str)){let a=/^(\d{4}-\d{2}-\d{2}) (.*)/.exec(i.items[e].str);n.teslimTarihi=new Date(a[1]);continue}}l.test(i.items[e].str)?n.barkodNo=parseInt(l.exec(i.items[e].str)[1]):(/^BU ZARFTA/.test(i.items[e].str)&&"Kapalı Tebligat"==a&&o++,/^İhtar/i.test(i.items[e].str)&&"Açık Tebligat"==a&&o++,1==o&&(n.icerik+=i.items[e].str),/VARDIR.$/.test(i.items[e].str)&&"Kapalı Tebligat"==a&&1==o&&(o++,n.icerik=/^BU ZARFTA (.*)VARDIR/.exec(n.icerik)),/^İADE/.test(i.items[e].str)&&"Açık Tebligat"==a&&1==o&&(o++,n.icerik=/(.*)İADE/.exec(n.icerik)),/E-TEB/.test(i.items[e].str)&&(n.eTebligat=!0))}n.barkodNo>0?t(n):PDFBarcodeJs.decodeDocument(e,{scale:{once:!0,value:3,start:3,step:.6,stop:4.8},resultOpts:{singleCodeInPage:!0,multiCodesInPage:!1,maxCodesInPage:1},patches:["x-small","small","medium"],improve:!0,noisify:!0,quagga:{inputStream:{},locator:{halfSample:!1},decoder:{readers:["code_39_reader"],multiple:!0},locate:!1}},(e=>{e.success&&parseInt(e.codes[0])>0?(n.barkodNo=parseInt(e.codes[0]),t(n)):r(!1)}))}))}))})).catch((e=>{r(e)}))}})).finally((()=>{delete UYAP_EXT.DB.queue.pdf[t]})),UYAP_EXT.DB.queue.pdf[t]}},durusma:{durusmaSorgula:async function(e,a){let t=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear(),r=a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear();return{demen:await UYAP_EXT.TOOL.makeRequest("/avukat_durusma_sorgula_brd.ajx",JSON.stringify({baslangicTarihi:t,bitisTarihi:r}),null,null,"application/json; charset=utf-8","POST").promise,google_yetkisi:await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.durusma))}},satisSorgula:async function(e,a){let t=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear(),r=a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear();return{demen:await UYAP_EXT.TOOL.makeRequest("/avukatIhalegunuSorgula_brd.ajx",JSON.stringify({baslangicTarihi:t,bitisTarihi:r}),null,null,"application/json; charset=utf-8","POST").promise,google_yetkisi:await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.satisGunu))}},takvimOlaylariniEkle:async function(){let e=!0;if(new Date-new Date(UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekTarihi)>288e5&&UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_dosyalarimi_al&&!await UYAP_EXT.GOOGLE.access_token(!0)&&(UYAP_EXT.TOOL._user.options.startUp.durusmaEkle||UYAP_EXT.TOOL._user.options.startUp.satisEkle)){if(!document.getElementById("EXT_help")){function a(e){let a=document.createElement("button");return a.classList.add("btn","btn-success","btn-sm"),a.innerHTML="Yetki Ver",a.onclick=e,a}function t(e){let a=document.createElement("button");return a.classList.add("btn","btn-info","btn-sm"),a.style.marginLeft="5px",a.innerHTML="Ayarlar",a.onclick=e,a}let r,i=$("<div>"),l=$('<table>\n<tr><td>Tespit edilen Duruşma/İhale günlerinizin GOOGLE Takviminize otomatik olarak eklenebilmesi için erişim izni vermeniz gerekmektedir<br><br>İzin verebilir veya otomatik eklemeyi iptal edebilirsiniz.</td></tr>\n<tr><td class="toastr-table-buttons" style="padding-top: 5px;text-align: end"></td></tr>\n</table>');$(l).find(".toastr-table-buttons").append(a((async()=>{r.close(),UYAP_EXT.GOOGLE.googleAuthOner()}))).append(t((async()=>{r.close(),UYAP_EXT.DIALOG.openAyarlar.default()}))),$(i).append(l),r=UYAP_EXT.DIALOG.toastr.upRight.show("error","GOOGLE TAKVİM BİLDİRİMİ",$(i)[0]),r.on("pnotify:afterClose",(e=>{UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekTarihi=(new Date).toISOString(),UYAP_EXT.TOOL._user.options.startUp.satisGelecekTarihi=(new Date).toISOString(),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}))}return!1}if(UYAP_EXT.TOOL._user.options.startUp.durusmaEkle&&new Date-new Date(UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekTarihi)>288e5){for(let n=0;n<UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekAyi;n++){let o=new Date,s=new Date;o.setMonth(o.getMonth()+n),s.setMonth(o.getMonth()+1);const d=Math.abs(s-o),u=Math.ceil(d/864e5);if(u>30&&s.setDate(s.getDate()-u+30),"boolean"==typeof(await UYAP_EXT.TOOL.durusma.durusmaSorgula(o,s)).google_yetkisi[0].value.google_yetkisi){e=!1;break}}e&&(UYAP_EXT.TOOL._user.options.startUp.durusmaGelecekTarihi=(new Date).toISOString()),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}if(e=!0,UYAP_EXT.TOOL._user.options.startUp.satisEkle&&new Date-new Date(UYAP_EXT.TOOL._user.options.startUp.satisGelecekTarihi)>288e5){for(let c=0;c<UYAP_EXT.TOOL._user.options.startUp.satisGelecekHaftasi;c++){let m=new Date;m.setDate(m.getDate()+7*c);let y=new Date(m);if(y.setDate(y.getDate()+7),"boolean"==typeof(await UYAP_EXT.TOOL.durusma.satisSorgula(m,y)).google_yetkisi[0].value.google_yetkisi){e=!1;break}}e&&(UYAP_EXT.TOOL._user.options.startUp.satisGelecekTarihi=(new Date).toISOString()),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}}},errorHandling:{reloadError:function(e){if(UYAP_EXT.TOOL.user){try{UYAP_EXT.TOOL._user.errors.locationReload.push(e)}catch(a){UYAP_EXT.TOOL._user.errors={locationReload:[e]}}UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.TOOL._user.errors.locationReload.length>8?UYAP_EXT.TOOL.messageToPortal({ask:"locationReload"}):window.location.reload()}},reloadSuccess:function(){if(UYAP_EXT.TOOL._user){try{UYAP_EXT.TOOL._user.errors.locationReload=[]}catch(e){UYAP_EXT.TOOL._user.errors={locationReload:[]}}UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}}},options:{requestInterval:200},islemlerim:{devamEdenIslemler:[],devamEdenIslemSorgula:function(){let e=new Date;e.setDate(e.getDate()-15);let a=new Date,t=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear(),r=a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear();UYAP_EXT.TOOL.makeRequest("/uyap_islem_sorgula.ajx",JSON.stringify({baslangicTarihi:t,bitisTarihi:r,tcKimlikNo:UYAP_EXT.GENEL.tcKimlikNo}),null,null,"application/json; charset=utf-8","POST").promise}},_user:null,get user(){function e(a){if(a&&"object"==typeof a)for(const t in a)a[t]&&"object"==typeof a[t]?e(a[t]):t.toLowerCase().indexOf("tarih")>=0&&(a[t]=new Date(a[t]));return a}return this._user=JSON.parse(localStorage.getItem(UYAP_EXT.GENEL.kimlikBilgileri.avukatId+"-yeni"),((e,a)=>{if("string"==typeof a&&"aciklama"!=e&&"["==a.charAt(0))try{return JSON.parse(a)}catch(e){return a}return a})),e(this._user),this._user},set user(e){let a;a="string"==typeof e?e:JSON.stringify(e),localStorage.setItem(UYAP_EXT.GENEL.kimlikBilgileri.avukatId+"-yeni",a)},cleanUp:{dosyaAktifToggle:async function(e,a){return await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",e]],data:[{is_aktif:a,gorulmemis:!a}]}}),await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.ana_dosyaId","=",e]],data:[{is_aktif:a}]}})},DosyaAyrintiToggle:async function(e,a){let t={method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",e]],data:[{is_ayrinti_aktif:a}]}};return a&&(t.body.data[0].is_aktif=a),await UYAP_EXT.DB.connection.update(t)},DosyaTarafToggle:async function(e,a){let t={method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",e]],data:[{is_taraf_aktif:a}]}};return a&&(t.body.data[0].is_aktif=a),await UYAP_EXT.DB.connection.update(t)},DosyaTahsilatToggle:async function(e,a){let t={method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",e]],data:[{is_tahsilat_aktif:a}]}};return a&&(t.body.data[0].is_aktif=a),await UYAP_EXT.DB.connection.update(t)},DosyaEvrakToggle:async function(e,a){let t={method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",e]],data:[{is_evrak_aktif:a}]}};return a&&(t.body.data[0].is_aktif=a),await UYAP_EXT.DB.connection.update(t)}},startUpInitialize:async function(){if(await UYAP_EXT.TOOL.injections.inject.dosyaGoruntule(),xhook.after((function(e,a){if(e.url){let t=UYAP_EXT.TOOL.hookUrlList.find((a=>e.url.indexOf(a)>=0));if(t){let r=t.match(/(?!.*\/).+(?=\.)/);r&&UYAP_EXT.DB[r[0]](e,a)}}})),UYAP_EXT.TOOL.user.help.takip.menu.count,"Chrome"!=UYAP_EXT.TOOL.systemInformation.browser.name&&UYAP_EXT.TOOL._user.help.isNotChromeUyar<3){let e=`<p>İnternet tarayıcısı olarak <strong>${UYAP_EXT.TOOL.systemInformation.browser.name.toString()}</strong> kullanmaktasınız. \n<br>\n<br>\nYedekleme, Takvim entegrasyonu vb. gibi özellikleri kullanabilmeniz için <strong><u>Google Chrome</u></strong> kullanmalısınız.\n                          <br>\n                          <br>\n                          (*)UYAP AVUKAT PORTAL da internet tarayıcısı olarak <strong><u>Google Chrome</u></strong> kullanmanızı tavsiye etmektedir.\n                          <br>\n                          <br>\n                          </p>`,a=document.createElement("div");a.innerText="Anladım",a.className="btn btn-outline-success-300 btn-sm",a.onfunc=async function(e){return UYAP_EXT.TOOL._user.help.isNotChromeUyar++,UYAP_EXT.DIALOG.user_dialog.hide(),!0};let t={mesaj:e,buttons:[a]};await UYAP_EXT.DIALOG.user_dialog.show(t)}return UYAP_EXT.DB._cSa().then((e=>{UYAP_EXT.TOOL.messageToPortal({ask:"_cSa",params:{_cSa:e||0}})})),DataTable.ext.errMode="none",pdfjsLib.GlobalWorkerOptions.workerSrc="chrome-extension://hlgcdafdokigonljodongahofoeaedjk/lib/pdfjs/pdf.worker.min.mjs",UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.TOOL.tasksInterrupts.default().promise.then((e=>{UYAP_EXT.MENU.badgeOlustur(),UYAP_EXT.TOOL.islemlerim.devamEdenIslemSorgula(),UYAP_EXT.TOOL.durusma.takvimOlaylariniEkle(),UYAP_EXT.TOOL.tasksRequests.sorgulaTaraflar().promise.then((e=>{UYAP_EXT.TOOL.tasksRequests.sorgulaTebligatlar()}))})),UYAP_EXT.TOOL.errorHandling.reloadSuccess(),!0},fileDownload:function(e,a,t,r,i,l=!0,n=!1){let o,s,d,u=!0,c=new Promise((async function(r,c){s=c,o=r;for(let o=0;o<3;o++){var m=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.evrakId","=",e||0],["AND","evraklar.birimEvrakNo","=",a||0],["AND","evraklar.ana_dosyaId","=",t]],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],limit:1}});if(!i&&m[0])if(m[0].evraklar_anaEvrakId>0){let e=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.evrakId","=",m[0].evraklar_anaEvrakId],["AND","evraklar.ana_dosyaId","=",m[0].dosyalar_hash]],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],limit:1}});i=m[0].dosyalar_birimAdi+" "+(m[0].dosyalar_dosyaNo?m[0].dosyalar_dosyaNo.replaceAll("/","-"):m[0].dosyalar_esasNo?m[0].dosyalar_esasNo.replaceAll("/","-"):"")+" "+e[0].evraklar_tur.replaceAll("/","-")+" EKİ ( "+e[0].evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR")+" )"}else i=m[0].dosyalar_birimAdi+" "+(m[0].dosyalar_dosyaNo?m[0].dosyalar_dosyaNo.replaceAll("/","-"):m[0].dosyalar_esasNo?m[0].dosyalar_esasNo.replaceAll("/","-"):"")+" "+m[0].evraklar_tur.replaceAll("/","-")+"( "+m[0].evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR")+" )";let s;if(!u){r(!1);break}d=UYAP_EXT.TOOL.makeRequest("/download_document_brd.uyap?evrakId="+e+"&dosyaId="+encodeURIComponent(m.length>0?m[0].dosyalar_dosyaId_tam:dosyaId),null,"application/download",(function(e){document.getElementById("dialog_yuzde_son")&&(document.getElementById("dialog_yuzde_son").innerHTML=" ( "+(e.loaded/1048576).toFixed(2)+"MB )")}),"application/octet-stream","GET",{evrakId:e,birimEvrakNo:a,hash:t,filename:i});let c=await d.promise;if(0==c.success)continue;let y=await UYAP_EXT.TOOL.fileIntegrityCheck(c.xhr,m.length>0?m[0].dosyalar_hash:t),_=window.URL.createObjectURL(c.xhr.response);try{null===y.success?s=[".txt","txt"]:(s=y.xhr.getResponseHeader("content-disposition").match(/\.(.*)$/),i+=s[0])}catch(e){s=await UYAP_EXT.TOOL.getFileExtension(y.xhr.response),i=s?i+s[0]:i}if(s){{let a;if(l){if(a=await UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:_,filename:i.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,""),evraklar_id:e}}),a.downloadedFile.ext=s,"udf"==a.downloadedFile.ext[1]&&0!=UYAP_EXT.TOOL._user.options.autoPDF&&UYAP_EXT.TOOL.user.options.promode){await UYAP_EXT.TOOL.UDF.toPDF.convert(c.xhr.response,a.downloadedFile.filename.current.replace(new RegExp(".udf$"),".pdf"))}if(0){let e='\n <p style="clear:both" xmlns="http://www.w3.org/1999/html"><span style="display: block;text-align: center;font-weight: bold;">EVRAK İSİMLENDİRME HATASI!</span>\n<br>\nBu hata, başka bir indirme yöneticisi uzantının yüklü olmasından kaynaklanmaktadır.<br> İstanbul Barosunun evrak indirme uzantısı gibi indirme yöneticisi uzantı varsa devre dışı bırakmanız sorunu çözecektir.\n<br>\n      \n    </p>\n    </p>',a=document.createElement("div");a.innerText="Tamam",a.className="btn btn-outline-success-300 btn-sm",a.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let t={mesaj:e,buttons:[a]};await UYAP_EXT.DIALOG.user_dialog.show(t);break}}r({downloadedFile:a||null,XHR:d.XHR,ext:s,filename:i})}break}{let e=await UYAP_EXT.TOOL.updateDosyaId(m.length>0?m[0].dosyalar_hash:dosyaId);if(n&&2==o){r({newDosyaId_tam:e.dosyalar_dosyaId_tam});break}}}r(!1)})).catch((e=>{d.reject(),u=!1}));return l&&UYAP_EXT.DIALOG.blockUILogo.show("Evrak İndiriliyor","Lütfen İşlem Bitene Kadar Bekleyiniz","","body",!1,!0,(e=>{e.target.innerText="SON EVRAKIN İNDİRİLMESİ BEKLENİYOR...",UYAP_EXT.DIALOG.blockUILogo.hide(),s()})),{resolve:o,reject:s,promise:c}},fileGoruntule:async function(e,a,t,r){UYAP_EXT.DIALOG.blockUILogo.show("Evrak Önizlemesi Hazırlanıyor","Lütfen İşlem Bitene Kadar Bekleyiniz","");let i=await UYAP_EXT.TOOL.fileDownload(e,a,t,null,null,!1).promise;switch(i.ext[1]){case"pdf":let a=document.createElement("button");a.addEventListener("lgAfterClose",(()=>{t.destroy()}));const t=lightGallery(a,{dynamic:!0,download:!1,counter:!1,actualSize:!1,dynamicEl:[{iframe:!0,src:window.URL.createObjectURL(new Blob([i.XHR.response],{type:"application/pdf"}))}]});UYAP_EXT.DIALOG.blockUILogo.hide(),t.openGallery(0);break;case"udf":try{let e=await UYAP_EXT.TOOL.UDF.toPDF.convert(i.XHR.response),a=document.createElement("button");a.addEventListener("lgAfterClose",(()=>{t.destroy()}));const t=lightGallery(a,{dynamic:!0,download:!1,counter:!1,actualSize:!1,dynamicEl:[{iframe:!0,src:"http://localhost:9935/"+e.body.path.replace(/^.*[\\/]/,"")}]});UYAP_EXT.DIALOG.blockUILogo.hide(),t.openGallery(0)}catch(e){}break;case"tif":i.XHR.response.arrayBuffer().then((e=>{let a=[];var t=UTIF.decode(e);for(let T=0;T<t.length;T++){var r=t,i=0,l=r[T];t[T].subIFD&&(r=r.concat(t[T].subIFD));for(var n=0;n<r.length;n++){var o=r[n];if(!(null==o.t258||o.t258.length<3)){var s=o.t256*o.t257;s>i&&(i=s,l=o)}}UTIF.decodeImage(e,l,t);var d=UTIF.toRGBA8(l),u=l.width,c=l.height,m=document.createElement("canvas");m.width=u,m.height=c;var y=m.getContext("2d"),_=new ImageData(new Uint8ClampedArray(d.buffer),u,c);y.putImageData(_,0,0);let h=m.toDataURL();a.push({src:h,thumb:h})}let T=document.createElement("button");T.addEventListener("lgAfterClose",(()=>{h.destroy()}));const h=lightGallery(T,{dynamic:!0,plugins:[lgZoom,lgThumbnail,lgRotate,lgFullscreen],showZoomInOutIcons:!0,actualSize:!1,thumbnail:!0,dynamicEl:a});h.openGallery(0),UYAP_EXT.DIALOG.blockUILogo.hide()}));break;case"jpg":let r=document.createElement("button");r.addEventListener("lgAfterClose",(()=>{l.destroy()}));const l=lightGallery(r,{dynamic:!0,plugins:[lgZoom,lgThumbnail,lgRotate,lgFullscreen],showZoomInOutIcons:!0,actualSize:!1,thumbnail:!1,dynamicEl:[{src:window.URL.createObjectURL(new Blob([i.XHR.response],{type:"image/jpeg"}))}]});UYAP_EXT.DIALOG.blockUILogo.hide(),l.openGallery(0);break;case"jpeg":let n=document.createElement("button");n.addEventListener("lgAfterClose",(()=>{o.destroy()}));const o=lightGallery(n,{dynamic:!0,plugins:[lgZoom,lgThumbnail,lgRotate,lgFullscreen],showZoomInOutIcons:!0,actualSize:!1,thumbnail:!1,dynamicEl:[{src:window.URL.createObjectURL(new Blob([i.XHR.response],{type:"image/jpeg"}))}]});UYAP_EXT.DIALOG.blockUILogo.hide(),o.openGallery(0);break;case"html":let s=document.createElement("button");s.addEventListener("lgAfterClose",(()=>{d.destroy()}));const d=lightGallery(s,{dynamic:!0,download:!0,counter:!1,actualSize:!1,dynamicEl:[{iframe:!0,src:window.URL.createObjectURL(new Blob([i.XHR.response],{type:"text/html"}))}]});UYAP_EXT.DIALOG.blockUILogo.hide(),d.openGallery(0);break;case"png":let u=document.createElement("button");u.addEventListener("lgAfterClose",(()=>{c.destroy()}));const c=lightGallery(u,{dynamic:!0,plugins:[lgZoom,lgThumbnail,lgRotate,lgFullscreen],showZoomInOutIcons:!0,actualSize:!1,thumbnail:!1,dynamicEl:[{src:window.URL.createObjectURL(new Blob([i.XHR.response],{type:"image/png"}))}]});UYAP_EXT.DIALOG.blockUILogo.hide(),c.openGallery(0);break;default:UYAP_EXT.DIALOG.blockUILogo.hide();let m=`<p><strong>${i.ext[1].toUpperCase()} evraklarının önizleme çalışmaları devam etmektedir.</strong><br>\n</p>\n`,y=document.createElement("div");y.innerText="İndir",y.className="btn btn-outline-success-300 btn-sm",y.onfunc=async function(a){UYAP_EXT.DIALOG.user_dialog.hide(),_data=await UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:window.URL.createObjectURL(new Blob([i.XHR.response],{type:"application/*"})),filename:i.filename.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,""),evraklar_id:e}})};let _=document.createElement("div");_.innerText="Kapat",_.className="btn btn-outline-danger-300 btn-sm",_.onfunc=function(e){UYAP_EXT.DIALOG.user_dialog.hide()};let T={mesaj:m,buttons:[_,y]};await UYAP_EXT.DIALOG.user_dialog.show(T);break}},dosyaBildirimTemizle:async()=>{UYAP_EXT.DIALOG.blockUILogo.show("Bildirimler Temizleniyor","Dosya Bildirimleri","Lütfen İşlem Bitene Kadar Bekleyiniz");let e=document.querySelectorAll("[name=menu_item_dosya_bildirimleri_temizle] ul input:checked");for(let a=0;a<e.length;a++){let t;"dosyalar"==e[a].name&&(t=[["AND","dosyalar.birimTuru3","=",e[a].value.toString()],["AND","dosyalar.table_name","=","dosyalar"]]),"yargitay"==e[a].name&&(t=[["AND","dosyalar.table_name","=","yargitaydosyalar"]]),"danistay"==e[a].name&&(t=[["AND","dosyalar.table_name","=","danistaydosyalar"]]),"cbs"==e[a].name&&(t=[["AND","dosyalar.table_name","=","cbsdosyalar"]]),await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:t,data:[{gorulmemis:!1}]}})}document.querySelector("#hamburger .nav-back").click(),UYAP_EXT.MENU.badgeOlustur("dosyalar"),UYAP_EXT.DIALOG.blockUILogo.hide()},evrakBildirimTemizle:async()=>{UYAP_EXT.DIALOG.blockUILogo.show("Bildirimler Temizleniyor","Evrak Bildirimleri","Lütfen İşlem Bitene Kadar Bekleyiniz");let e=document.querySelectorAll("[name=menu_item_evrak_bildirimleri_temizle] ul input:checked");for(let a=0;a<e.length;a++){let t={from:"dosyalar",fields:["dosyalar.hash"]};"dosyalar"==e[a].name&&(t.where=[["AND","dosyalar.birimTuru3","=",e[a].value.toString()],["AND","dosyalar.table_name","=","dosyalar"]]),"yargitay"==e[a].name&&(t.where=[["AND","dosyalar.table_name","=","yargitaydosyalar"]]),"danistay"==e[a].name&&(t.where=[["AND","dosyalar.table_name","=","danistaydosyalar"]]),"cbs"==e[a].name&&(t.where=[["AND","dosyalar.table_name","=","cbsdosyalar"]]);let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t});await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.ana_dosyaId","in",Array.from(r,(e=>e.dosyalar_hash))]],data:[{gorulmemis:!1}]}})}document.querySelector("#hamburger .nav-back").click(),UYAP_EXT.MENU.badgeOlustur("evraklar"),UYAP_EXT.DIALOG.blockUILogo.hide()},updateDosyaId:async function(e,a){let t=Math.floor(4503599627370496*(1+Math.random())).toString(16).substring(1)+"-qxcft",r=await UYAP_EXT.TOOL.findDosya(a,e),i=null;if(r){switch(await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",r.dosyalar_hash]],data:[{dosyaId_tam:t}]}}),r.dosyalar_table_name){case"yargitaydosyalar":await UYAP_EXT.TOOL.makeRequest("/getYargitayDosyalar_brd.ajx",JSON.stringify({yargitayDairesi:r.dosyalar_birimId}),null,null,"application/json; charset=utf-8","POST",r).promise;break;case"danistaydosyalar":await UYAP_EXT.TOOL.makeRequest("/avukatDanistayDosyaSorgula.ajx",JSON.stringify({danistayDairesi:r.dosyalar_birimId}),null,null,"application/json; charset=utf-8","POST",r).promise;break;case"cbsdosyalar":await UYAP_EXT.TOOL.makeRequest("/avukat_dosya_sorgula_cbs_brd.ajx",JSON.stringify({birimId:"",birimTuru2:r.dosyalar_birimId,birimTuru3:"3",dosyaDurumKod:0,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST",r).promise,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),await UYAP_EXT.TOOL.makeRequest("/avukat_dosya_sorgula_cbs_brd.ajx",JSON.stringify({birimId:"",birimTuru2:r.dosyalar_birimId,birimTuru3:"3",dosyaDurumKod:1,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST",r).promise;break;default:await UYAP_EXT.TOOL.makeRequest("/search_phrase_detayli.ajx",JSON.stringify({birimTuru3:UYAP_EXT.TOOL.getYargiTuru(r.dosyalar_birimTuru3).toString(),birimTuru2:r.dosyalar_birimTuru2,dosyaDurumKod:1,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST",r).promise,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),await UYAP_EXT.TOOL.makeRequest("/search_phrase_detayli.ajx",JSON.stringify({birimTuru3:UYAP_EXT.TOOL.getYargiTuru(r.dosyalar_birimTuru3).toString(),birimTuru2:r.dosyalar_birimTuru2,dosyaDurumKod:0,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST",r).promise;break}await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),i=await UYAP_EXT.TOOL.findDosya(null,r.dosyalar_hash),i.dosyalar_dosyaId_tam==t?await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!1):await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!0)}else await UYAP_EXT.TOOL.tasksRequests.dosyalariEsitle();return i},uniqueArray:function(e,a){let t=[];for(let r=0;r<e.length;r++){let i=!1;for(let t=r+1;t<e.length;t++)if(e[r][a]===e[t][a]){i=!0;break}i||t.push(e[r])}return t},isObjectIdentical:function(e,a){const t=Object.keys,r=typeof e;return e&&a&&"object"===r&&r===typeof a?t(e).length===t(a).length&&t(e).every((t=>UYAP_EXT.TOOL.isObjectIdentical(e[t],a[t]))):e===a},tasksRequests:{mainqueue:{sira:[]},tarafqueue:{sira:[]},toastr:{working:function(){UYAP_EXT.DIALOG.toastr.upLeft.isShown=!0,UYAP_EXT.DIALOG.toastr.upLeft.show("notice","VERİTABANI HAZIRLANIYOR",$('<div>Kısa bir süre için;<ul><li>Yeni Dosya Kontrolü</li><li>Yeni Evrak Kontrolü</li><li>Tebligat Kontrolü</li><li>Yerel Arşiv Eşitleme</li><li>Veritabanı Temizliği</li></ul>Fonksiyonları sağlıklı sonuç vermez.<br><br>UYAP Avukat portalını ve diğer özellikleri<br>kullanmaya DEVAM EDEBİLİRSİNİZ!<br><br><span style="float: right" id="toastrYuzde"></span><br></div>')[0])},ready:function(){UYAP_EXT.DIALOG.toastr.upLeft.stack.close(),UYAP_EXT.DIALOG.toastr.upLeft.show("success","VERİTABANI HAZIR","Veritabanı hazırlama işlemi bitti. Uygulamayı kullanmaya devam edebilirsiniz")}},sycnArchivefiles:{sortToDownload:async function(e){let a=new Map;for(let t=0;t<e.length;t++)if(a.has(e[t].dosyalar_hash))if(0==e[t].evraklar_anaEvrakId)a.get(e[t].dosyalar_hash).has(e[t].evraklar_evraklar_id)?a.get(e[t].dosyalar_hash).get(e[t].evraklar_evraklar_id).evrak=e[t]:a.get(e[t].dosyalar_hash).set(e[t].evraklar_evraklar_id,{evrak:e[t],ekler:[]});else{let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.ana_dosyaId","=",e[t].dosyalar_hash],["AND","evraklar.anaEvrakId","=",0],["AND","evraklar.evrakId","=",e[t].evraklar_anaEvrakId]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]}});a.get(e[t].dosyalar_hash).has(r[0].evraklar_evraklar_id)?a.get(e[t].dosyalar_hash).get(r[0].evraklar_evraklar_id).ekler.push(e[t]):a.get(e[t].dosyalar_hash).set(r[0].evraklar_evraklar_id,{evrak:e[t],ekler:[e[t]]})}else if(a.set(e[t].dosyalar_hash,new Map([["dosya",e[t]]])),0==e[t].evraklar_anaEvrakId)a.get(e[t].dosyalar_hash).set(e[t].evraklar_evraklar_id,{evrak:e[t],ekler:[]});else{let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.ana_dosyaId","=",e[t].dosyalar_hash],["AND","evraklar.anaEvrakId","=",0],["AND","evraklar.evrakId","=",e[t].evraklar_anaEvrakId]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]}});a.get(e[t].dosyalar_hash).set(r[0].evraklar_evraklar_id,{evrak:e[t],ekler:[e[t]]})}return Array.from(a.get(e[0].dosyalar_hash)).reverse()},timeOut:null,select:async function(){async function e(e){let a={from:"evraklar",join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[["AND","evraklar.downloadId","=",e],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.is_aktif","istrue",!0]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]],limit:1},t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:a});if(0==UYAP_EXT.TOOL._user.options.kapaliDosyalariTakipEt.active&&(t=t.filter((e=>!("Açık"!==e.dosyalar_genelDosyaDurumu&&e.dosyalar_genelDosyaDurumu||e.dosyalar_durumAdi&&"Arşivde"===e.dosyalar_durumAdi||e.dosyalar_dosyaDurumKod&&1===e.dosyalar_dosyaDurumKod)))),t.length>0){let e=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",fields:["dosyalar.hash","dosyalar.birimAdi","dosyalar.dosyaNo","dosyalar.esasNo","evraklar.evraklar_id","evraklar.evrakId","evraklar.anaEvrakId","evraklar.tur","evraklar.downloadId","evraklar.sistemeGonderildigiTarih","evraklar.birimEvrakNo","evraklar.alt_dosyaTur","evraklar.alt_dosyaNo"],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[["AND","evraklar.ana_dosyaId","=",t[0].dosyalar_hash],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.is_aktif","istrue",!0]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]}});return{todownload:await UYAP_EXT.TOOL.tasksRequests.sycnArchivefiles.sortToDownload(e),toplamEvrak:e.length}}return!1}let a=[0,3];for(let t=0;t<a.length;t++){let r=await e(a[t]);if(0!=r)return r}return!1},askToSync:async function(){if(("UYAP DOSYALAR"==UYAP_EXT.TOOL._user.options.arsiv.arsivFolder||""==UYAP_EXT.TOOL._user.options.arsiv.arsivFolder)&&UYAP_EXT.TOOL.user.options.promode){if(!await UYAP_EXT.DIALOG.arsivFolderSectir())return!1}document.getElementById("dialog_genel")||UYAP_EXT.DIALOG.blockUILogo.show("Çevrim Dışı Arşiviniz İçin Evraklarınız Düzenleniyor","İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0,(e=>{e.target.innerText="SON EVRAKIN İNDİRİLMESİ BEKLENİYOR...",UYAP_EXT.TOOL.tasksRequests.mainqueue.sycnArchivefiles.reject(),UYAP_EXT.DIALOG.blockUILogo.hide()}));let e=await UYAP_EXT.TOOL.tasksRequests.sycnArchivefiles.select();if(0==e){let a="<p><strong>Yerel Arşiviniz Güncel Durumda.</strong><br><br></p>",t=document.createElement("div");t.innerText="Tamam",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!0};let r={mesaj:a,buttons:[t]};return await UYAP_EXT.DIALOG.user_dialog.show(r),e}document.getElementById("dialog_genel")?(document.getElementById("dialog_genel").innerText=e.todownload[0][1].evrak.dosyalar_birimAdi+" "+(e.todownload[0][1].evrak.dosyalar_dosyaNo?e.todownload[0][1].evrak.dosyalar_dosyaNo:e.todownload[0][1].evrak.dosyalar_esasNo?e.todownload[0][1].evrak.dosyalar_esasNo:"")+" E. ",document.getElementById("dialog_ayrinti").innerText="Dosya İçeriği Evraklar Eşitleniyor"):UYAP_EXT.DIALOG.blockUILogo.show(e.todownload[0][1].evrak.dosyalar_birimAdi+" "+(e.todownload[0][1].evrak.dosyalar_dosyaNo?e.todownload[0][1].evrak.dosyalar_dosyaNo:e.todownload[0][1].evrak.dosyalar_esasNo?e.todownload[0][1].evrak.dosyalar_esasNo:"")+" E. ","Dosya İçeriği Evraklar Eşitleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0,(e=>{e.target.innerText="SON EVRAKIN İNDİRİLMESİ BEKLENİYOR...",UYAP_EXT.TOOL.tasksRequests.mainqueue.sycnArchivefiles.reject(),UYAP_EXT.DIALOG.blockUILogo.hide()}));let a=UYAP_EXT.TOOL.getYargiBirimi(e.todownload[0][1].evrak.dosyalar_birimAdi),t=0;e:for(let r=0;r<e.todownload.length&&UYAP_EXT.TOOL.tasksRequests.mainqueue.sycnArchivefiles;r++)if("dosya"!=e.todownload[r][0]){if(t++,document.getElementById("dialog_son").innerText=e.todownload[r][1].evrak.evraklar_tur+"....("+t.toString()+"/"+e.toplamEvrak+")",0==e.todownload[r][1].evrak.evraklar_downloadId||3==e.todownload[r][1].evrak.evraklar_downloadId){let i=UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"/"+a+"/"+e.todownload[r][1].evrak.dosyalar_birimAdi+" "+(e.todownload[r][1].evrak.dosyalar_dosyaNo?e.todownload[r][1].evrak.dosyalar_dosyaNo.replaceAll("/","-"):e.todownload[r][1].evrak.dosyalar_esasNo?e.todownload[r][1].evrak.dosyalar_esasNo.replaceAll("/","-"):e.todownload[r][1].evrak.dosyalar_hash)+"/"+t+" - "+e.todownload[r][1].evrak.evraklar_tur.replaceAll("/","_")+" ( "+new Date(e.todownload[r][1].evrak.evraklar_sistemeGonderildigiTarih).toLocaleDateString("tr-TR")+" )",l=UYAP_EXT.TOOL.fileDownload(e.todownload[r][1].evrak.evraklar_evrakId,e.todownload[r][1].evrak.evraklar_birimEvrakNo,e.todownload[r][1].evrak.dosyalar_hash,null,i.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,""),!0,!0),n=await l.promise;if(n=!n.newDosyaId_tam&&(!!n.downloadedFile&&n.downloadedFile),n)if(UYAP_EXT.TOOL.user.options.promode){let a=n.downloadedFile.filename.current.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding),t=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder+"/"+i.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"")+n.downloadedFile.ext[0];UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/moveFile",request:{method:"POST",body:JSON.stringify({src:a,dst:t,file:e.todownload[r][1].evrak})}}).then((a=>{JSON.parse(a.body);UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.evraklar_id","=",e.todownload[r][1].evrak.evraklar_evraklar_id]],data:[{downloadId:1}]}})}))}else{let a=n.downloadedFile.filename.current.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding),t=a.slice(0,a.indexOf("/"+i.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"").replaceAll("UYAP DOSYALAR","")));"UYAP DOSYALAR"!=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder&&UYAP_EXT.TOOL._user.options.arsiv.arsivFolder==t||(UYAP_EXT.TOOL._user.options.arsiv.arsivFolder=t,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user),UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.evraklar_id","=",e.todownload[r][1].evrak.evraklar_evraklar_id]],data:[{downloadId:1}]}})}else await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.evraklar_id","=",e.todownload[r][1].evrak.evraklar_evraklar_id]],data:[{downloadId:3==e.todownload[r][1].evrak.evraklar_downloadId?2:3}]}})}for(let i=0;i<e.todownload[r][1].ekler.length;i++){if(!UYAP_EXT.TOOL.tasksRequests.mainqueue.sycnArchivefiles)break e;if(t++,document.getElementById("dialog_son").innerText=e.todownload[r][1].evrak.evraklar_tur+"....("+t.toString()+"/"+e.toplamEvrak+")",0==e.todownload[r][1].ekler[i].evraklar_downloadId||3==e.todownload[r][1].ekler[i].evraklar_downloadId){let l=UYAP_EXT.GENEL.kimlikBilgileri.ad+" "+UYAP_EXT.GENEL.kimlikBilgileri.soyad+"/"+a+"/"+e.todownload[r][1].ekler[i].dosyalar_birimAdi+" "+(e.todownload[r][1].ekler[i].dosyalar_dosyaNo?e.todownload[r][1].ekler[i].dosyalar_dosyaNo.replaceAll("/","-"):e.todownload[r][1].ekler[i].dosyalar_esasNo?e.todownload[r][1].ekler[i].dosyalar_esasNo.replaceAll("/","-"):e.todownload[r][1].ekler[i].dosyalar_hash)+"/"+t+" - EK-"+(i+1).toString()+"("+e.todownload[r][1].evrak.evraklar_tur.replaceAll("/","_")+")",n=UYAP_EXT.TOOL.fileDownload(e.todownload[r][1].ekler[i].evraklar_evrakId,e.todownload[r][1].ekler[i].evraklar_birimEvrakNo,e.todownload[r][1].ekler[i].dosyalar_hash,null,l.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,""),!0,!0),o=await n.promise;if(o=!o.newDosyaId_tam&&(!!o.downloadedFile&&o.downloadedFile),o)if(UYAP_EXT.TOOL.user.options.promode){let a=o.downloadedFile.filename.current,t=UYAP_EXT.TOOL._user.options.arsiv.arsivFolder+"/"+l.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"")+o.downloadedFile.ext[0];UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/moveFile",request:{method:"POST",body:JSON.stringify({src:a,dst:t,file:e.todownload[r][1].ekler[i]})}}).then((a=>{JSON.parse(a.body);UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.evraklar_id","=",e.todownload[r][1].ekler[i].evraklar_evraklar_id]],data:[{downloadId:1}]}})}))}else UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.evraklar_id","=",e.todownload[r][1].ekler[i].evraklar_evraklar_id]],data:[{downloadId:1}]}});else await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"evraklar",where:[["AND","evraklar.evraklar_id","=",e.todownload[r][1].ekler[i].evraklar_evraklar_id]],data:[{downloadId:3==e.todownload[r][1].ekler[i].evraklar_downloadId?2:3}]}})}}}return!0},loopSync:async function(e){if(await UYAP_EXT.DIALOG.onerEvraklariEsitle(20,'Yerel arşiviniz tespit edilen evraklarınız üzerinden yapıldığı için işleme devam etmeden önce "Yeni Evrak Kontrolü" yapmanızı öneririz.'),UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return UYAP_EXT.TOOL.tasksRequests.toastr.working(),!1;let a=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let e=0;e<a.length;e++)Array.isArray(a[e])?UYAP_EXT.TOOL.tasksRequests.mainqueue.sira=[]:a[e].reject();UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.push("sycnArchivefiles");let t=null,r=null,i=!0,l=new Promise((async function(e,a){t=e,r=a;let l=!0;do{l=await UYAP_EXT.TOOL.tasksRequests.sycnArchivefiles.askToSync()}while(1==l&&i);e(!0)})).catch((()=>{i=!1})).finally((()=>{delete UYAP_EXT.TOOL.tasksRequests.mainqueue.sycnArchivefiles,UYAP_EXT.TOOL.tasksRequests.mainqueue.sira=UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.filter((function(e){return"sycnArchivefiles"!==e})),UYAP_EXT.DIALOG.blockUILogo.hide()}));UYAP_EXT.TOOL.tasksRequests.mainqueue.sycnArchivefiles={resolve:t,reject:r,promise:l}}},tarafSorgula:async function(e,a,t=!1){let r=await UYAP_EXT.TOOL.findDosya(a,e),i=r.dosyalar_table_name;if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return UYAP_EXT.TOOL._user.interrupts.sorgulaTaraf[i][e]=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",where:[["AND","dosyalar.hash","=",e],["AND","dosyalar.is_taraf_aktif","istrue",!0]]}}),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,!1;if(t){let e=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let a=0;a<e.length;a++)Array.isArray(e[a])?e[a]=[]:e[a].reject()}let l,n=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return UYAP_EXT.TOOL.tasksRequests.tarafqueue.sira.push(n),UYAP_EXT.TOOL.tasksRequests.tarafqueue.sira.length>1&&(l=UYAP_EXT.TOOL.tasksRequests.tarafqueue.sira[UYAP_EXT.TOOL.tasksRequests.tarafqueue.sira.length-2]),UYAP_EXT.TOOL.tasksRequests.tarafqueue[n]=new Promise((async function(e,a){try{l&&await UYAP_EXT.TOOL.tasksRequests.tarafqueue[l];let a=await UYAP_EXT.TOOL.makeRequest("/dosya_taraf_bilgileri_brd.ajx",JSON.stringify({dosyaId:r.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",r).promise;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.taraf)),e(a.success)}finally{delete UYAP_EXT.TOOL.tasksRequests.tarafqueue[n]}})),UYAP_EXT.TOOL.tasksRequests.tarafqueue[n]},sorgulaTaraflar:function(){let e;UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.push("sorgulaTaraflar"),UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.length>1&&(e=UYAP_EXT.TOOL.tasksRequests.mainqueue.sira[UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.length-2]);let a=null,t=null,r=!0,i=new Promise((async function(i,l){a=i,t=l,e&&await UYAP_EXT.TOOL.tasksRequests.mainqueue[e],UYAP_EXT.TOOL._user.interrupts.sorgulaTaraf.cbsdosyalar={},UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user;let n=Object.keys(UYAP_EXT.TOOL._user.interrupts.sorgulaTaraf);for(let e=0;e<n.length&&r;e++){let a=Object.keys(UYAP_EXT.TOOL._user.interrupts.sorgulaTaraf[n[e]]);for(let t=0;t<a.length&&r;t++)UYAP_EXT.DIALOG.toastr.downCenter.show({value:"yenitaraflarsorgulaniyor",text:"Dosyalarınızdaki taraf değişiklikleri sorgulanıyor ("+(a.length-t)+")\n(İşlemlerinize Devam Edebilirsiniz)"}),await new Promise(((e,r)=>{setTimeout((()=>{e()}),Math.abs(Math.floor(5e3-4800/a.length*(t+1))))})),await UYAP_EXT.TOOL.tasksRequests.tarafSorgula(UYAP_EXT.TOOL._user.interrupts.sorgulaTaraf[n[e]][a[t]].hash)}i(!0)})).catch((()=>{r=!1})).finally((()=>{UYAP_EXT.DIALOG.toastr.downCenter.hide({value:"yenitaraflarsorgulaniyor"}),delete UYAP_EXT.TOOL.tasksRequests.mainqueue.sorgulaTaraflar}));return UYAP_EXT.TOOL.tasksRequests.mainqueue.sorgulaTaraflar={resolve:a,reject:t,promise:i},{resolve:a,reject:t,promise:i}},sorgulaTebligatlar:function(){let e;UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.push("sorgulaTebligatlar"),UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.length>1&&(e=UYAP_EXT.TOOL.tasksRequests.mainqueue.sira[UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.length-2]);let a=null,t=null,r=!0,i=new Promise((async function(r,i){async function l(){if(UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et){if(new Date-new Date(UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et.tarih)>288e5){UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et.tarih=new Date(0),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user;let e={from:"evraklar",where:[["AND","tebligatlar.isLastState","=",0],["AND","tebligatlar.gorulmemis","istrue",!0],["AND","evraklar.is_aktif","istrue",!0],["AND","evraklar.anaEvrakId","=",0]],join:[["JOIN","tebligatlar",[["evraklar.evrakId","tebligatlar.evrakId"],["evraklar.ana_dosyaId","tebligatlar.dosyaId"]]]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]},a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:e});for(let e=0;e<a.length;e++)if(UYAP_EXT.DIALOG.toastr.downCenter.show({value:"gunluktebligatlarsorgulaniyor",text:"Tebligatlarınızdaki günlük değişikliklikler sorgulanıyor ("+(a.length-e)+")\n(Diğer İşlemlerinize Devam Edebilirsiniz)"}),1==a[e].tebligatlar_eTebligat||"true"==a[e].tebligatlar_eTebligat){let t=UYAP_EXT.DB.tebligatCheck.tebligatState(a[e]);t.tebligatlar_isLastState!=a[e].tebligatlar_isLastState&&UYAP_EXT.DB.tebligatCheck.toastr.show(t)}else await UYAP_EXT.DB.tebligatCheck.default([a[e]],!1,!1).promise;UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et.tarih=new Date,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}return!0}UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et={count:1,tarih:new Date},UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,l()}async function n(){if(new Date-new Date(UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et.tarih)>288e5){UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et.tarih=new Date(0),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user;let e={from:"harici_tebligatlar",where:[["AND","harici_tebligatlar.isLastState","=",0]]},a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:e});for(let e=0;e<a.length;e++)UYAP_EXT.DIALOG.toastr.downCenter.show({value:"gunluktebligatlarsorgulaniyor",text:"Harici ebligatlarınızdaki günlük değişikliklikler sorgulanıyor ("+(a.length-e)+")\n(Diğer İşlemlerinize Devam Edebilirsiniz)"}),await UYAP_EXT.DB.tebligatCheck.askPTT([a[e]],"harici_tebligatlar");UYAP_EXT.TOOL._user.help.takip.menu.menu_item_tebligat_kontrol_et.tarih=new Date,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}return!0}a=r,t=i,e&&await UYAP_EXT.TOOL.tasksRequests.mainqueue[e];let o=new Date;o.setMonth(o.getMonth()-3);let s={from:"evraklar",fields:["evraklar.*"],where:[["AND","evraklar.sistemeGonderildigiTarih",">",o],["AND","evraklar.tur","in",["Açık Tebligat","Kapalı Tebligat"]],["AND","evraklar.is_aktif","istrue",!0],["AND","evraklar.anaEvrakId","=",0],["AND","tebligatlar.created_tarihi","isnull",null]],join:[["LEFT_OUTER_JOIN","tebligatlar",[["evraklar.evrakId","tebligatlar.evrakId"],["evraklar.ana_dosyaId","tebligatlar.dosyaId"]]]],orderby:[["evraklar.sistemeGonderildigiTarih","DESC"],["evraklar.onaylandigiTarih","DESC"],["evraklar.created_tarihi","DESC"]]},d=await UYAP_EXT.DB.connection.select("",{method:"POST",body:s});for(let e=0;e<d.length;e++){UYAP_EXT.DIALOG.toastr.downCenter.show({value:"tebligatlarsorgulaniyor",text:"Yeni tespit edilen tebligatlarınız sorgulanıyor ("+(d.length-e)+")\n(İşlemlerinize Devam Edebilirsiniz)"}),await UYAP_EXT.DB.tebligatCheck.default([d[e]],!1,!1).promise;let a={from:"tebligatlar",where:[["AND","tebligatlar.eTebligat","istrue",!0],["AND","tebligatlar.gorulmemis","istrue",!0],["AND","tebligatlar.dosyaId","=",d[e].evraklar_ana_dosyaId],["AND","tebligatlar.evrakId","=",d[e].evraklar_evrakId]]},t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:a});if(t.length>0&&(1==t[0].tebligatlar_eTebligat||"true"==t[0].tebligatlar_eTebligat)){let e=UYAP_EXT.DB.tebligatCheck.tebligatState(t[0]);e.tebligatlar_isLastState!=t[0].tebligatlar_isLastState&&UYAP_EXT.DB.tebligatCheck.toastr.show(e)}}await l(),await n(),r(!0)})).catch((()=>{r=!1})).finally((()=>{UYAP_EXT.DIALOG.toastr.downCenter.hide({value:"gunluktebligatlarsorgulaniyor"}),UYAP_EXT.DIALOG.toastr.downCenter.hide({value:"tebligatlarsorgulaniyor"}),delete UYAP_EXT.TOOL.tasksRequests.mainqueue.sorgulaTebligatlar}));return UYAP_EXT.TOOL.tasksRequests.mainqueue.sorgulaTebligatlar={resolve:a,reject:t,promise:i},{resolve:a,reject:t,promise:i}},dosyalariEsitle:function(){if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return UYAP_EXT.TOOL.tasksRequests.toastr.working(),!1;let e=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let a=0;a<e.length;a++)Array.isArray(e[a])?UYAP_EXT.TOOL.tasksRequests.mainqueue.sira=[]:e[a].reject();UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.push("dosyalariEsitle");let a,t=null,r=null,i=!1,l=new Promise((async function(e,l){t=e,r=l;let n=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=acik]"),o=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=kapali]");if(n.length+o.length==0)return alert("Dosya Durumu Belirtmelisiniz."),!1;if(UYAP_EXT.DIALOG.blockUILogo.show("Yeni Dosyalarınız Bulunuyor","İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0,(e=>{e.target.innerText="İŞLEMİN İPTAL EDİLMESİ BEKLENİYOR...",e.target.disabled=!0,a.reject(),i=!0})),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),n.length>0){UYAP_EXT.MENU.isBadgeOlustur=!1;let e=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=dosyalar]");for(let t=0;t<e.length&&!i;t++)document.getElementById("dialog_ayrinti").innerHTML=e[t].nextElementSibling.innerHTML+" (Açık Dosyalar) ",a=UYAP_EXT.DB.uyapDosyaEsitle(e[t].value,!1),i=!await a.promise;let t=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=cbs]");for(let e=0;e<t.length&&!i;e++)document.getElementById("dialog_ayrinti").innerHTML=t[e].nextElementSibling.innerHTML+" (Açık Dosyalar) ",a=UYAP_EXT.DB.uyapCbsDosyaEsitle(0),i=!await a.promise;UYAP_EXT.MENU.isBadgeOlustur=!0}if(o.length>0){UYAP_EXT.MENU.isBadgeOlustur=!1;let e=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=dosyalar]");for(let t=0;t<e.length&&!i;t++)document.getElementById("dialog_ayrinti").innerHTML=e[t].nextElementSibling.innerHTML+" (Kapalı Dosyalar) ",a=UYAP_EXT.DB.uyapDosyaEsitle(e[t].value,!0),i=!await a.promise;let t=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=cbs]");for(let e=0;e<t.length&&!i;e++)document.getElementById("dialog_ayrinti").innerHTML=t[e].nextElementSibling.innerHTML+" (Kapalı Dosyalar) ",a=UYAP_EXT.DB.uyapCbsDosyaEsitle(1),i=!await a.promise;UYAP_EXT.MENU.isBadgeOlustur=!0}let s=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=danistay]");for(let e=0;e<s.length&&!i;e++)UYAP_EXT.MENU.isBadgeOlustur=!1,document.getElementById("dialog_ayrinti").innerHTML=s[e].nextElementSibling.innerHTML,a=UYAP_EXT.DB.uyapDanistayDosyaEsitle(),i=!await a.promise;UYAP_EXT.MENU.isBadgeOlustur=!0;let d=document.querySelectorAll("[name=menu_item_yeni_dosya_kontrolu_yap] ul input:checked[name=yargitay]");for(let e=0;e<d.length&&!i;e++)UYAP_EXT.MENU.isBadgeOlustur=!1,document.getElementById("dialog_ayrinti").innerHTML=d[e].nextElementSibling.innerHTML,a=UYAP_EXT.DB.uyapYargitayDosyaEsitle(),i=!await a.promise;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),UYAP_EXT.DB.queue.dosya={},UYAP_EXT.MENU.isBadgeOlustur=!0,UYAP_EXT.DIALOG.blockUILogo.hide(),UYAP_EXT.MENU.badgeOlustur("dosyalar"),document.querySelector("#hamburger .nav-back").click(),e(!0)})).catch((()=>{i=!0})).finally((()=>{delete UYAP_EXT.TOOL.tasksRequests.mainqueue.dosyalariEsitle}));return UYAP_EXT.TOOL.tasksRequests.mainqueue.dosyalariEsitle={resolve:t,reject:r,promise:l},UYAP_EXT.TOOL.tasksRequests.mainqueue.dosyalariEsitle},evraklariEsitle:{sorgulanacak_dosyalar:{all:[],current:0},esitle:function(){if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return UYAP_EXT.TOOL.tasksRequests.toastr.working(),!1;let e=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let a=0;a<e.length;a++)Array.isArray(e[a])?UYAP_EXT.TOOL.tasksRequests.mainqueue.sira=[]:e[a].reject();UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.push("evraklariEsitle");let a,t=null,r=null,i=!1,l=!0,n=new Promise((async function(e,n){t=e,r=n,i=!1,UYAP_EXT.DIALOG.blockUILogo.show("Yeni Evraklarınız Bulunuyor","İşlem Uzun Sürebilir","İşlemi ilk Defa Yapıyorsanız Bitmesi Uzun Sürebilir","body",!1,!0,(e=>{e.target.innerText="İŞLEMİN İPTAL EDİLMESİ BEKLENİYOR...",e.target.disabled=!0,a.resolve({success:!0}),i=!0,l=!1}));let o=document.querySelectorAll("[name=menu_item_yeni_evrak_kontrolu_yap] ul input:checked[name=acik]"),s=document.querySelectorAll("[name=menu_item_yeni_evrak_kontrolu_yap] ul input:checked[name=kapali]");if(o.length+s.length==0)return alert("Dosya Durumu Belirtmelisiniz."),!1;if(await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak)),UYAP_EXT.DB.queue.evrak={},l){let e=document.querySelectorAll("[name=menu_item_yeni_evrak_kontrolu_yap] ul input:checked[name=dosyalar]"),t=document.querySelector("li[name=menu_item_yeni_evrak_kontrolu_yap] ul input[name=safahatliEvraklar]");for(let r=0;r<e.length&&!i;r++){if(t.checked){document.getElementById("dialog_genel").innerHTML="Son 2 Haftanın Yeni Evrakları Bulunuyor.";let a=new Date;a.setDate(a.getDate()-14);let t=new Date;"0992"==e[r].value.toString()&&(UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.uyapSafahatliDosyalar("1",a,t)),"0991"==e[r].value.toString()&&(UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.uyapSafahatliDosyalar("0",a,t)),"6700"==e[r].value.toString()&&(UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.uyapSafahatliDosyalar("11",a,t)),"1199"==e[r].value.toString()&&(UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.uyapIcraSafahatliDosyalar(a,t))}else{let a={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.birimTuru3","=",e[r].value.toString()],["AND","dosyalar.table_name","=","dosyalar"],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.is_aktif","istrue",!0]]};o.length+s.length==1?o.length>s.length?(a.where.push(["AND","dosyalar.dosyaDurumKod","<>","1"]),document.getElementById("dialog_ayrinti").innerHTML=e[r].nextElementSibling.innerHTML+" (Açık Dosya Evrakları)"):(a.where.push(["AND","dosyalar.dosyaDurumKod","=","1"]),document.getElementById("dialog_ayrinti").innerHTML=e[r].nextElementSibling.innerHTML+" (Kapalı Dosya Evrakları)"):document.getElementById("dialog_ayrinti").innerHTML=e[r].nextElementSibling.innerHTML,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.connection.select("",{method:"POST",body:a})}UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=0;for(let e=0;e<UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length&&!i;e++){UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=e,document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length+" )",UYAP_EXT.MENU.isBadgeOlustur=!1;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak));let t=await UYAP_EXT.TOOL.findDosya(null,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all[e].dosyalar_hash),r=await UYAP_EXT.DB.uyapEvrakPageTotal(t.dosyalar_dosyaId_tam,t.dosyalar_hash);if(r.success)for(let e=r.pageTotal;e>=1;e--)a=UYAP_EXT.DB.uyapEvrakEsitle(r.dosyaId_tam,e,t),await a.promise}UYAP_EXT.MENU.isBadgeOlustur=!0}}if(l){let e=document.querySelectorAll("[name=menu_item_yeni_evrak_kontrolu_yap] ul input:checked[name=cbs]");if(e.length>0){let t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.table_name","=","cbsdosyalar"],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.is_aktif","istrue",!0]]};o.length+s.length==1?o.length>s.length?(t.where.push(["AND","dosyalar.dosyaDurumKod","<>","1"]),document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML+"( Açık Dosya Evrakları )"):(t.where.push(["AND","dosyalar.dosyaDurumKod","=","1"]),document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML+"( Kapalı Dosya Evrakları )"):document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t}),UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=0;for(let e=0;e<UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length&&!i;e++){UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=e,document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length+" )",UYAP_EXT.MENU.isBadgeOlustur=!1;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak));let t=await UYAP_EXT.TOOL.findDosya(null,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all[e].dosyalar_hash),r=await UYAP_EXT.DB.uyapEvrakPageTotal(t.dosyalar_dosyaId_tam,t.dosyalar_hash);if(r.success)for(let e=r.pageTotal;e>=1;e--)a=UYAP_EXT.DB.uyapCbsEvrakEsitle(r.dosyaId_tam,e,t),await a.promise}UYAP_EXT.MENU.isBadgeOlustur=!0}}if(l){let e=document.querySelectorAll("[name=menu_item_yeni_evrak_kontrolu_yap] ul input:checked[name=danistay]");if(e.length>0){let t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.table_name","=","danistaydosyalar"],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.is_aktif","istrue",!0]]};o.length+s.length==1?o.length>s.length?(t.where.push(["AND","dosyalar.genelDosyaDurumu","=","Açık"]),document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML+"( Açık Dosya Evrakları )"):(t.where.push(["AND","dosyalar.genelDosyaDurumu","=","Kapalı"]),document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML+"( Kapalı Dosya Evrakları )"):document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML,document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t}),UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=0;for(let e=0;e<UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length&&!i;e++){UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=e,document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length+" )",UYAP_EXT.MENU.isBadgeOlustur=!1;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak));let t=await UYAP_EXT.TOOL.findDosya(null,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all[e].dosyalar_hash),r=await UYAP_EXT.DB.uyapEvrakPageTotal(t.dosyalar_dosyaId_tam,t.dosyalar_hash);if(r.success)for(let e=r.pageTotal;e>=1;e--)a=UYAP_EXT.DB.uyapDanistayEvrakEsitle(r.dosyaId_tam,e,t),await a.promise}UYAP_EXT.MENU.isBadgeOlustur=!0}}if(l){let e=document.querySelectorAll("[name=menu_item_yeni_evrak_kontrolu_yap] ul input:checked[name=yargitay]");if(e.length>0){let t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.table_name","=","yargitaydosyalar"],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.is_aktif","istrue",!0]]};o.length+s.length==1?o.length>s.length?(t.where.push(["AND","dosyalar.kapatmaTarihi","isnull",null]),document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML+"( Açık Dosya Evrakları )"):(t.where.push(["AND","dosyalar.kapatmaTarihi","isnotnull",void 0]),document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML+"( Kapalı Dosya Evrakları )"):document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML,document.getElementById("dialog_ayrinti").innerHTML=e[0].nextElementSibling.innerHTML,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t}),UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=0;for(let e=0;e<UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length&&!i;e++){UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.current=e,document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all.length+" )",UYAP_EXT.MENU.isBadgeOlustur=!1;await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak));let t=await UYAP_EXT.TOOL.findDosya(null,UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all[e].dosyalar_hash),r=await UYAP_EXT.DB.uyapEvrakPageTotal(t.dosyalar_dosyaId_tam,t.dosyalar_hash);if(r.success)for(let e=r.pageTotal;e>=1;e--)a=UYAP_EXT.DB.uyapYargitayEvrakEsitle(r.dosyaId_tam,e,t),await a.promise}}}UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.evrak)),UYAP_EXT.DB.queue.evrak={},UYAP_EXT.MENU.isBadgeOlustur=!0,UYAP_EXT.MENU.badgeOlustur("evraklar");try{UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al.hasOwnProperty("count")?(UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al.count++,UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al.tarih=new Date):UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al={count:1,tarih:new Date}}catch(e){UYAP_EXT.TOOL._user.help.takip.menu.menu_item_yeni_evraklarimi_al={count:1,tarih:new Date}}UYAP_EXT.DIALOG.blockUILogo.hide(),e(!0)})).catch((()=>{i=!0})).finally((()=>{delete UYAP_EXT.TOOL.tasksRequests.mainqueue.evraklariEsitle}));return UYAP_EXT.TOOL.tasksRequests.mainqueue.evraklariEsitle={resolve:t,reject:r,promise:n}}},odemeleriEsitle:function(e){if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return UYAP_EXT.TOOL.tasksRequests.toastr.working(),!1;let a=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let e=0;e<a.length;e++)Array.isArray(a[e])?UYAP_EXT.TOOL.tasksRequests.mainqueue.sira=[]:a[e].reject();UYAP_EXT.TOOL.tasksRequests.mainqueue.sira.push("odemeleriEsitle");let t,r=null,i=null,l=!1,n=new Promise((async function(e,a){r=e,i=a,UYAP_EXT.DIALOG.blockUILogo.show("Ödeme Bilgileriniz Güncelleniyor","İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0,(e=>{e.target.innerText="İŞLEMİN İPTAL EDİLMESİ BEKLENİYOR...",e.target.disabled=!0,t.resolve({success:!0}),l=!0,s=!1}));let n=document.querySelectorAll("[name=menu_item_muhasebe] ul input:checked[name=acik]"),o=document.querySelectorAll("[name=menu_item_muhasebe] ul input:checked[name=kapali]");UYAP_EXT.DB.queue.tahsilat={};var s=!0;if(s){let e=document.querySelectorAll("[name=menu_item_muhasebe] ul input:checked[name=dosyalar]");for(let a=0;a<e.length&&!l;a++){let r={fields:["dosyalar.dosyaId_tam","dosyalar.dosyaTurKod"],from:"dosyalar",where:[["AND","dosyalar.birimTuru3","=",e[a].value.toString()],["AND","dosyalar.table_name","=","dosyalar"]]};n.length+o.length==1?n.length>o.length?(r.where.push(["AND","dosyalar.dosyaDurumKod","<>","1"]),document.getElementById("dialog_ayrinti").innerHTML=e[a].nextElementSibling.innerHTML+" (Açık Dosya Ödemeleri)"):(r.where.push(["AND","dosyalar.dosyaDurumKod","=","1"]),document.getElementById("dialog_ayrinti").innerHTML=e[a].nextElementSibling.innerHTML+" (Kapalı Dosya Ödemeleri)"):document.getElementById("dialog_ayrinti").innerHTML=e[a].nextElementSibling.innerHTML;const i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:r});for(let e=0;e<i.length&&!l;e++){document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+i.length+" )";await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.tahsilat));t=await UYAP_EXT.DB.uyapOdemeGuncelle(i[e].dosyalar_dosyaId_tam,i[e].dosyalar_dosyaTurKod);await t.promise;UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,await Promise.allSettled(Object.values(UYAP_EXT.TOOL.tasksRequests.tarafqueue)),t=await UYAP_EXT.TOOL.tasksRequests.tarafSorgula(i[e].dosyalar_hash,null,!1),await t.promise}}}await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.tahsilat)),UYAP_EXT.DB.queue.tahsilat={},UYAP_EXT.DIALOG.blockUILogo.hide(),e(!0)})).catch((()=>{l=!0})).finally((()=>{let e=document.createElement("li");e.setAttribute("name","menu_item_odemeleri_kontrol_et"),UYAP_EXT.MENU.MobileMenu.liDataHelp(e),delete UYAP_EXT.TOOL.tasksRequests.mainqueue.odemeleriEsitle}));return UYAP_EXT.TOOL.tasksRequests.mainqueue.odemeleriEsitle={resolve:r,reject:i,promise:n}}},findDosya:async function(e,a){let t={from:"dosyalar",fields:["dosyalar.*"],where:[],limit:1};if(a){t.where.push(["AND","dosyalar.hash","=",a]);let e=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t});if(e[0])return e[0]}if(e){t.where.push(["AND","dosyalar.dosyaId_tam","like",e.slice(0,20)+"%"]);let a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t});if(a[0])return a[0]}return null},findDurusmaDosyasi:async function(e){let a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"durusmalar",where:[["AND","durusmalar.dosyaId","=",e.slice(0,20)]]}});return dosya=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",join:[["JOIN","durusmalar",[["dosyalar.birimId","durusmalar.birimId"],["dosyalar.dosyaNo","durusmalar.dosyaNo"]]]],where:[["AND","durusmalar.dosyaNo","=",a[0].durusmalar_dosyaNo],["AND","dosyalar.birimId","=",a[0].durusmalar_birimId],["AND","durusmalar.dosyaId","=",a[0].durusmalar_dosyaId],["AND","durusmalar.kayitId","=",a[0].durusmalar_kayitId]]}}),dosya[0]},hash:{fields:["dosyaNo","birimId","dosyaTurKod","dosyaTuru","esasNo","dosyaTurAciklama","danistayDairesi"],createHashValue:function e(a,t=null){let r=[];for(let e=0;e<this.fields.length;e++)a[this.fields[e]]&&r.push(a[(t||"")+this.fields[e]]);return r.join("|")}},backup:{dump:async function(){let e,a='<textarea class="form-control" id="yedekAciklamasi" rows="2" placeholder="Yedeğiniz İçin Açıklama Girebilirsiniz..."></textarea>',t=document.createElement("div");t.innerText="Yedekle",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(a){return e=document.getElementById("yedekAciklamasi").value,UYAP_EXT.DIALOG.user_dialog.hide(),!0};let r=document.createElement("div");r.innerText="Vazgeç",r.className="btn btn-outline-danger-300 btn-sm",r.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),UYAP_EXT.DIALOG.blockUILogo.hide(),!1};let i={mesaj:a,buttons:[r,t]};if(!await UYAP_EXT.DIALOG.user_dialog.show(i))return!1;UYAP_EXT.DIALOG.blockUILogo.show("Sisteminiz Yedekleniyor","Yedekleniyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let l=await UYAP_EXT.GOOGLE.searchGfile();if("boolean"==typeof l)return UYAP_EXT.DIALOG.blockUILogo.hide(),0;for(;l.length>9;)await UYAP_EXT.GOOGLE.deleteGfile(l[0].id),l.shift();if(UYAP_EXT.TOOL.user.options.promode){UYAP_EXT.DIALOG.blockUILogo.hide(),UYAP_EXT.DIALOG.toastr.downCenter.show({value:"yedekaliniyor",text:"Yedeğiniz alınıyor\n(İşlemlerinize Devam Edebilirsiniz)"});var n={name:UYAP_EXT.GENEL.kimlikBilgileri.avukatId+".zip",mimeType:"application/zip",parents:["appDataFolder"],description:e,properties:{promode:!0}};await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/dump",request:{method:"PUT",body:JSON.stringify({localStorage:UYAP_EXT.TOOL.user,metadata:n,access_token:await UYAP_EXT.GOOGLE.access_token(!0)})}});UYAP_EXT.DIALOG.toastr.downCenter.hide({value:"yedekaliniyor"});let a="<p>Sisteminiz Başarılı Bir Şekilde Yedeklenmiştir.</p>",t=document.createElement("div");t.innerText="Tamam",t.className="btn btn-outline-success-300 btn-sm",t.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let r={mesaj:a,buttons:[t]};UYAP_EXT.DIALOG.user_dialog.show(r)}else{let a=UYAP_EXT.DB.db.tables,t={localStorage:UYAP_EXT.TOOL.user,tables:{}};for(let e=0;e<a.length;e++){let r=0!=e?100*e/a.length:0;document.getElementById("dialog_yuzde").innerHTML=" ( "+Math.round(r)+"% )";let i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:a[e].name}});t.tables[a[e].name]=i.map((t=>{for(const r of Object.keys(t))t[r.replace(a[e].name+"_","")]=t[r],delete t[r];return t}))}await UYAP_EXT.GOOGLE.UploadGfile(t,UYAP_EXT.GENEL.kimlikBilgileri.avukatId+".json",e,"application/json",{version:UYAP_EXT.DB.db.version,promode:!1},(e=>{let a=100*e.loaded/e.total;document.getElementById("dialog_ayrinti").innerHTML="Yedek Dosyası Google Drive Bulutunuza Yükleniyor",document.getElementById("dialog_yuzde").innerHTML=" ( "+Math.round(a)+"% )"}),(()=>{UYAP_EXT.DIALOG.blockUILogo.hide();let e="<p>Sisteminiz Başarılı Bir Şekilde Yedeklenmiştir.</p>",a=document.createElement("div");a.innerText="Tamam",a.className="btn btn-outline-success-300 btn-sm",a.onfunc=async function(e){return UYAP_EXT.DIALOG.user_dialog.hide(),!1};let t={mesaj:e,buttons:[a]};UYAP_EXT.DIALOG.user_dialog.show(t)}))}},restore:async function(e){UYAP_EXT.DIALOG.blockUILogo.show("Yedek Listeniz İndiriliyor","Lütfen İşlem Bitene Kadar Bekleyiniz",""),UYAP_EXT.TOOL.user.options.promode?UYAP_EXT.GOOGLE.searchGfile().then((e=>{if(UYAP_EXT.DIALOG.blockUILogo.hide(),"boolean"==typeof e)return 0;UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/yedekFiles",request:{method:"POST",body:JSON.stringify({})}}).then((a=>{let t=Array.from(e);a=JSON.parse(a.body);for(let r=0;r<a.length;r++){let i=e.findIndex((e=>e.properties.filePath==a[r].filePath));i>=0?t[i]={filePath:a[r].filePath,createdTime:a[r].created_tarihi,id:"",description:e[i].description}:t.push({filePath:a[r].filePath,createdTime:a[r].created_tarihi,id:""})}t.sort(((e,a)=>new Date(e.createdTime)-new Date(a.createdTime))),UYAP_EXT.DIALOG.myGalleryRestore=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="files_restore" class="display compact" width="100%"></table>',width:"40%",height:"75vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1}),UYAP_EXT.DIALOG.myGalleryRestore.on("open",(function(){UYAP_EXT.DIALOG.gorulmemisler=new DataTable("#files_restore",{data:t,columns:[{data:function(e,a,t,r){return`<input  type="radio"  name="restorefiles" data-id="${e.id}" data-filepath="${e.filePath?e.filePath:""}" checked data-date="${e.createdTime}" class="radio">`},title:""},{data:function(e,a,t,r){return new Date(e.createdTime).toLocaleString("tr-TR")},title:"YEDEK TARİHİ"},{data:function(e,a,t,r){return e.description},title:"AÇIKLAMA"}],responsive:!0,order:[[0,"desc"]],paging:!1,info:!1,searching:!1}),$("#files_restore tbody").on("click","tr",(function(){$(this).find("input").prop("checked",!0)}));let e=document.createElement("button");e.className="btn btn-danger btn-sm imerek-btn",e.innerText="Geri Yükle",e.onclick=async function(e){UYAP_EXT.DIALOG.myGalleryRestore.close(),UYAP_EXT.DIALOG.blockUILogo.show("Sistem Geri Yükleniyor","Yedek Dosyanız İndiriliyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let a=document.querySelector("#files_restore input[type=radio]:checked").dataset.id,t=document.querySelector("#files_restore input[type=radio]:checked").dataset.filepath,r=document.querySelector("#files_restore input[type=radio]:checked").dataset.date;UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/restore",request:{method:"POST",body:JSON.stringify({fileId:a,filePath:t,access_token:await UYAP_EXT.GOOGLE.access_token(!0)})}}).then((e=>{document.getElementById("dialog_yuzde").innerHTML=" ( %100 )",UYAP_EXT.TOOL.user=JSON.parse(e.body),UYAP_EXT.DIALOG.blockUILogo.hide(),alert("Sisteminiz "+new Date(r).toLocaleDateString("tr-TR")+" Tarihine Geri Yüklendi."),window.location.reload()})),setInterval((async()=>{let e=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/getRestoreDownloadProgress",request:{method:"GET"}});res=JSON.parse(e.body).progress,document.getElementById("dialog_yuzde").innerHTML=" ( %"+res+" )"}),1e3)};let a=document.createElement("button");a.className="btn btn-success btn-sm imerek-btn",a.innerText="Vazgeç",a.onclick=function(){UYAP_EXT.DIALOG.myGalleryRestore.close()};let r=document.createElement("div");r.style.marginTop="20px",r.style.textAlign="center",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.columnGap="8px",$(r).append(a,e),$("#files_restore").after(r)})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryRestore).promise}))})):UYAP_EXT.GOOGLE.searchGfile().then((e=>{if(UYAP_EXT.DIALOG.blockUILogo.hide(),"boolean"==typeof e)return 0;e=e.filter((e=>!!e.properties&&e.properties.version==UYAP_EXT.DB.db.version)),UYAP_EXT.DIALOG.myGalleryRestore=GLightbox({lightboxHTML:UYAP_EXT.DIALOG.modals.GlightBox.altLightboxHTML,elements:[{content:'<table id="files_restore" class="display compact" width="100%"></table>',width:"40%",height:"75vh"}],draggable:!1,closeOnOutsideClick:!1,zoomable:!1,preload:!1});var a=window.indexedDB.open(UYAP_EXT.DB.db.name);a.onsuccess=function(t){db=a.result,UYAP_EXT.DIALOG.myGalleryRestore.on("open",(function(){UYAP_EXT.DIALOG.gorulmemisler=new DataTable("#files_restore",{data:e,columns:[{data:function(e,a,t,r){return`<input  type="radio"  name="restorefiles" data-id="${e.id}" size="${e.size}" checked data-date="${e.createdTime}" class="radio">`},title:""},{data:function(e,a,t,r){return new Date(e.createdTime).toLocaleString("tr-TR")},title:"YEDEK TARİHİ"},{data:function(e,a,t,r){return e.description},title:"AÇIKLAMA"}],responsive:!0,order:[[0,"desc"]],paging:!1,info:!1,searching:!1}),$("#files_restore tbody").on("click","tr",(function(){$(this).find("input").prop("checked",!0)}));let a=document.createElement("button");a.className="btn btn-danger btn-sm imerek-btn",a.innerText="Geri Yükle",a.onclick=async function(e){UYAP_EXT.DIALOG.myGalleryRestore.close(),UYAP_EXT.DIALOG.blockUILogo.show("Sistem Geri Yükleniyor","Yedek Dosyanız İndiriliyor","Lütfen İşlem Bitene Kadar Bekleyiniz");let a=document.querySelector("#files_restore input[type=radio]:checked").dataset.id,t=document.querySelector("#files_restore input[type=radio]:checked").getAttribute("data-date"),r=parseInt(document.querySelector("#files_restore input[type=radio]:checked").getAttribute("size"));UYAP_EXT.GOOGLE.getGfile(a,(function(e){let a=0!=e.loaded?100*e.loaded/r:0;document.getElementById("dialog_ayrinti").innerText=new Date(t).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+" Tarihli Yedeğiniz Yükleniyor",document.getElementById("dialog_yuzde").innerHTML=" ( "+Math.round(a)+"% )"}),(async e=>{async function a(e){let a=Object.keys(e);for(let t=0;t<a.length;t++)if(db.objectStoreNames.contains(a[t])){await UYAP_EXT.DB.connectionJsStore.clear(a[t]);for(let r=0;r<e[a[t]].length;r++){let i=0!=r?100*r/e[a[t]].length:0;document.getElementById("dialog_yuzde").innerHTML=" ( "+Math.round(i)+"% )",Object.keys(e[a[t]][r]).map((i=>{/tarih/gi.test(i)&&(e[a[t]][r][i]=new Date(e[a[t]][r][i]))}))}try{await UYAP_EXT.DB.connection.insert({method:"PUT",body:{into:a[t],data:e[a[t]]}})}catch(e){}}}function r(e){UYAP_EXT.TOOL._user=e,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user}r(e.response.localStorage),await a(e.response.tables),UYAP_EXT.DIALOG.blockUILogo.hide(),alert("Sisteminiz "+new Date(t).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+" Tarihine Geri Yüklendi."),window.location.reload()}))};let t=document.createElement("button");t.className="btn btn-success btn-sm imerek-btn",t.innerText="Vazgeç",t.onclick=function(){UYAP_EXT.DIALOG.myGalleryRestore.close()};let r=document.createElement("div");r.style.marginTop="20px",r.style.textAlign="center",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.columnGap="8px",$(r).append(t,a),$("#files_restore").after(r)})),UYAP_EXT.DIALOG.modals.GlightBox.open(UYAP_EXT.DIALOG.myGalleryRestore).promise}}))}}},UYAP_EXT.DB={queue:{evrak:{},taraf:{},dosya:{},dosyaAyrinti:{},tebligat:{},tahsilat:{},durusma:{},satisGunu:{},kimlik:{},pdf:{},tahsilat:{},borcluBilgileri:{},borcluSorgu:{},evrakDownload:{}},updateDosyaIdRetries:{evrak:{},dosyaAyrinti:{},taraf:{},tahsilat:{},borcluBilgileri:{},borcluSorgu:{}},connection:{helper:{typeSafety:function(e,a){function t(e,t){if(typeof t!=a.columns[e].dataType){if(null===t)return null;if(void 0===t)return;if(!UYAP_EXT.TOOL.isDateValid(t)&&"date_time"==a.columns[e].dataType)return new Date(t.date.year,t.date.month-1,t.date.day,t.time.hour,t.time.minute,t.time.second,t.time.nano);if("number"==a.columns[e].dataType)return t.includes(".")?parseFloat(t):parseInt(t);if("boolean"==typeof t)return t.toString();if("string"==a.columns[e].dataType)return t.toString();if("object"==a.columns[e].dataType||"array"==a.columns[e].dataType)return JSON.parse(t)}return t}a=UYAP_EXT.DB.guncelDb.tables.find((e=>e.name==a));for(let a=0;a<e.length;a++)for(const[r,i]of Object.entries(e[a]))if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=t(r,i[e]);else e[a][r]=t(r,i);return e},where:function(e){let a={all:{},nullsuz:{}};function t(e){if(e){e.find((e=>"AND"==e[0]))||(e[0][0]="AND");for(let t=0;t<e.length;t++){let r,i=e[t][1].split(".")[1],l=e[t][1].split(".")[0],n=e[t][2],o=UYAP_EXT.DB.connection.helper.typeSafety([{[i]:e[t][3]}],l)[0][i];switch(n){case"=":r={[i]:o};break;case"istrue":r={[i]:o.toString()};break;case"isfalse":r={[i]:o.toString()};break;case"isnull":r={[i]:null};break;case"isnotnull":r={[i]:void 0};break;case"<":r={[i]:{"<":o}};break;case"<=":r={[i]:{"<=":o}};break;case">":r={[i]:{">":o}};break;case">=":r={[i]:{">=":o}};break;case"<>":r={[i]:{regex:new RegExp("^(?!"+o+"$)")}};break;case"in":r={[i]:{in:o}};break;case"like":r={[i]:{regex:new RegExp("^.*("+o.replaceAll("%","")+").*$")}};break;case"notlike":r={[i]:{regex:new RegExp("^((?!"+o.replaceAll("%","")+").)*$")}};break;default:break}if(null==o)if(a.nullu||(a.nullu={}),a.nullu[l]||(a.nullu[l]={}),0==Object.keys(a.nullu).length)a.nullu[l]=Object.assign(a.nullu[l],r);else switch(e[t][0]){case"AND":a.nullu[l]=Object.assign(a.nullu[l],r);break;case"OR":a.nullu[l].or=Object.assign(a.nullu[l].or,r);break;default:break}else if(a.nullsuz[l]||(a.nullsuz[l]={}),0==Object.keys(a.nullsuz).length)a.nullsuz[l]=Object.assign(a.nullsuz[l],r);else switch(e[t][0]){case"AND":a.nullsuz[l]=Object.assign(a.nullsuz[l],r);break;case"OR":a.nullsuz[l].or||(a.nullsuz[l].or={}),a.nullsuz[l].or=Object.assign(a.nullsuz[l].or,r);break;default:break}if(a.all[l]||(a.all[l]={}),0==Object.keys(a.all).length)a.all[l]=Object.assign(a.all[l],r);else switch(e[t][0]){case"AND":a.all[l]=Object.assign(a.all[l],r);break;case"OR":a.all[l].or||(a.all[l].or={}),a.all[l].or=Object.assign(a.all[l].or,r);break;default:break}}}else a=null;return a}return a=t(e),a},count:async function(e,a){if(e.groupBy){e.aggregate={count:e.groupBy.map((a=>a.startsWith(e.from)?a.replace(e.from+".",""):a.replace(".","_")))},a=a?await UYAP_EXT.DB.connectionJsStore.select({store:a,aggregate:e.aggregate,groupBy:e.aggregate.count}):await UYAP_EXT.DB.connectionJsStore.select(e);for(let t=0;t<a.length;t++)a[t].sayi=a[t]["count("+e.aggregate.count[0]+")"]}else a=a?[{sayi:await UYAP_EXT.DB.connectionJsStore.count({store:a})}]:[{sayi:await UYAP_EXT.DB.connectionJsStore.count(e)}];return a},join:async function(e,a,t,r){let i={};t&&(i=UYAP_EXT.DB.connection.helper.where(t),e.where=i.nullsuz[e.from]);for(let t=0;t<a.length;t++){let l={from:e.from};i.nullsuz&&(i.nullsuz[e.from]&&(l.where=i.nullsuz[e.from]));let n=t>0?r:await UYAP_EXT.DB.connectionJsStore.select(l),o={from:a[t][1]};i.nullsuz&&(i.nullsuz[a[t][1]]&&(o.where=i.nullsuz[a[t][1]]));let s=await UYAP_EXT.DB.connectionJsStore.select(o),d=a[t][0].includes("LEFT")?"left":"inner";r=n.reduce((function(r,i){let l=s.find((r=>{for(let l=0;l<a[t][2].length;l++){let n,o=a[t][2][l][0].split(".");if(n=e.from==o[0]?o[1]:o.join("_"),i[n]!=r[a[t][2][l][1].split(".")[1]])return!1}return!0}));if("left"==d){for(const e of Object.keys(UYAP_EXT.DB.guncelDb.tables.find((e=>e.name==a[t][1])).columns))i[o.from+"_"+e]=l&&null!==l[e]&&void 0!==l[e]?l[e]:null;r.push(i)}else if(l){for(const e of Object.keys(UYAP_EXT.DB.guncelDb.tables.find((e=>e.name==a[t][1])).columns))i[o.from+"_"+e]=null!==l[e]&&void 0!==l[e]?l[e]:null;r.push(i)}return r}),[])}if(i.all){let a={};for(const[t,r]of Object.entries(i.all))if(t==e.from)a=Object.assign(a,i.all[t]);else for(const[e,r]of Object.entries(i.all[t]))a[t+"_"+e]=r;r=r.reduce((function(e,t){let r=Object.keys(a),i=!0;for(let e=0;e<r.length;e++)if("object"!=typeof a[r[e]]&&void 0!==a[r[e]]){if(a[r[e]]!==t[r[e]]){i=!1;break}}else{if(void 0===a[r[e]])null===t[r[e]]&&(i=!1);else if(null===a[r[e]])a[r[e]]!==t[r[e]]&&(i=!1);else{let l=Object.keys(a[r[e]]);for(let n=0;n<l.length;n++){switch(l[n]){case"<":(a[r[e]][l[n]]<t[r[e]]||null===t[r[e]])&&(i=!1);break;case"<=":(a[r[e]][l[n]]<=t[r[e]]||null===t[r[e]])&&(i=!1);break;case">":(a[r[e]][l[n]]>t[r[e]]||null===t[r[e]])&&(i=!1);break;case">=":(a[r[e]][l[n]]>=t[r[e]]||null===t[r[e]])&&(i=!1);break;case"regex":i=new RegExp(a[r[e]][l[n]]).test(t[r[e]])&&null!==t[r[e]];break;case"in":i=!1;for(let o=0;o<a[r[e]][l[n]].length;o++)if(a[r[e]][l[n]][o]===t[r[e]]){i=!0;break}break;default:break}if(!i)break}}if(!i)break}return i&&e.push(t),e}),[])}return r},mergeOr:function(e,a){},mergeAnd:function(e,a){return e&&(e=e.filter((e=>a.some((a=>UYAP_EXT.TOOL.isObjectIdentical(e,a)))))),e},orderby:function(e,a){return a.sort(((a,t)=>{for(let r=0;r<e.body.orderby.length;r++){let i=e.body.orderby[r][0].replaceAll(".","_");if(null!==a[i]&&null!==t[i])return"DESC"==e.body.orderby[0][1]?t[i]-a[i]:a[i]-t[i];continue}}))}},select:async function(e,a){function t(e){if(e&&"object"==typeof e)for(const a in e)e[a]&&"object"==typeof e[a]?t(e[a]):a.toLowerCase().indexOf("tarih")>=0&&e[a]&&(e[a]=new Date(e[a]));return e}let r;if(UYAP_EXT.TOOL.user.options.promode)return r=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/select/",request:{method:a.method,body:JSON.stringify(a.body,((e,a)=>{if(e.toLowerCase().includes("tarih"))try{return new Date(a).toJSON()}catch(e){return a}return a}))}}),r.body=t(JSON.parse(r.body,((e,a)=>{if("string"==typeof a&&"aciklama"!=e&&"["==a.charAt(0))try{return JSON.parse(a)}catch(e){return a}return a}))),r.body;{let l=new Date;async function i(e,a,t){let r,i={};if(e.body.from&&(i.from=e.body.from),e.body.groupBy&&(i.groupBy=e.body.groupBy),e.body.limit&&(i.limit=e.body.limit),e.body.join&&(t=await UYAP_EXT.DB.connection.helper.join(i,e.body.join,a,t),e.body.distinct)){let a,r=e.body.distinct[0].split(".");a=e.body.from==r[0]?r[1]:r[1].replaceAll(".","_"),t=UYAP_EXT.TOOL.uniqueArray(t,a)}return e.body.count?(a&&(r=UYAP_EXT.DB.connection.helper.where(a),i.where=r.nullsuz[e.body.from]),t=await UYAP_EXT.DB.connection.helper.count(i,t)):(a&&(r=UYAP_EXT.DB.connection.helper.where(subsiz),i.where=r.nullsuz[e.body.from]),t=t||await UYAP_EXT.DB.connectionJsStore.select(i)),t}if(a.body.where&&0==a.body.where.length&&delete a.body.where,a.body.where){subli=a.body.where.filter((e=>"SUB"==e[0])),subsiz=a.body.where.filter((e=>"SUB"!=e[0])),r=await i(a,subsiz);for(let n=0;n<subli.length;n++)switch(subli[n][1]){case"AND":r=UYAP_EXT.DB.connection.helper.mergeAnd(r,await i(a,subli[n].slice(2)));break;case"OR":r=UYAP_EXT.DB.connection.helper.mergeOr(r,await i(a,subli[n].slice(2)));break;default:break}}else r=await i(a);if(a.body.distinct&&!a.body.join){let o,s=a.body.distinct[0].split(".");o=a.body.from==s[0]?s[1]:s[1].replaceAll(".","_"),r=UYAP_EXT.TOOL.uniqueArray(r,o)}for(let d=0;d<r.length;d++)for(const u of Object.keys(r[d])){if(a.body.join){let c=!1;for(let m=0;m<a.body.join.length;m++)if(u.startsWith(a.body.join[m][1]+"_")){c=!0;break}if(c)break}if(u.startsWith(a.body.from+"_")&&u!=a.body.from+"_id"||"sayi"==u)break;r[d][a.body.from+"_"+u]=r[d][u],delete r[d][u]}return a.body.orderby&&(r=UYAP_EXT.DB.connection.helper.orderby(a,r)),new Date-l>1e3&&UYAP_EXT.DIALOG.onerPromode(),r}},count:function(e){},update:async function(e){let a;if(UYAP_EXT.TOOL.user.options.promode)a=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/update/",request:{method:e.method,body:JSON.stringify(e.body,((e,a)=>{if(e.toLowerCase().includes("tarih"))try{return new Date(a).toJSON()}catch(e){return a}return a}))}});else{let t=UYAP_EXT.DB.guncelDb.tables.find((a=>a.name==e.body.into)),r=UYAP_EXT.DB.connection.helper.typeSafety(e.body.data,e.body.into)[0],i=UYAP_EXT.DB.connection.helper.where(e.body.where).nullsuz[e.body.into],l=await UYAP_EXT.DB.connectionJsStore.select({from:e.body.into,where:i});if(a=await UYAP_EXT.DB.connectionJsStore.update({in:e.body.into,set:r,where:i}),a>0)for(const[e,a]of Object.entries(t.foreignKeyTarget))for(let t=0;t<a.length;t++)l[0][e]!=r[e]&&r[e]&&await UYAP_EXT.DB.connectionJsStore.update({in:a[t].split(".")[0],set:{[a[t].split(".")[1]]:r[e]},where:{[a[t].split(".")[1]]:l[0][e]}})}return a},merge:async function(e){let a=[];if(UYAP_EXT.TOOL.user.options.promode)a=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/merge/",request:{method:e.method,body:JSON.stringify(e.body,((e,a)=>{if(e.toLowerCase().includes("tarih"))try{return new Date(a).toJSON()}catch(e){return a}return a}))}});else{let a=UYAP_EXT.DB.guncelDb.tables.find((a=>a.name==e.body.into)),t=UYAP_EXT.DB.connection.helper.typeSafety(e.body.data,e.body.into),r=await UYAP_EXT.DB.connectionJsStore.select({from:e.body.into});for(let i=0;i<t.length;i++){let l=r.find((e=>{for(let r=0;r<a.primaryKey.length;r++)if(e[a.primaryKey[r]]!=t[i][a.primaryKey[r]])return!1;return!0}));if(l){let r={};for(let e=0;e<a.primaryKey.length;e++)r[a.primaryKey[e]]=l[a.primaryKey[e]];if(await UYAP_EXT.DB.connectionJsStore.update({in:e.body.into,set:t[i],where:r})>0)for(const[e,r]of Object.entries(a.foreignKeyTarget))for(let a=0;a<r.length;a++){let n=r[a].split(".");t[i][e]!=l[e]&&await UYAP_EXT.DB.connectionJsStore.update({in:n[0],set:{[n[1]]:l[e]},where:{[r[a].split(".")[1]]:l[e]}})}}else await UYAP_EXT.DB.connectionJsStore.insert({into:e.body.into,validation:!1,values:[t[i]],ignore:!0})}}return a},mergeUsing:async function(e){let a=[];if(UYAP_EXT.TOOL.user.options.promode)a=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/mergeUsing/",request:{method:e.method,body:JSON.stringify(e.body,((e,a)=>{if(e.toLowerCase().includes("tarih"))try{return new Date(a).toJSON()}catch(e){return a}return a}))}});else{let a=UYAP_EXT.DB.connection.helper.typeSafety(e.body.data,e.body.into),t=await UYAP_EXT.DB.connectionJsStore.select({from:e.body.into});for(let r=0;r<a.length;r++){let i=t.find((t=>{for(let i=0;i<e.body.on.length;i++)if(t[e.body.on[i][1].split(".")[1]]!=a[r][e.body.on[i][1].split(".")[1]])return!1;return!0}));if(i){let t={};for(let a=0;a<e.body.on.length;a++)t[[e.body.on[a][1].split(".")[1]]]=i[e.body.on[a][1].split(".")[1]];if(await UYAP_EXT.DB.connectionJsStore.update({in:e.body.into,set:a[r],where:t})>0){let t=UYAP_EXT.DB.guncelDb.tables.find((a=>a.name==e.body.into));for(const[e,l]of Object.entries(t.foreignKeyTarget))for(let t=0;t<l.length;t++){let n=l[t].split(".");if(a[r][e]!=i[e]){await UYAP_EXT.DB.connectionJsStore.update({in:n[0],set:{[n[1]]:i[e]},where:{[l[t].split(".")[1]]:i[e]}})}}}}else await UYAP_EXT.DB.connectionJsStore.insert({into:e.body.into,validation:!1,values:[a[r]],ignore:!0})}}return a},delete:async function(e){let a;if(UYAP_EXT.TOOL.user.options.promode)a=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/delete/",request:{method:e.method,body:JSON.stringify(e.body,((e,a)=>{if(e.toLowerCase().includes("tarih"))try{return new Date(a).toJSON()}catch(e){return a}return a}))}});else{let t={from:e.body.from};e.body.where&&(0==e.body.where.length?e.body.where:t.where=UYAP_EXT.DB.connection.helper.where(e.body.where).all[e.body.from]),a=await UYAP_EXT.DB.connectionJsStore.remove(t)}return a},insert:async function(e){let a;if(UYAP_EXT.TOOL.user.options.promode)a=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/insert/",request:{method:e.method,body:JSON.stringify(e.body,((e,a)=>{if(e.toLowerCase().includes("tarih"))try{return new Date(a).toJSON()}catch(e){return a}return a}))}});else{let t=UYAP_EXT.DB.connection.helper.typeSafety(e.body.data,e.body.into),r=UYAP_EXT.DB.guncelDb.tables.find((a=>a.name==e.body.into));if(r.primaryKey.length>0||r.uniqueKey.length>0){let a=await UYAP_EXT.DB.connectionJsStore.select({from:e.body.into});t=t.reduce((function(e,t){return a.find((e=>{for(let a=0;a<r.primaryKey.length;a++)if(e[r.primaryKey[a]]!=t[r.primaryKey[a]])return!1;for(let a=0;a<r.uniqueKey.length;a++)if(e[r.uniqueKey[a]]!=t[r.uniqueKey[a]])return!1;return!0}))||e.push(t),e}),[])}a=await UYAP_EXT.DB.connectionJsStore.insert({into:e.body.into,validation:!1,values:t,ignore:!0})}return a},truncate:async function(e){let a;UYAP_EXT.TOOL.user.options.promode&&(a=await UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/SQL/TRUNCATE/",request:{method:e.method,body:JSON.stringify(e.body)}}))},union:function(e){}},connectionJsStore:"undefined"!=typeof JsStore?new JsStore.Connection(new Worker(URL.createObjectURL(new Blob(["("+worker_function.toString()+")()"],{type:"text/javascript"})))):null,db:{name:UYAP_EXT.GENEL.kimlikBilgileri.avukatId,version:3,tables:[{name:"borclu_bilgileri",uniqueKey:[],foreignKeyTarget:{},primaryKey:["dosyaId","kisiKurumId"],columns:{adi:{dataType:"string"},aktifMernisAdresiSorgusu:{dataType:"string"},anaAdi:{dataType:"string"},babaAdi:{dataType:"string"},borclu_bilgileri_id:{dataType:"number",notNull:!0,autoIncrement:!0},created_tarihi:{dataType:"date_time",default:new Date},dogumTarihiStr:{dataType:"date_time"},dosyaId:{dataType:"string",notNull:!0},gorulmemis:{dataType:"string",notNull:!0,default:"true"},hasOlumKaydi:{dataType:"string"},isAvukat:{dataType:"string",enableSearch:!1},isHakimSavci:{dataType:"string",enableSearch:!1},isNoter:{dataType:"string",enableSearch:!1},isTarafUyari:{dataType:"string",enableSearch:!1},is_takip_kesin:{dataType:"string",default:"false"},islemSonucu:{dataType:"string"},kisiKurumId:{dataType:"number",notNull:!0},mernisDegisiklikNedeni:{dataType:"string",enableSearch:!1},mernisDegisiklikVarmi:{dataType:"string",enableSearch:!1},olumKaydi:{dataType:"string"},sorguTuru:{dataType:"number"},soyadi:{dataType:"string"},tcKimlikNo:{dataType:"number"},turu:{dataType:"number"}}},{name:"borclu_sorgulari",uniqueKey:[],foreignKeyTarget:{},primaryKey:["dosyaId","kisiKurumId","sorgu_turu","sorgu_tarihi"],columns:{borclu_sorgulari_id:{dataType:"number",notNull:!0,enableSearch:!1,autoIncrement:!0},created_tarihi:{dataType:"date_time",default:new Date,enableSearch:!1},dosyaId:{dataType:"string",notNull:!0},kisiKurumId:{dataType:"number",notNull:!0},sorgu_sonucu:{dataType:"object"},sorgu_tarihi:{dataType:"date_time",notNull:!0,default:new Date},sorgu_turu:{dataType:"string",notNull:!0}}},{name:"calisma_grubu",uniqueKey:[],foreignKeyTarget:{},primaryKey:["username"],columns:{adi:{dataType:"string"},avukat_id:{dataType:"number"},calisma_grubu_id:{dataType:"number",notNull:!0,enableSearch:!1,autoIncrement:!0},soyadi:{dataType:"string"},username:{dataType:"string",notNull:!0,unique:!0}}},{name:"dosya_ayrintilar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["key","val","dosyaId"],columns:{created_tarihi:{dataType:"date_time",notNull:!0,default:new Date,enableSearch:!1},dosyaId:{dataType:"string",notNull:!0},dosya_ayrintilar_id:{dataType:"number",notNull:!0,autoIncrement:!0},is_aktif:{dataType:"string",default:"true"},key:{dataType:"string",notNull:!0},val:{dataType:"string",notNull:!0}}},{name:"dosyalar",uniqueKey:["hash"],foreignKeyTarget:{hash:["borclu_bilgileri.dosyaId","borclu_sorgulari.dosyaId","dosya_ayrintilar.dosyaId","evraklar.ana_dosyaId","harcTahsilatAyrinti.dosyaId","harcTahsilatToplam.dosyaId","muhasebe.dosyaId","taraflar.dosyaId","tebligatlar.dosyaId"]},primaryKey:["hash"],columns:{birimAdi:{dataType:"string"},birimId:{dataType:"number",notNull:!0},birimTuru1:{dataType:"string"},birimTuru2:{dataType:"string"},birimTuru3:{dataType:"string"},created_tarihi:{dataType:"date_time",default:new Date},danistayDairesi:{dataType:"number"},davaSucTuruAdi:{dataType:"string"},dosyaAcilisTarihi:{dataType:"date_time"},dosyaDurum:{dataType:"string"},dosyaDurumKod:{dataType:"number"},dosyaId_tam:{dataType:"string",unique:!0},dosyaKapanisTarihi:{dataType:"date_time"},dosyaNo:{dataType:"string"},dosyaTur:{dataType:"string"},dosyaTurAciklama:{dataType:"string"},dosyaTurKod:{dataType:"number"},dosyaTuru:{dataType:"number"},dosyalar_id:{dataType:"number",notNull:!0,autoIncrement:!0},durumAdi:{dataType:"string"},esasNo:{dataType:"string"},eskiAd:{dataType:"string",enableSearch:!1},eskiOrgKod:{dataType:"string",enableSearch:!1},evraginBirimDVODaGonderilecegiBirimBilgisi:{dataType:"number",enableSearch:!1},gelisTarihi:{dataType:"date_time"},genelDosyaDurumu:{dataType:"string"},gorulmemis:{dataType:"string",default:"true"},hash:{dataType:"string",notNull:!0,unique:!0},ilislikiDosyaListesi:{dataType:"string",enableSearch:!1},isDavaDosyasiAcilmisMi:{dataType:"string"},isNew:{dataType:"string"},isSorusturmaDosyasiIncelemeTalebiKabulEdilmis:{dataType:"string"},isTumunuKopyala:{dataType:"string",enableSearch:!1},is_aktif:{dataType:"string",notNull:!0,default:"true"},is_ayrinti_aktif:{dataType:"string",default:"true"},is_borclu_aktif:{dataType:"string",default:"true"},is_evrak_aktif:{dataType:"string",default:"true"},is_tahsilat_aktif:{dataType:"string",default:"true"},is_taraf_aktif:{dataType:"string",default:"true"},kapatmaTarihi:{dataType:"date_time"},kararTarihi:{dataType:"date_time"},label:{dataType:"string"},mahkemeBirimAdi:{dataType:"string"},mahkemeEsasNo:{dataType:"string"},mahkemeKararNo:{dataType:"string",enableSearch:!1},mahkemeKararTarihi:{dataType:"date_time",enableSearch:!1},orgKoduDegisti:{dataType:"string",enableSearch:!1},savcilikOncelikDilekceSonuc:{dataType:"string",enableSearch:!1},savcilikTarihi:{dataType:"date_time",enableSearch:!1},table_name:{dataType:"string"},taranmamisKaydetme:{dataType:"string",enableSearch:!1},teblignameNo:{dataType:"string",enableSearch:!1},testMi:{dataType:"number",enableSearch:!1},yeniBirimEkle:{dataType:"string",enableSearch:!1}},alter:{2:{modify:{is_borclu_aktif:{dataType:"string",default:"true"}},add:{last_evrak_tarihi:{dataType:"date_time"},last_taraf_tarihi:{dataType:"date_time"},last_ayrinti_tarihi:{dataType:"date_time"},last_tahsilat_tarihi:{dataType:"date_time"},last_borclu_tarihi:{dataType:"date_time"}}},3:{modify:{dosyaId_tam:{unique:!1}}}}},{name:"durusmalar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["kayitId","birimId"],columns:{birimId:{dataType:"number",notNull:!0},birimOrgKodu:{dataType:"string",enableSearch:!1},birimTuru1:{dataType:"string"},birimTuru2:{dataType:"string"},birimTuru3:{dataType:"string"},created_tarihi:{dataType:"date_time",default:new Date,enableSearch:!1},dosyaId:{dataType:"string",notNull:!0},dosyaNo:{dataType:"string"},dosyaTurKod:{dataType:"number"},dosyaTurKodAciklama:{dataType:"string"},durusmalar_id:{dataType:"number",notNull:!0,autoIncrement:!0},hakimHeyet:{dataType:"number",enableSearch:!1},isEDurusmaBirimTalepValid:{dataType:"string",enableSearch:!1},isEDurusmaGuncellenecek:{dataType:"string",enableSearch:!1},isEDurusmaSaatTalepValid:{dataType:"string",enableSearch:!1},islemSonucu:{dataType:"number"},islemSonucuAciklama:{dataType:"string"},islemTuru:{dataType:"number"},islemTuruAciklama:{dataType:"string"},izinliHakimList:{dataType:"array",enableSearch:!1},katilButonAktifMi:{dataType:"string",enableSearch:!1},kayitId:{dataType:"number",notNull:!0},talepDurumu:{dataType:"string",enableSearch:!1},tarihSaat:{dataType:"date_time"},token:{dataType:"string",enableSearch:!1},yerelBirimAd:{dataType:"string"}}},{name:"evraklar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["evrakId","birimEvrakNo","anaEvrakId","dosyaId","ana_dosyaId"],columns:{aciklama:{dataType:"string"},alt_dosyaNo:{dataType:"string",enableSearch:!1},alt_dosyaTur:{dataType:"string",enableSearch:!1},anaEvrakId:{dataType:"number",notNull:!0,default:0},ana_dosyaId:{dataType:"string",notNull:!0},birimEvrakNo:{dataType:"number",notNull:!0,default:0},created_tarihi:{dataType:"date_time",default:new Date},dosyaId:{dataType:"string",notNull:!0},downloadId:{dataType:"number",notNull:!0,default:0},evrakId:{dataType:"number",notNull:!0},evraklar_id:{dataType:"number",notNull:!0,autoIncrement:!0},ggEvrakId:{dataType:"number",enableSearch:!1},gonderenDosyaNo:{dataType:"string",enableSearch:!1},gonderenSayi:{dataType:"string",enableSearch:!1},gonderenYerKisi:{dataType:"string",enableSearch:!1},gorulmemis:{dataType:"string",default:"true"},isYetkili:{dataType:"string",enableSearch:!1},is_aktif:{dataType:"string",notNull:!0,default:"true"},label:{dataType:"string"},onaylandigiTarih:{dataType:"date_time"},sira:{dataType:"number"},sistemeGonderildigiTarih:{dataType:"date_time"},tip:{dataType:"string"},tur:{dataType:"string"}}},{name:"harcTahsilatAyrinti",uniqueKey:[],foreignKeyTarget:{},primaryKey:["dosyaId","harc_tahsilat_reddiyat","key_part"],columns:{birimAdi:{dataType:"string"},created_tarihi:{dataType:"date_time",default:new Date},dosyaId:{dataType:"string",notNull:!0},dosyaNo:{dataType:"string"},dosyaTurAciklama:{dataType:"string"},gelirVergisi:{dataType:"number",enableSearch:!1},harcTahsilatAyrinti_id:{dataType:"number",notNull:!0,autoIncrement:!0},harc_tahsilat_reddiyat:{dataType:"number",notNull:!0,default:0},kalanMiktar:{dataType:"number",enableSearch:!1},kayitId:{dataType:"number",enableSearch:!1},key_part:{dataType:"string",notNull:!0},makbuzNo:{dataType:"number"},miktar:{dataType:"number"},odenecekMiktar:{dataType:"number",enableSearch:!1},odeyenKisi:{dataType:"string"},reddiyatNedeni:{dataType:"string"},reddiyatTarihi:{dataType:"date_time"},tahsilHarci:{dataType:"number",enableSearch:!1},tahsilatTarihi:{dataType:"date_time"},tahsilatTuru:{dataType:"string"},tahsilatTutari:{dataType:"number",enableSearch:!1}}},{name:"harcTahsilatToplam",uniqueKey:[],foreignKeyTarget:{},primaryKey:["dosyaId"],columns:{created_tarihi:{dataType:"date_time",default:new Date},dosyaId:{dataType:"string",notNull:!0,unique:!0},harcTahsilatToplam_id:{dataType:"number",notNull:!0,autoIncrement:!0},haricen:{dataType:"number",default:0},isIcraMi:{dataType:"string"},toplamKalan:{dataType:"number",default:0},toplamTahsilHarci:{dataType:"number",default:0},toplamTahsilat:{dataType:"number",default:0},toplamTeminat:{dataType:"number",default:0},toplamreddiyat:{dataType:"number",default:0}}},{name:"harici_tebligatlar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["barkodNo"],columns:{barkodNo:{dataType:"number",notNull:!0,default:0,unique:!0},created_tarihi:{dataType:"date_time",default:new Date},durum:{dataType:"string"},eTebligat:{dataType:"string",default:"false"},evrakTarihi:{dataType:"date_time"},gorulmemis:{dataType:"string",default:"true"},harici_tebligatlar_id:{dataType:"number",notNull:!0,autoIncrement:!0},icerik:{dataType:"string"},isLastState:{dataType:"number"},lastStateTarihi:{dataType:"date_time"},muhatap:{dataType:"string"}}},{name:"ihaleler",uniqueKey:[],foreignKeyTarget:{},primaryKey:["ihaleKayitId"],columns:{created_tarihi:{dataType:"date_time",default:new Date},dosyaNo:{dataType:"string"},dosyaTuru:{dataType:"string"},eIlanDurumu:{dataType:"number"},ihaleKayitId:{dataType:"number",notNull:!0,unique:!0},ihaleler_id:{dataType:"number",notNull:!0,autoIncrement:!0},malTip:{dataType:"string",enableSearch:!1},satisDurumu:{dataType:"string"},satisSirasi:{dataType:"string",enableSearch:!1},satisYeri:{dataType:"string"},satisiYapanBirim:{dataType:"string"},tarihAraligi_1:{dataType:"date_time"},tarihAraligi_2:{dataType:"date_time"}}},{name:"muhasebe",uniqueKey:[],foreignKeyTarget:{},primaryKey:[],columns:{creator:{dataType:"string",notNull:!0,default:"ADMIN"},dosyaId:{dataType:"string",notNull:!0},muhasebe_id:{dataType:"number",notNull:!0,autoIncrement:!0,unique:!0},tahsilatAciklama:{dataType:"string"},tahsilatTarihi:{dataType:"date_time"},tip:{dataType:"number",notNull:!0,default:1},yatirilanMiktar:{dataType:"number"}}},{name:"notlar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["creator","type","kaynakId"],columns:{alinan_not:{dataType:"string",notNull:!0,enableSearch:!1},created_tarihi:{dataType:"date_time",notNull:!0,default:new Date},creator:{dataType:"string",notNull:!0,default:"ADMIN"},kaynakId:{dataType:"string",notNull:!0},modified_tarihi:{dataType:"date_time",notNull:!0,default:new Date},notlar_id:{dataType:"number",notNull:!0,autoIncrement:!0},type:{dataType:"string",notNull:!0}}},{name:"takvim_olaylar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["google_event_id"],columns:{created_tarihi:{dataType:"date_time",default:new Date},google_event_id:{dataType:"string",notNull:!0,unique:!0},google_takvim:{dataType:"string"},kaynakId:{dataType:"string",notNull:!0},takvim_olaylar_id:{dataType:"number",notNull:!0,autoIncrement:!0},type:{dataType:"string",notNull:!0}}},{name:"taraflar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["dosyaId","adi","rol"],columns:{adi:{dataType:"string",notNull:!0},adres:{dataType:"array"},created_tarihi:{dataType:"date_time",default:new Date,enableSearch:!1},dosyaId:{dataType:"string",notNull:!0},mail:{dataType:"string",enableSearch:!1},rol:{dataType:"string",notNull:!0},taraflar_id:{dataType:"number",notNull:!0,autoIncrement:!0},tcKimlikNo:{dataType:"number"},tel_no:{dataType:"string"},vekil:{dataType:"array"}}},{name:"tebligatlar",uniqueKey:[],foreignKeyTarget:{},primaryKey:["evrakId","dosyaId","barkodNo"],columns:{barkodNo:{dataType:"number",notNull:!0,default:0},created_tarihi:{dataType:"date_time",default:new Date},dosyaId:{dataType:"string",notNull:!0},durum:{dataType:"string"},eTebligat:{dataType:"string",default:"false"},evrakId:{dataType:"number",notNull:!0},evrakTarihi:{dataType:"date_time"},gorulmemis:{dataType:"string",default:"true"},icerik:{dataType:"string"},isEdited:{dataType:"string",default:"false"},isLastState:{dataType:"number"},lastStateTarihi:{dataType:"date_time"},muhatap:{dataType:"string"},tebligatlar_id:{dataType:"number",notNull:!0,autoIncrement:!0}}},{name:"yedekler",uniqueKey:[],foreignKeyTarget:{},primaryKey:[],columns:{created_tarihi:{dataType:"date_time",notNull:!0,default:new Date},filePath:{dataType:"string",notNull:!0,enableSearch:!1},isUploaded:{dataType:"string",notNull:!0,default:"false"},upload_id:{dataType:"string",notNull:!0},uploaded_tarihi:{dataType:"date_time"},yedekler_id:{dataType:"number",notNull:!0,autoIncrement:!0,unique:!0}}}]},get guncelDb(){if(!this._guncelDb){this._guncelDb=structuredClone(UYAP_EXT.DB.db);for(let e=0;e<this._guncelDb.tables.length;e++)if(this._guncelDb.tables[e].alter)for(let a=2;a<=UYAP_EXT.DB.db.version;a++)for(const[t,r]of Object.entries(this._guncelDb.tables[e].alter[a]))switch(t){case"modify":for(const[a,t]of Object.entries(r))this._guncelDb.tables[e].columns[a]=Object.assign(this._guncelDb.tables[e].columns[a],t);break;case"add":for(const[a,t]of Object.entries(r))this._guncelDb.tables[e].columns[a]=t;break;case"drop":for(const[a,t]of Object.entries(r))delete this._guncelDb.tables[e].columns[a];break;default:break}}return this._guncelDb},dosya_islem_turleri_sorgula_brd:function(e,a){UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null).then((a=>{if(a){let e=$(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notlar((function(){UYAP_EXT.DIALOG.openNotlarim.default(this,{hash:a.dosyalar_hash,dosyaNo:a.dosyalar_dosyaNo,birimId:a.dosyalar_birimId},"list")})),UYAP_EXT.TOOL.imerekButtons.notAl((function(){UYAP_EXT.DIALOG.openDosyaSummernote(a.dosyalar_hash,(()=>{UYAP_EXT.DIALOG.myGalleryNotlarim.open()}))})),"dosyalar"==a.dosyalar_table_name?UYAP_EXT.TOOL.imerekButtons.talep((function(){UYAP_EXT.TOOL.UDF.talepOlustur.dosyalar(a.dosyalar_hash)})):null);0==$(".dx-popup-title.dx-has-close-button [aria-label='Tam Ekran']").closest(".ms-auto").find(".evraklar_buttons").length?$(".dx-popup-title.dx-has-close-button [aria-label='Tam Ekran']").closest(".ms-auto").prepend(e):$(".dx-popup-title.dx-has-close-button [aria-label='Tam Ekran']").closest(".ms-auto").find(".evraklar_buttons").replaceWith(e)}else UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId).then((e=>{let a=$(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.notlar((function(){UYAP_EXT.DIALOG.openNotlarim.default(this,{hash:e.dosyalar_hash,dosyaNo:e.dosyalar_dosyaNo,birimId:e.dosyalar_birimId},"list")})),UYAP_EXT.TOOL.imerekButtons.notAl((function(){UYAP_EXT.DIALOG.openDurusmaSummernote(e.durusmalar_kayitId,(()=>{UYAP_EXT.DIALOG.myGalleryNotlarim.open()}))})),"dosyalar"==e.dosyalar_table_name?UYAP_EXT.TOOL.imerekButtons.talep((function(){UYAP_EXT.TOOL.UDF.talepOlustur.dosyalar(e.dosyalar_hash)})):null);0==$(".dx-popup-title.dx-has-close-button .dx-closebutton").closest(".dx-toolbar-item-content").find(".evraklar_buttons").length?$(".dx-popup-title.dx-has-close-button .dx-closebutton").closest(".dx-toolbar-item-content").prepend(a):$(".dx-popup-title.dx-has-close-button .dx-closebutton").closest(".dx-toolbar-item-content").find(".evraklar_buttons").replaceWith(a)}))}))},avukat_dosya_sorgula_cbs_brd:async function(e,a){UYAP_EXT.DB.search_phrase_detayli(e,a)},download_document_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.evrakDownload[t]=new Promise((async(t,r)=>{if(200!=a.status)t({result:!1});else{if(!e.xhr.assocData){let e,t=new URL(a.finalUrl),r=t.searchParams.get("dosyaId"),l=t.searchParams.get("evrakId");var i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.evrakId","=",l||0],["AND","dosyalar.dosyaId_tam","like",r.slice(0,20)+"%"]],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],limit:1}});if(i[0])if(i[0].evraklar_anaEvrakId>0){let a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.evrakId","=",i[0].evraklar_anaEvrakId],["AND","evraklar.ana_dosyaId","=",i[0].dosyalar_hash]],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],limit:1}});e=i[0].dosyalar_birimAdi+" "+(i[0].dosyalar_dosyaNo?i[0].dosyalar_dosyaNo.replaceAll("/","-"):i[0].dosyalar_esasNo?i[0].dosyalar_esasNo.replaceAll("/","-"):"")+" "+a[0].evraklar_tur.replaceAll("/","-")+" EKİ ( "+a[0].evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR")+" )"}else e=i[0].dosyalar_birimAdi+" "+(i[0].dosyalar_dosyaNo?i[0].dosyalar_dosyaNo.replaceAll("/","-"):i[0].dosyalar_esasNo?i[0].dosyalar_esasNo.replaceAll("/","-"):"")+" "+i[0].evraklar_tur.replaceAll("/","-")+"( "+i[0].evraklar_sistemeGonderildigiTarih.toLocaleDateString("tr-TR")+" )";let n=await UYAP_EXT.TOOL.getFileExtension(a.data);if(UYAP_EXT.TOOL.user.options.promode){if(0!=UYAP_EXT.TOOL._user.options.autoPDF&&a.headers["content-disposition"].endsWith(".udf"))if(".xml"==n[0]);else{let t=await UYAP_EXT.TOOL.UDF.toPDF.convert(a.data,null);await UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:"http://localhost:9935/"+t.body.path.replace(/^.*[\\/]/,""),filename:e.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"")+".pdf"}})}let t=await UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:window.URL.createObjectURL(a.data),filename:e.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"")+n[0]}});UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/deleteFile",request:{method:"POST",body:JSON.stringify({src:t.downloadedFile.filename.current.substring(0,t.downloadedFile.filename.current.lastIndexOf("/"))+"/"+a.headers["content-disposition"].match(/\.*filename=(.*)$/)[1]})}})}else{await UYAP_EXT.TOOL.messageToPortal({ask:"downloadFile",params:{url:window.URL.createObjectURL(a.data),filename:e.normalize(UYAP_EXT.TOOL.systemInformation.fileNameEncoding).replace(/[^\S ]/g,"")+n[0]}})}}t({result:!0})}})).finally((()=>{delete UYAP_EXT.DB.queue.evrakDownload[t]}))},search_phrase_detayli:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.dosya[t]=new Promise((async(t,r)=>{let i={};try{if(i=JSON.parse(a.data),i.errorCode)switch(i.errorCode){case UYAP_EXT.TOOL.errors[4].errorCode:return void t({result:!1});break;case UYAP_EXT.TOOL.errors[6].errorCode:return void t({result:!1});break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}let l=JSON.parse(e.body),n=i[0].map((e=>(e.dosyaAcilisTarihi=new Date(e.dosyaAcilisTarihi.date.year,e.dosyaAcilisTarihi.date.month-1,e.dosyaAcilisTarihi.date.day,e.dosyaAcilisTarihi.time.hour,e.dosyaAcilisTarihi.time.minute,e.dosyaAcilisTarihi.time.second,e.dosyaAcilisTarihi.time.nano),e.dosyaKapanisTarihi&&(e.dosyaKapanisTarihi=new Date(e.dosyaKapanisTarihi.date.year,e.dosyaKapanisTarihi.date.month-1,e.dosyaKapanisTarihi.date.day,e.dosyaKapanisTarihi.time.hour,e.dosyaKapanisTarihi.time.minute,e.dosyaKapanisTarihi.time.second,e.dosyaKapanisTarihi.time.nano)),e.table_name=16==e.dosyaTurKod?"cbsdosyalar":"dosyalar",e.dosyaId_tam=e.dosyaId,delete e.dosyaId,e.is_aktif=!0,e.hash=UYAP_EXT.TOOL.hash.createHashValue(e),e))),o=UYAP_EXT.TOOL.hash.fields.map((e=>"dosyalar."+e));o.push("dosyalar.hash"),o.push("dosyalar.dosyaId_tam"),o.push("dosyalar.dosyalar_id");let s=[];Object.hasOwn(l,"dosyaDurumKod")&&(1==l.dosyaDurumKod?s.push(["AND","dosyalar.dosyaDurumKod","=",1]):s.push(["AND","dosyalar.dosyaDurumKod","<>",1])),Object.hasOwn(l,"dosyaAcilisTarihiStart")&&s.push(["AND","dosyalar.dosyaAcilisTarihi",">=",new Date(l.dosyaAcilisTarihiStart.split(".").reverse().join("-"))]),Object.hasOwn(l,"dosyaAcilisTarihiEnd")&&s.push(["AND","dosyalar.dosyaAcilisTarihi","<=",new Date(l.dosyaAcilisTarihiEnd.split(".").reverse().join("-"))]),Object.hasOwn(l,"dosyaYil")&&s.push(["AND","dosyalar.dosyaNo","like",l.dosyaYil+"/%"]),Object.hasOwn(l,"dosyaSira")&&s.push(["AND","dosyalar.dosyaNo","like","%/"+l.dosyaSira]),Object.hasOwn(l,"birimTuru2")&&s.push(["AND","dosyalar.birimTuru2","=",l.birimTuru2]);let d=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",fields:o,where:s}});if(Object.hasOwn(l,"dosyaDurumKod")){let e=d.reduce((function(e,a){return n.find((e=>a.dosyalar_hash==e.hash))||e.push(a.dosyalar_hash),e}),[]);if(1==l.dosyaDurumKod)for(let a=0;a<e.length;a++)await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(e[a],!1);else e.length>0&&await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","in",e]],data:[{dosyaDurumKod:1}]}})}await UYAP_EXT.DB.connection.mergeUsing({method:"PUT",body:{into:"dosyalar",using:"DUAL",on:[["and","dosyalar.hash"]],data:n}});for(const e of UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all){let a=n.find((a=>a.hash==e.dosyalar_hash));a&&(e.dosyalar_dosyaId_tam=a.dosyaId_tam)}t({result:!0}),UYAP_EXT.MENU.isBadgeOlustur&&UYAP_EXT.MENU.badgeOlustur("dosyalar")})).finally((()=>{delete UYAP_EXT.DB.queue.dosya[t]}))},getYargitayDosyalar_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.dosya[t]=new Promise((async(t,r)=>{let i={};try{if(i=JSON.parse(a.data),i.errorCode)switch(i.errorCode){case UYAP_EXT.TOOL.errors[4].errorCode:return void t({result:!1});break;case UYAP_EXT.TOOL.errors[6].errorCode:return void t({result:!1});break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}let l=[];for(let e=0;e<i.value.length;e++)l.push(i.value[e].yargitaySorguDosyaDetayDVO);let n=l.map((e=>(e.table_name="yargitaydosyalar",e.savcilikTarihi&&(e.savcilikTarihi=new Date(e.savcilikTarihi.split("/").reverse().toString())),e.gelisTarihi&&(e.gelisTarihi=new Date(e.gelisTarihi.split("/").reverse().toString())),e.mahkemeKararTarihi&&(e.mahkemeKararTarihi=new Date(e.mahkemeKararTarihi.split("/").reverse().toString())),e.dosyaId_tam=e.dosyaId,delete e.dosyaId,e.is_aktif=!0,e.kararTarihi&&(e.kararTarihi=new Date(e.kararTarihi.split("/").reverse().toString())),e.kapatmaTarihi&&(e.kararTarihi=new Date(e.kapatmaTarihi.split("/").reverse().toString())),e.hash=UYAP_EXT.TOOL.hash.createHashValue(e),e))),o=JSON.parse(e.body),s=UYAP_EXT.TOOL.hash.fields.map((e=>"dosyalar."+e));s.push("dosyalar.hash"),s.push("dosyalar.dosyaId_tam"),s.push("dosyalar.dosyalar_id");let d=[];Object.hasOwn(o,"yargitayDairesi")&&d.push(["AND","dosyalar.birimId","=",o.yargitayDairesi]);let u=(await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",fields:s,where:d}})).reduce((function(e,a){return n.find((e=>a.dosyalar_hash==e.hash))||e.push(a.dosyalar_hash),e}),[]);for(let e=0;e<u.length;e++)await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(u[e],!1);await UYAP_EXT.DB.connection.mergeUsing({method:"PUT",body:{into:"dosyalar",using:"DUAL",on:[["and","dosyalar.hash"]],data:n}});for(const e of UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all){let a=n.find((a=>a.hash==e.dosyalar_hash));a&&(e.dosyalar_dosyaId_tam=a.dosyaId_tam)}t({result:!0}),UYAP_EXT.MENU.isBadgeOlustur&&UYAP_EXT.MENU.badgeOlustur("dosyalar")})).finally((()=>{delete UYAP_EXT.DB.queue.dosya[t]}))},avukatDanistayDosyaSorgula:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.dosya[t]=new Promise((async(t,r)=>{let i={};try{if(i=JSON.parse(a.data),i.errorCode)switch(i.errorCode){case UYAP_EXT.TOOL.errors[4].errorCode:return void t({result:!1});break;case UYAP_EXT.TOOL.errors[6].errorCode:return void t({result:!1});break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}let l=JSON.parse(e.body),n=[];for(let e=0;e<i.length;e++){let a={dosyaId_tam:i[e].dosyaId,birimAdi:i[e].birimDVO.birimAdi,table_name:"danistaydosyalar",birimId:i[e].birimDVO.birimId,eskiAd:i[e].birimDVO.eskiAd,eskiOrgKod:i[e].birimDVO.eskiOrgKod,evraginBirimDVODaGonderilecegiBirimBilgisi:i[e].birimDVO.evraginBirimDVODaGonderilecegiBirimBilgisi,isTumunuKopyala:i[e].birimDVO.isTumunuKopyala,orgKoduDegisti:i[e].birimDVO.orgKoduDegisti,taranmamisKaydetme:i[e].birimDVO.taranmamisKaydetme,testMi:i[e].birimDVO.testMi,yeniBirimEkle:i[e].birimDVO.yeniBirimEkle,dosyaAcilisTarihi:new Date(i[e].dosyaAcilisTarihi),dosyaNo:i[e].dosyaNo,dosyaTurAciklama:i[e].dosyaTurAciklama,dosyaTurKod:i[e].dosyaTurKod,genelDosyaDurumu:i[e].genelDosyaDurumu,danistayDairesi:l.danistayDairesi,is_aktif:!0};a.hash=UYAP_EXT.TOOL.hash.createHashValue(a),n.push(a)}let o=UYAP_EXT.TOOL.hash.fields.map((e=>"dosyalar."+e));o.push("dosyalar.hash"),o.push("dosyalar.dosyaId_tam"),o.push("dosyalar.dosyalar_id");let s=[];Object.hasOwn(l,"danistayDairesi")&&s.push(["AND","dosyalar.danistayDairesi","=",l.danistayDairesi]);let d=(await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",fields:o,where:s}})).reduce((function(e,a){return n.find((e=>a.dosyalar_hash==e.hash))||e.push(a.dosyalar_hash),e}),[]);for(let e=0;e<d.length;e++)await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(d[e],!1);await UYAP_EXT.DB.connection.mergeUsing({method:"PUT",body:{into:"dosyalar",using:"DUAL",on:[["and","dosyalar.hash"]],data:n}});for(const e of UYAP_EXT.TOOL.tasksRequests.evraklariEsitle.sorgulanacak_dosyalar.all){let a=n.find((a=>a.hash==e.dosyalar_hash));a&&(e.dosyalar_dosyaId_tam=a.dosyaId_tam)}t({result:!0}),UYAP_EXT.MENU.isBadgeOlustur&&UYAP_EXT.MENU.badgeOlustur("dosyalar")})).finally((()=>{delete UYAP_EXT.DB.queue.dosya[t]}))},avukat_durusma_sorgula_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.durusma[t]=new Promise((async(e,t)=>{let r={};try{if(r=JSON.parse(a.data),r.errorCode)switch(r.errorCode){case UYAP_EXT.TOOL.errors[4].errorCode:return void e({result:!1});break;case UYAP_EXT.TOOL.errors[6].errorCode:return void e({result:!1});break;default:return void e({result:!1});break}}catch(a){return void e({result:!1})}for(let e=0;e<r.length;e++){let a={from:"dosyalar",where:[["AND","dosyalar.dosyaNo","=",r[e].dosyaNo],["AND","dosyalar.birimId","=",r[e].birimId]]};0==(await UYAP_EXT.DB.connection.select("",{method:"POST",body:a})).length&&(await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),await UYAP_EXT.TOOL.makeRequest("/search_phrase_detayli.ajx",JSON.stringify({birimTuru3:UYAP_EXT.TOOL.getYargiTuru(r[e].birimTuru3).toString(),birimTuru2:r[e].birimTuru2,birimId:r[e].birimId,dosyaDurumKod:0,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST").promise,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)))}if(await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"durusmalar",data:r.map((e=>(delete e.dosyaTaraflari,e.dosyaId=e.dosyaId.slice(0,20),e.tarihSaat=new Date(e.tarihSaat),e.izinliHakimList=JSON.stringify(e.izinliHakimList),e)))}}),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),UYAP_EXT.TOOL._user.options.startUp.durusmaEkle){for(let a=0;a<r.length;a++){let t={from:"durusmalar",join:[["JOIN","takvim_olaylar",[["durusmalar.kayitId","takvim_olaylar.kaynakId"]]]],where:[["AND","takvim_olaylar.type","=","durusmalar"],["AND","takvim_olaylar.kaynakId","=",r[a].kayitId]]};UYAP_EXT.DB.connection.select("",{method:"POST",body:t}).then((t=>{0==t.length&&UYAP_EXT.DIALOG.durusmaCalendarEventFormSend(r[a].kayitId,!1).then((a=>{"google_yetki_islemi_basladi"==a?e({google_yetkisi:!0}):"google_yetki_verilmedi"==a&&e({google_yetkisi:!1})}))}))}e({result:!0,google_yetkisi:null})}else e({result:!0,google_yetkisi:null})})).finally((()=>{delete UYAP_EXT.DB.queue.durusma[t]}))},avukatIhalegunuSorgula_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.satisGunu[t]=new Promise((async(e,t)=>{let r={};try{if(r=JSON.parse(a.data),r.errorCode)switch(r.errorCode){case UYAP_EXT.TOOL.errors[4].errorCode:return void e({result:!1});break;case UYAP_EXT.TOOL.errors[6].errorCode:return void e({result:!1});break;default:return void e({result:!1});break}}catch(a){return void e({result:!1})}if(await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"ihaleler",data:r.map((e=>(e.tarihAraligi_1=new Date(e.tarihAraligi_1.split(" ")[0].split("/").reverse().join("-")+" "+e.tarihAraligi_1.split(" ")[1].toString()),e.tarihAraligi_2=new Date(e.tarihAraligi_2.split(" ")[0].split("/").reverse().join("-")+" "+e.tarihAraligi_2.split(" ")[1].toString()),e)))}}),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),UYAP_EXT.TOOL._user.options.startUp.satisEkle){for(let a=0;a<r.length;a++){let t={from:"ihaleler",join:[["JOIN","takvim_olaylar",[["ihaleler.ihaleKayitId","takvim_olaylar.kaynakId"]]]],where:[["AND","takvim_olaylar.type","=","ihaleler"],["AND","takvim_olaylar.kaynakId","=",r[a].ihaleKayitId]]};UYAP_EXT.DB.connection.select("",{method:"POST",body:t}).then((t=>{0==t.length&&UYAP_EXT.DIALOG.ihaleCalendarEventFormSend(r[a].ihaleKayitId,!1).then((a=>{"google_yetki_islemi_basladi"==a?e({google_yetkisi:!0}):"google_yetki_verilmedi"==a&&e({google_yetkisi:!1})}))}))}e({result:!0,google_yetkisi:null})}else e({result:!0,google_yetkisi:null})})).finally((()=>{delete UYAP_EXT.DB.queue.satisGunu[t]}))},list_dosya_evraklar:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.TOOL.user,UYAP_EXT.DB.queue.evrak[t]=new Promise((async(t,r)=>{let i=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null);i||(i=await UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId));let l={};try{if(l=JSON.parse(a.data),l.errorCode)switch(l.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.evrak).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(i.dosyalar_hash),e&&(1!=e.dosyalar_is_evrak_aktif&&"true"!=e.dosyalar_is_evrak_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.evrak[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.evrak[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.evrak[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.DB.uyapEvrakEsitle(e.dosyalar_dosyaId_tam,e).promise)))),t({result:!1,dosya:e,ana_dosyaId_eski:ana_dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaEvrakToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}let n=$(UYAP_EXT.TOOL.imerekButtons.buttonsContainer()).append(UYAP_EXT.TOOL.imerekButtons.evrakList((function(){UYAP_EXT.DIALOG.openEvrakAra.default(this,[["AND","dosyalar.hash","=",i.dosyalar_hash]],"list")})),UYAP_EXT.TOOL.imerekButtons.tebligatList((async function(){UYAP_EXT.DIALOG.blockUILogo.show("Dosyaya Ait Tebligatlarınız İşleniyor","PTT Gönderi Takip Sisteminin Güvenlik Önlemleri Sebebiyle İşleminiz Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body",!1,!0),UYAP_EXT.DB.tebligatCheck.toastr.letShow=!1,UYAP_EXT.DB.tebligatCheck.setgorulmemis=!1;let e={from:"evraklar",fields:["evraklar.*"],where:[["AND","evraklar.tur","in",["Açık Tebligat","Kapalı Tebligat"]],["AND","evraklar.anaEvrakId","=",0],["AND","evraklar.ana_dosyaId","=",i.dosyalar_hash]],join:[["LEFT_OUTER_JOIN","tebligatlar",[["evraklar.evrakId","tebligatlar.evrakId"],["evraklar.ana_dosyaId","tebligatlar.dosyaId"]]]]},a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:e});await UYAP_EXT.DB.tebligatCheck.default(a,!0,!0,!0).promise,UYAP_EXT.DB.tebligatCheck.setgorulmemis=!0,UYAP_EXT.DIALOG.openTebligatList.default([["AND","evraklar.ana_dosyaId","=",i.dosyalar_hash]],this,"ara"),UYAP_EXT.DB.tebligatCheck.toastr.letShow=!0})));$(n).find("button").addClass("disabled"),$(n).find(".fa-list").removeClass("fa-list").addClass("fa-hourglass-start"),$(n).find(".fa-envelope-open-text").removeClass("fa-envelope-open-text").addClass("fa-hourglass-start"),0==$(".d-flex.gap-2.mb-2.mx-1 .evraklar_buttons").length?$(".d-flex.gap-2.mb-2.mx-1").prepend(n):$(".d-flex.gap-2.mb-2.mx-1").replaceWith(n),await UYAP_EXT.TOOL.cleanUp.DosyaEvrakToggle(i.dosyalar_hash,!0);let o=[];for(const[e,a]of Object.entries(l.tumEvraklar)){let t=e.match(/^(.*)\((.*)\)$/);for(let e=0;e<a.length;e++){let r=[];a[e].onaylandigiTarih&&(a[e].onaylandigiTarih=new Date(a[e].onaylandigiTarih.split("/").reverse().join("-"))),a[e].sistemeGonderildigiTarih&&(a[e].sistemeGonderildigiTarih=new Date(a[e].sistemeGonderildigiTarih.split("/").reverse().join("-"))),a[e].ana_dosyaId=i.dosyalar_hash,a[e].anaEvrakId=0,a[e].alt_dosyaNo=t[1],a[e].alt_dosyaTur=t[2],a[e].dosyaId=a[e].dosyaId.slice(0,20),a[e].ekEvrakListesi.length>0&&(r=structuredClone(a[e].ekEvrakListesi)),delete a[e].ekEvrakListesi,o.push(a[e]);for(let t=0;t<r.length;t++){let i=Object.assign(structuredClone(a[e]),r[t]);delete i.ekEvrakListesi,o.push(i)}}}const s=2e3;for(let e=0;e<o.length;e+=s){const a=o.slice(e,e+s);await UYAP_EXT.DB.connection.insert({method:"PUT",body:{into:"evraklar",data:a}})}UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",i.dosyalar_hash]],data:[{last_evrak_tarihi:new Date}]}}),$(n).find("button").removeClass("disabled"),$(n).find(".fa-hourglass-start").first().removeClass("fa-hourglass-start").addClass("fa-list"),$(n).find(".fa-hourglass-start").last().removeClass("fa-hourglass-start").addClass("fa-envelope-open-text"),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.MENU.isBadgeOlustur&&UYAP_EXT.MENU.badgeOlustur("evraklar"),t({result:!0})})).finally((e=>{delete UYAP_EXT.DB.queue.evrak[t]}))},dosyaAyrintiBilgileri_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);UYAP_EXT.DB.queue.dosyaAyrinti[t]=new Promise((async(t,r)=>{let i=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null);i||(i=await UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId));let l={};try{if(l=JSON.parse(a.data),l.errorCode)switch(l.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.dosyaAyrinti).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(i.dosyalar_hash),e&&(1!=e.dosyalar_is_ayrinti_aktif&&"true"!=e.dosyalar_is_ayrinti_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/dosyaAyrintiBilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaAyrintiToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;default:return t({result:!1}),!1;break}}catch(e){return void t({result:!1})}await UYAP_EXT.TOOL.cleanUp.DosyaAyrintiToggle(i.dosyalar_hash,!0);for(const[e,a]of Object.entries(l))if("string"==typeof a||a instanceof String){let t={};t.key=e,t.val=a,t.dosyaId=i.dosyalar_hash,UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"dosya_ayrintilar",data:[t]}})}UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",i.dosyalar_hash]],data:[{last_ayrinti_tarihi:new Date}]}}),t({result:!0})})).finally((()=>{delete UYAP_EXT.DB.queue.dosyaAyrinti[t]}))},yargitayDosyaAyrintiBilgileri_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);UYAP_EXT.DB.queue.dosyaAyrinti[t]=new Promise((async(t,r)=>{let i=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null),l={};try{if(l=JSON.parse(a.data),l.errorCode)switch(l.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.dosyaAyrinti).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(i.dosyalar_hash),e&&(1!=e.dosyalar_is_ayrinti_aktif&&"true"!=e.dosyalar_is_ayrinti_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/yargitayDosyaAyrintiBilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e,dosyaId_tam_eski:dosyaId_tam,dosyaId_eski:dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaAyrintiToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}await UYAP_EXT.TOOL.cleanUp.DosyaAyrintiToggle(i.dosyalar_hash,!0);for(const[e,a]of Object.entries(l.yargitaySorguDosyaDetayDVO))if("string"==typeof a||a instanceof String){let t={};t.key=e,t.val=a,t.dosyaId=i.dosyalar_hash,UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"dosya_ayrintilar",data:[t]}})}UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",i.dosyalar_hash]],data:[{last_ayrinti_tarihi:new Date}]}}),t({result:!0})})).finally((()=>{delete UYAP_EXT.DB.queue.dosyaAyrinti[t]}))},dosya_taraf_bilgileri_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.taraf[t]=new Promise((async t=>{let r=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null);r||(r=await UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId));let i={};try{if(i=JSON.parse(a.data),i.errorCode)switch(i.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.taraf).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(r.dosyalar_hash),e&&(1!=e.dosyalar_is_taraf_aktif&&"true"!=e.dosyalar_is_taraf_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.taraf[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.taraf[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.taraf[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/dosya_taraf_bilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e,dosyaId_tam_eski:dosyaId_tam,dosyaId_eski:dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaTarafToggle(r.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(r.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}let l=[];for(let e=0;e<i.length;e++){let a={};a.dosyaId=r.dosyalar_hash,a.rol=i[e].rol,a.adi=i[e].adi;let t=[];try{t=i[e].vekil.replaceAll("[","").replaceAll("]","").split(",").map((function(e){return e.trim()}))}catch(e){}a.vekil=JSON.stringify(t),l.push(a)}await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"taraflar",data:l}}),await UYAP_EXT.TOOL.cleanUp.DosyaTarafToggle(r.dosyalar_hash,!0),UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",r.dosyalar_hash]],data:[{last_taraf_tarihi:new Date}]}}),delete UYAP_EXT.TOOL._user.interrupts.sorgulaTaraf[r.dosyalar_table_name][r.dosyalar_hash],UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,t({result:!0})})).finally((()=>{delete UYAP_EXT.DB.queue.taraf[t]}))},uyap_islem_sorgula:function(e,a){if(a.status<200||a.status>=300)return!1;UYAP_EXT.TOOL.islemlerim.devamEdenIslemler=[];let t=JSON.parse(a.data);for(let e=0;e<t.length;e++)"Devam Ediyor"==t[e].isinDurumu&&(t[e].isEmirTarihi=new Date(t[e].isEmirTarihi),UYAP_EXT.TOOL.islemlerim.devamEdenIslemler.push(t[e]));UYAP_EXT.MENU.badgeOlustur("islemlerim")},dosya_tahsilat_reddiyat_bilgileri_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);UYAP_EXT.DB.queue.tahsilat[t]=new Promise((async(t,r)=>{let i=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null);i||(i=await UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId));let l={};try{if(l=JSON.parse(a.data),l.errorCode)switch(l.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.tahsilat).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(i.dosyalar_hash),e&&(1!=e.dosyalar_is_tahsilat_aktif&&"true"!=e.dosyalar_is_tahsilat_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.tahsilat[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.tahsilat[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.tahsilat[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/dosya_taraf_bilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e,dosyaId_tam_eski:dosyaId_tam,dosyaId_eski:dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaTarafToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}await UYAP_EXT.TOOL.cleanUp.DosyaTahsilatToggle(i.dosyalar_hash,!0);let n={dosyaId:i.dosyalar_hash,toplamTahsilat:l.toplamTahsilat,toplamreddiyat:l.toplamreddiyat,toplamTahsilHarci:l.toplamTahsilHarci,toplamKalan:l.toplamKalan,toplamTeminat:l.toplamTeminat,haricen:l.haricen,isIcraMi:l.isIcraMi};await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harcTahsilatToplam",data:[n]}});for(let e=0;e<l.harcList.length;++e){let a={dosyaId:i.dosyalar_hash,harc_tahsilat_reddiyat:0,birimAdi:l.harcList[e].birimAdi,dosyaNo:l.harcList[e].dosyaNo,dosyaTurAciklama:l.harcList[e].dosyaTurAciklama,makbuzNo:l.harcList[e].makbuzNo,miktar:l.harcList[e].miktar,odeyenKisi:l.harcList[e].odeyenKisi,tahsilatTarihi:new Date(l.harcList[e].tahsilatTarihi),tahsilatTuru:l.harcList[e].tahsilatTuru,key_part:new Date(l.harcList[e].tahsilatTarihi).valueOf()+"|"+l.harcList[e].tahsilatTuru};await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harcTahsilatAyrinti",data:[a]}})}for(let e=0;e<l.tahsilatList.length;++e){let a={dosyaId:i.dosyalar_hash,harc_tahsilat_reddiyat:1,birimAdi:l.tahsilatList[e].birimAdi,dosyaNo:l.tahsilatList[e].dosyaNo,dosyaTurAciklama:l.tahsilatList[e].dosyaTurAciklama,kalanMiktar:l.tahsilatList[e].kalanMiktar,kayitId:l.tahsilatList[e].kayitId,makbuzNo:l.tahsilatList[e].makbuzNo,odeyenKisi:l.tahsilatList[e].odeyenKisi,tahsilatTarihi:new Date(l.tahsilatList[e].tahsilatTarihi),tahsilatTuru:l.tahsilatList[e].tahsilatTuru,tahsilatTutari:l.tahsilatList[e].tahsilatTutari,key_part:new Date(l.harcList[e].tahsilatTarihi).valueOf()+"|"+l.harcList[e].tahsilatTuru};await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harcTahsilatAyrinti",data:[a]}})}for(let e=0;e<l.reddiyatList.length;++e){let a={dosyaId:i.dosyalar_hash,harc_tahsilat_reddiyat:2,birimAdi:l.reddiyatList[e].birimAdi,dosyaNo:l.reddiyatList[e].dosyaNo,dosyaTurAciklama:l.reddiyatList[e].dosyaTurAciklama,gelirVergisi:l.reddiyatList[e].gelirVergisi,kayitId:l.reddiyatList[e].kayitId,makbuzNo:l.reddiyatList[e].makbuzNo,miktar:l.reddiyatList[e].miktar,odenecekMiktar:l.reddiyatList[e].odenecekMiktar,odeyenKisi:l.reddiyatList[e].odeyenKisi,reddiyatTarihi:new Date(l.reddiyatList[e].reddiyatTarihi),reddiyatNedeni:l.reddiyatList[e].reddiyatNedeni,tahsilHarci:l.reddiyatList[e].tahsilHarci,key_part:new Date(l.reddiyatList[e].reddiyatTarihi).valueOf()+"|"+l.reddiyatList[e].reddiyatNedeni};await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"harcTahsilatAyrinti",data:[a]}})}t({result:!0})})).then((()=>{delete UYAP_EXT.DB.queue.tahsilat[t]}))},dosya_borclu_list:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.taraf[t]=new Promise((async t=>{let r=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null);r||(r=await UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId));let i={};try{if(i=JSON.parse(a.data),i.errorCode)switch(i.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.borcluBilgileri).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(r.dosyalar_hash),e&&(1!=e.dosyalar_is_borclu_aktif&&"true"!=e.dosyalar_is_borclu_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.borclu[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.borclu[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.borclu[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/dosya_taraf_bilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e,dosyaId_tam_eski:dosyaId_tam,dosyaId_eski:dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaTarafToggle(r.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(r.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}for(let e=0;e<i.length;e++){let a={dosyaId:r.dosyalar_hash,kisiKurumId:i[e].kisiKurumId,adi:i[e].kisiTumDVO.adi,aktifMernisAdresiSorgusu:i[e].kisiTumDVO.aktifMernisAdresiSorgusu,anaAdi:i[e].kisiTumDVO.anaAdi,babaAdi:i[e].kisiTumDVO.babaAdi,dogumTarihiStr:new Date(i[e].kisiTumDVO.dogumTarihiStr.split("/").reverse().toString()),hasOlumKaydi:i[e].kisiTumDVO.hasOlumKaydi,isAvukat:i[e].kisiTumDVO.isAvukat,isHakimSavci:i[e].kisiTumDVO.isHakimSavci,isNoter:i[e].kisiTumDVO.isNoter,isTarafUyari:i[e].kisiTumDVO.isTarafUyari,mernisDegisiklikNedeni:i[e].kisiTumDVO.mernisDegisiklikNedeni,mernisDegisiklikVarmi:i[e].kisiTumDVO.mernisDegisiklikVarmi,olumKaydi:i[e].kisiTumDVO.olumKaydi,sorguTuru:i[e].kisiTumDVO.sorguTuru,soyadi:i[e].kisiTumDVO.soyadi,tcKimlikNo:i[e].kisiTumDVO.tcKimlikNo,turu:i[e].turu};try{await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"borclu_bilgileri",data:[a]}}),UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",r.dosyalar_hash]],data:[{last_borclu_tarihi:new Date}]}})}catch(e){}}t({result:!0})})).finally((()=>{delete UYAP_EXT.DB.queue.taraf[t]}))},dosya_icra_kesinlesme_bilgileri_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;UYAP_EXT.DB.queue.taraf[t]=new Promise((async t=>{let r=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null);r||(r=await UYAP_EXT.TOOL.findDurusmaDosyasi(JSON.parse(e.body).dosyaId));let i=JSON.parse(e.body).kisiKurumId,l={};try{if(l=JSON.parse(a.data),l.errorCode)switch(l.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.borcluBilgileri).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(r.dosyalar_hash),e&&(1!=e.dosyalar_is_borclu_aktif&&"true"!=e.dosyalar_is_borclu_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.borclu[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.borclu[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.borclu[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/dosya_icra_kesinlesme_bilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e,dosyaId_tam_eski:dosyaId_tam,dosyaId_eski:dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaTarafToggle(r.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(r.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"borclu_bilgileri",where:[["AND","borclu_bilgileri.dosyaId","=",r.dosyalar_hash],["AND","borclu_bilgileri.kisiKurumId","=",i]],data:[{is_takip_kesin:l.basarilimi,islemSonucu:l.islemSonucu}]}}),t({result:!0})})).finally((()=>{delete UYAP_EXT.DB.queue.taraf[t]}))},danistayDosyaAyrintiBilgileri_brd:async function(e,a){if(a.status<200||a.status>=300)return!1;if(UYAP_EXT.TOOL.tasksInterrupts.mainqueue.tasksInterrupts)return!1;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);UYAP_EXT.DB.queue.dosyaAyrinti[t]=new Promise((async(t,r)=>{let i=await UYAP_EXT.TOOL.findDosya(JSON.parse(e.body).dosyaId,e.xhr.assocData?e.xhr.assocData.dosyalar_hash:null),l={};try{if(l=JSON.parse(a.data),l.errorCode)switch(l.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;return Object.keys(UYAP_EXT.DB.queue.dosyaAyrinti).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(i.dosyalar_hash),e&&(1!=e.dosyalar_is_ayrinti_aktif&&"true"!=e.dosyalar_is_ayrinti_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.dosyaAyrinti[e.dosyalar_dosyaId_tam]=!0,await UYAP_EXT.TOOL.makeRequest("/danistayDosyaAyrintiBilgileri_brd.ajx",JSON.stringify({dosyaId:e.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",e).promise)))),t({result:!1,dosya:e,dosyaId_tam_eski:dosyaId_tam,dosyaId_eski:dosyaId}),!1;break;case UYAP_EXT.TOOL.errors[1].errorCode:return t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[2].errorCode:return await UYAP_EXT.TOOL.cleanUp.DosyaAyrintiToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;case UYAP_EXT.TOOL.errors[5].errorCode:return await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(i.dosyalar_hash,!1),t({result:!1}),!1;break;default:return void t({result:!1});break}}catch(e){return void t({result:!1})}await UYAP_EXT.TOOL.cleanUp.DosyaAyrintiToggle(i.dosyalar_hash,!0);for(const[e,a]of Object.entries(l))if("string"==typeof a||a instanceof String){let t={};t.key=e,t.val=a,t.dosyaId=i.dosyalar_hash,UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"dosya_ayrintilar",data:[t]}})}UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"dosyalar",where:[["AND","dosyalar.hash","=",i.dosyalar_hash]],data:[{last_ayrinti_tarihi:new Date}]}}),t({result:!0})})).finally((()=>{delete UYAP_EXT.DB.queue.dosyaAyrinti[t]}))},notuAl:async function(e,a,t=null){let r={from:"notlar",where:[["AND","notlar.kaynakId","=",e],["AND","notlar.type","=",a]],orderby:[["notlar.created_tarihi","DESC"]],limit:1};return t&&(r.where=[["AND","notlar.notlar_id","=",t]]),await UYAP_EXT.DB.connection.select("",{method:"POST",body:r})},notuKaydet:async function(e,a,t){UYAP_EXT.DIALOG.blockUILogo.show("Notunuz Kaydediliyor","Bu İşlem Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body"),await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"notlar",data:[{type:t,alinan_not:a,kaynakId:e,creator:UYAP_EXT.TOOL._user.promode.calisan.username}]}}),UYAP_EXT.MENU.badgeOlustur("notlarim"),UYAP_EXT.DIALOG.blockUILogo.hide()},notuSil:async function(e){await UYAP_EXT.DB.connection.delete({method:"PUT",body:{from:"notlar",where:[["AND","notlar.notlar_id","=",e]]}}),UYAP_EXT.MENU.badgeOlustur("notlarim")},googeCalendarResponseKaydet:async function(e,a,t){return await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"takvim_olaylar",data:[{type:e,kaynakId:a,google_event_id:t.id,google_takvim:t.organizer.email}]}}),!0},dosyaTaraflariAl:async function(e,a=!0){let t=await UYAP_EXT.TOOL.findDosya(null,e);if(t.dosyalar_dosyaId_tam.indexOf("-qxcft")>0&&(1==a||"true"==a)){let e=await UYAP_EXT.TOOL.updateDosyaId(t.dosyalar_hash);if(e){if(e.dosyalar_dosyaId_tam.indexOf("-qxcft")>0)return await UYAP_EXT.TOOL.cleanUp.DosyaTarafToggle(e.dosyalar_hash,!1),[];dosyaId_tam=e.dosyalar_dosyaId_tam}}let r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"taraflar",where:[["AND","taraflar.dosyaId","=",e]]}});return 0==r.length&&a&&(await UYAP_EXT.TOOL.tasksRequests.tarafSorgula(t.dosyalar_hash),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.taraf)),r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"taraflar",where:[["AND","taraflar.dosyaId","=",e]]}})),r},gorulmemisKaldir:async function(e,a){return await UYAP_EXT.DB.connection.update({method:"PUT",body:{into:e,where:[["AND",e+"."+e+"_id","=",a]],data:[{gorulmemis:!1}]}})},dosyaAyrintilariAl:async function(e,a=!0){let t={from:"dosyalar",join:[["LEFT_OUTER_JOIN","dosya_ayrintilar",[["dosyalar.hash","dosya_ayrintilar.dosyaId"]]]],where:[["AND","dosyalar.hash","=",e]]},r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t});if(a&&!r[0].dosya_ayrintilar_dosyaId&&(1==r[0].dosyalar_is_ayrinti_aktif||"true"==r[0].dosyalar_is_ayrinti_aktif)){let a,t=await UYAP_EXT.TOOL.findDosya(null,e);switch(t.dosyalar_table_name){case"dosyalar":a="/avukat/dosyaAyrintiBilgileri_brd.ajx";break;case"danistaydosyalar":a="/danistayDosyaAyrintiBilgileri_brd.ajx";break;case"yargitaydosyalar":a="/yargitayDosyaAyrintiBilgileri_brd.ajx";break;default:break}await UYAP_EXT.TOOL.makeRequest(a,JSON.stringify({dosyaId:t.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST",t).promise,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosyaAyrinti)),r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",join:[["JOIN","dosya_ayrintilar",[["dosyalar.hash","dosya_ayrintilar.dosyaId"]]]],where:[["AND","dosyalar.hash","=",t.dosyalar_hash]]}})}return r},uyapCbsDosyaEsitle:function(e){let a=null,t=null,r=!0,i=new Promise((async function(e,i){a=e,t=i;let l=await UYAP_EXT.TOOL.makeRequest("/illeri_getirJSON.ajx",JSON.stringify({}),null,null,"application/json; charset=utf-8","POST").promise;l=JSON.parse(l.xhr.response);for(let e=0;e<l.length&&r;e++){document.querySelector(".UYP_block")&&(document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+l.length+" )");let a=await UYAP_EXT.TOOL.makeRequest("/cbs_birim_sorgula.ajx",JSON.stringify({ilKodu:l[e].il}),null,null,"application/json; charset=utf-8","POST").promise;a=JSON.parse(a.xhr.response);for(let e=0;e<a.length&&r;e++)document.querySelector(".UYP_block")&&(document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+a.length+" )"),await UYAP_EXT.TOOL.makeRequest("/avukat_dosya_sorgula_cbs_brd.ajx",JSON.stringify({birimId:"",birimTuru2:a[e].birimId,birimTuru3:"3",dosyaDurumKod:1,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST").promise}e(!0)})).catch((()=>{r=!1}));return{resolve:a,reject:t,promise:i}},uyapDosyaEsitle:function(e,a){let t=null,r=null,i=!0,l=new Promise((async function(l,n){let o;t=l,r=n,o=await UYAP_EXT.TOOL.makeRequest("/yargiBirimleriSorgula_brd.ajx",JSON.stringify({yargiTuru:e}),null,null,"application/json; charset=utf-8","POST").promise;let s={};try{s=JSON.parse(o.xhr.response)}catch(e){return void l({result:!1})}for(let t=0;t<s.length&&i;t++)document.querySelector(".UYP_block")&&(document.getElementById("dialog_yuzde").innerHTML=" ( "+(t+1)+" / "+s.length+" )"),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),await UYAP_EXT.TOOL.makeRequest("/search_phrase_detayli.ajx",JSON.stringify({birimTuru3:e,birimTuru2:s[t].tablo,dosyaDurumKod:a?1:0,pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST").promise;UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,l(!0)})).catch((()=>{i=!1}));return{resolve:t,reject:r,promise:l}},uyapDanistayDosyaEsitle:function(){let e=null,a=null,t=!0,r=new Promise((async function(r,i){e=r,a=i;let l=await UYAP_EXT.TOOL.makeRequest("/avukatDanistayDaireSorgula.ajx",JSON.stringify({}),null,null,"application/json; charset=utf-8","POST").promise,n={};try{n=JSON.parse(l.xhr.response)}catch(e){return void r({result:!1})}for(let e=0;e<n.length&&t;e++)document.querySelector(".UYP_block")&&(document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+n.length+" )"),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),await UYAP_EXT.TOOL.makeRequest("/avukatDanistayDosyaSorgula.ajx",JSON.stringify({danistayDairesi:n[e].birimDVO.birimId}),null,null,"application/json; charset=utf-8","POST").promise;UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,r(!0)})).catch((()=>{t=!1}));return{resolve:e,reject:a,promise:r}},uyapEvrakEsitle:function(e,a=1,t){return UYAP_EXT.TOOL.makeRequest("/list_dosya_evraklar.ajx",JSON.stringify({dosyaId:e,pageNumber:a}),null,null,"application/json; charset=utf-8","POST",t)},uyapEvrakPageTotal:async function(e,a){let t,r=await UYAP_EXT.TOOL.findDosya(e,a),i=await UYAP_EXT.TOOL.makeRequest("/listDosyaEvraklarPageTotal.ajx",JSON.stringify({dosyaId:e||_dosya.dosyalar_dosyaId_tam}),null,null,"application/json; charset=utf-8","POST").promise,l={success:!1,pageTotal:1,dosyaId_tam:e};if(Number.isNaN(parseInt(i.xhr.response)))try{if(t=JSON.parse(i.xhr.response),t.errorCode)switch(t.errorCode){case UYAP_EXT.TOOL.errors[0].errorCode:let e=null;Object.keys(UYAP_EXT.DB.queue.evrak).length<2&&(e=await UYAP_EXT.TOOL.updateDosyaId(r.dosyalar_hash),e&&(1!=e.dosyalar_is_evrak_aktif&&"true"!=e.dosyalar_is_evrak_aktif||1!=e.dosyalar_is_aktif&&"true"!=e.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.evrak[e.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.evrak[e.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.evrak[e.dosyalar_dosyaId_tam]=!0,l=await UYAP_EXT.DB.uyapEvrakPageTotal(e.dosyalar_dosyaId_tam,e.dosyalar_hash)))));break;case UYAP_EXT.TOOL.errors[1].errorCode:let a=await UYAP_EXT.TOOL.findDosya(null,r.dosyalar_hash);a&&Object.keys(UYAP_EXT.DB.queue.evrak).length<2&&(a=await UYAP_EXT.TOOL.updateDosyaId(r.dosyalar_hash),1!=a.dosyalar_is_evrak_aktif&&"true"!=a.dosyalar_is_evrak_aktif||1!=a.dosyalar_is_aktif&&"true"!=a.dosyalar_is_aktif||(UYAP_EXT.DB.updateDosyaIdRetries.evrak[a.dosyalar_dosyaId_tam]?delete UYAP_EXT.DB.updateDosyaIdRetries.evrak[a.dosyalar_dosyaId_tam]:(UYAP_EXT.DB.updateDosyaIdRetries.evrak[a.dosyalar_dosyaId_tam]=!0,l=await UYAP_EXT.DB.uyapEvrakPageTotal(a.dosyalar_dosyaId_tam,a.dosyalar_hash))));break;case UYAP_EXT.TOOL.errors[2].errorCode:await UYAP_EXT.TOOL.cleanUp.DosyaEvrakToggle(r.dosyalar_hash,!1);break;case UYAP_EXT.TOOL.errors[5].errorCode:await UYAP_EXT.TOOL.cleanUp.dosyaAktifToggle(r.dosyalar_hash,!1);break;default:return l;break}}catch(e){return l}else l.success=!0,l.pageTotal=0==parseInt(i.xhr.response)?1:parseInt(i.xhr.response);return l},uyapYargitayEvrakEsitle:function(e,a=1,t){return this.uyapEvrakEsitle(e,a,t)},uyapDanistayEvrakEsitle:function(e,a=1,t){return this.uyapEvrakEsitle(e,a,t)},uyapYargitayDosyaEsitle:function(){let e=null,a=null,t=!0,r=new Promise((async function(r,i){e=r,a=i;let l=await UYAP_EXT.TOOL.makeRequest("/getYargitayDaireleri.ajx",JSON.stringify({}),null,null,"application/json; charset=utf-8","POST").promise,n={};try{n=JSON.parse(l.xhr.response)}catch(e){return void r({result:!1})}for(let e=0;e<n.length&&t;e++)document.querySelector(".UYP_block")&&(document.getElementById("dialog_yuzde").innerHTML=" ( "+(e+1)+" / "+n.length+" )"),await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),await UYAP_EXT.TOOL.makeRequest("/getYargitayDosyalar_brd.ajx",JSON.stringify({yargitayDairesi:n[e].birimDVO.birimId}),null,null,"application/json; charset=utf-8","POST").promise;UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,r(!0)})).catch((()=>{t=!1}));return{resolve:e,reject:a,promise:r}},uyapCbsEvrakEsitle:function(e,a=1,t){return this.uyapEvrakEsitle(e,a,t)},uyapOdemeGuncelle:async function(e,a){return UYAP_EXT.TOOL.makeRequest("/dosya_tahsilat_reddiyat_bilgileri_brd.ajx",JSON.stringify({dosyaId:e,dosyaTurKod:a}),null,null,"application/json; charset=utf-8","POST")},uyapSafahatliDosyalar:async function(e,a,t){let r=[],i=UYAP_EXT.TOOL.makeRequest("/yargiBirimleriSorgula_brd.ajx",JSON.stringify({yargiTuru:e}),null,null,"application/json; charset=utf-8","POST");await i.promise;try{i=JSON.parse(i.XHR.response);for(let l=0;l<i.length;l++){document.getElementById("dialog_ayrinti").innerHTML=i[l].kod+" (Açık Dosya Evrakları)";let n=a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear(),o=t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear(),s=UYAP_EXT.TOOL.makeRequest("/avukat_safahat_sorgula_brd.ajx",JSON.stringify({baslangicTarihi:n,bitisTarihi:o,safahatTuru:"",yargiBirimi:i[l].tablo,yargiTuru:e}),null,null,"application/json; charset=utf-8","POST");await s.promise;try{let e=JSON.parse(s.XHR.response);if(e.errorCode){if(e.error==UYAP_EXT.TOOL.errors[8].error)continue;if(e.error==UYAP_EXT.TOOL.errors[9].error){let e=document.createElement("div"),a=document.createElement("table");a.className="toast-table",a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">'+i[l].kod+" evraklarınız 2 saatlik sınır sebebi ile kontrol edilemedi.</td><td></td>",a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Yeni evraklarınızı son 2 hafta sınırlaması olmadan kontrol etmeniz önerilir.</td><td></td>',$(e).append(a),UYAP_EXT.DIALOG.toastr.upRight.show("error","EVRAK KONTROL HATASI",e);continue}}e=UYAP_EXT.TOOL.uniqueArray(e.map((e=>(e.dosyaId=e.dosyaId.slice(0,15),e))),"dosyaId");for(let a=0;a<e.length;a++){let t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.birimId","=",e[a].birimId],["AND","dosyalar.dosyaNo","=",e[a].dosyaNo]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t});if(i.length>0||(t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.dosyaId_tam","like",e[a].dosyaId.slice(0,15)+"%"]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t})),r=r.concat(i),0==r.length){await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya));let l=e[a].dosyaNo.split("/");await UYAP_EXT.TOOL.makeRequest("/search_phrase_detayli.ajx",JSON.stringify({birimTuru3:UYAP_EXT.TOOL.getYargiTuru(e[a].birimTuru3).toString(),birimTuru2:e[a].birimTuru2,birimId:e[a].birimId,dosyaDurumKod:0,dosyaYil:parseInt(l[0]),dosyaSira:parseInt(l[1]),pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST").promise,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.birimId","=",e[a].birimId],["AND","dosyalar.dosyaNo","=",e[a].dosyaNo]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t}),i.length>0||(t={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.dosyaId_tam","like",e[a].dosyaId.slice(0,15)+"%"]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:t})),r=r.concat(i)}}}catch(e){let a=document.createElement("div"),t=document.createElement("table");t.className="toast-table",t.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Evraklarınız kontrol edilemedi.</td><td></td>',t.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Yeni evraklarınızı son 2 hafta sınırlaması olmadan kontrol etmeniz önerilir.</td><td></td>',$(a).append(t),UYAP_EXT.DIALOG.toastr.upRight.show("error","EVRAK KONTROL HATASI",a)}}}catch(e){let a=document.createElement("div"),t=document.createElement("table");t.className="toast-table",t.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Evraklarınız kontrol edilemedi.</td><td></td>',t.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Yeni evraklarınızı son 2 hafta sınırlaması olmadan kontrol etmeniz önerilir.</td><td></td>',$(a).append(t),UYAP_EXT.DIALOG.toastr.upRight.show("error","EVRAK KONTROL HATASI",a)}return UYAP_EXT.TOOL.uniqueArray(r,"hash")},uyapIcraSafahatliDosyalar:async function(e,a){let t=[];document.getElementById("dialog_ayrinti").innerHTML="İCRA MÜDÜRLÜKLERİ (Açık Dosya Evrakları)";let r=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear(),i=a.getDate()+"."+(a.getMonth()+1)+"."+a.getFullYear(),l=UYAP_EXT.TOOL.makeRequest("/avukat_safahat_sorgula_servis_brd.ajx",JSON.stringify({baslangicTarihi:r,bitisTarihi:i,safahatTuru:"",yargiBirimi:1101,yargiTuru:2}),null,null,"application/json; charset=utf-8","POST");await l.promise;try{let e=JSON.parse(l.XHR.response);if(e.errorCode&&e.error==UYAP_EXT.TOOL.errors[9].error){let e=document.createElement("div"),a=document.createElement("table");return a.className="toast-table",a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">İCRA MÜDÜRLÜĞÜ evraklarınız 2 saatlik sınır sebebi ile kontrol edilemedi.</td><td></td>',a.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Yeni evraklarınızı son 2 hafta sınırlaması olmadan kontrol etmeniz önerilir.</td><td></td>',$(e).append(a),UYAP_EXT.DIALOG.toastr.upRight.show("error","EVRAK KONTROL HATASI",e),t}e=e.map((e=>((e=e.safahatDVO).dosyaNo=e.dosyaNo.slice(0,15),e))),e=UYAP_EXT.TOOL.uniqueArray(e,"dosyaId");for(let a=0;a<e.length;a++)for(let r=0;r<e.length;r++){let r={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.birimId","=",e[a].birimId],["AND","dosyalar.dosyaNo","=",e[a].dosyaNo]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:r});if(i.length>0||(r={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.dosyaId_tam","like",e[a].dosyaId.slice(0,15)+"%"]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:r})),t=t.concat(i),0==t.length){await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya));let l=e[a].dosyaNo.split("/");await UYAP_EXT.TOOL.makeRequest("/search_phrase_detayli.ajx",JSON.stringify({birimTuru3:UYAP_EXT.TOOL.getYargiTuru(e[a].birimTuru3).toString(),birimTuru2:e[a].birimTuru2,birimId:e[a].birimId,dosyaDurumKod:0,dosyaYil:parseInt(l[0]),dosyaSira:parseInt(l[1]),pageNumber:1,pageSize:500}),null,null,"application/json; charset=utf-8","POST").promise,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.dosya)),r={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.birimId","=",e[a].birimId],["AND","dosyalar.dosyaNo","=",e[a].dosyaNo]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:r}),i.length>0||(r={fields:["dosyalar.hash","dosyaId_tam"],from:"dosyalar",where:[["AND","dosyalar.dosyaId_tam","like",e[a].dosyaId.slice(0,15)+"%"]]},i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:r})),t=t.concat(i)}}}catch(e){let a=document.createElement("div"),t=document.createElement("table");t.className="toast-table",t.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Evraklarınız kontrol edilemedi.</td><td></td>',t.insertRow().innerHTML='<td colspan="2" style="text-align: justify">Yeni evraklarınızı son 2 hafta sınırlaması olmadan kontrol etmeniz önerilir.</td><td></td>',$(a).append(t),UYAP_EXT.DIALOG.toastr.upRight.show("error","EVRAK KONTROL HATASI",a)}return UYAP_EXT.TOOL.uniqueArray(t,"hash")},_cSa:async function(e){let a=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",count:!0,where:[["AND","dosyalar.table_name","=","dosyalar"],["AND","dosyalar.is_aktif","istrue",!0],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.dosyaDurumKod","<>",1],["AND","dosyalar.dosyaTurKod","<>",1]]}}),t=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",count:!0,where:[["AND","dosyalar.table_name","=","danistaydosyalar"],["AND","dosyalar.is_aktif","istrue",!0],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.genelDosyaDurumu","=","Açık"]]}}),r=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"dosyalar",count:!0,where:[["AND","dosyalar.table_name","=","yargitaydosyalar"],["AND","dosyalar.is_aktif","istrue",!0],["AND","dosyalar.is_evrak_aktif","istrue",!0],["AND","dosyalar.durumAdi","<>","Arşivde"]]}});return a[0].sayi+t[0].sayi+r[0].sayi},tebligatCheck:{toastr:{letShow:!0,show:async function(e){let a=Object.assign({},e);if(0==UYAP_EXT.DB.tebligatCheck.toastr.letShow)return!1;for(const[e,t]of Object.entries(a))if(0==e.indexOf("tebligatlar_")&&"tebligatlar_id"!=e){let r=e.replace("tebligatlar_","");a[r]=t,delete a[e]}UYAP_EXT.TOOL._user.interrupts.showToastrs.tebligat[a.tebligatlar_id]=Object.assign({},a),UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,a=UYAP_EXT.DB.tebligatCheck.tebligatState(a);let t,r=await UYAP_EXT.DB.dosyaAyrintilariAl(a.tebligatlar_dosyaId),i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",where:[["AND","evraklar.evrakId","=",a.tebligatlar_evrakId]],join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]]}}),l=$("<div>"),n=document.createElement("table");n.className="toast-table",n.insertRow().innerHTML=`<td>Mahkeme</td><td>:</td><td>${i[0]&&i[0].dosyalar_birimAdi?i[0].dosyalar_birimAdi:""}</td>`,n.insertRow().innerHTML=`<td>Dosya No</td><td>:</td><td>${i[0]?i[0].dosyalar_esasNo?i[0].dosyalar_esasNo:i[0].dosyalar_dosyaNo:""}</td>`;for(let e=0;e<r.length;e++)"Dava Türleri"==r[e].dosya_ayrintilar_key&&(n.insertRow().innerHTML=`<td>Dosya Türü</td><td>:</td><td>${r[e].dosya_ayrintilar_val}</td>`);switch(n.insertRow().innerHTML=`<td>Muhatap</td><td>:</td><td>${a.tebligatlar_muhatap}</td>`,n.insertRow().innerHTML=`<td>İçerik</td><td>:</td><td>${a.tebligatlar_icerik.split("-")[0]}</td>`,n.insertRow().innerHTML=`<td colspan="3" style="text-transform: uppercase; text-align: center;text-decoration: underline;padding-top: 5px;font-weight: bold">${a.tebligatlar__durum}</td>`,n.insertRow().innerHTML='<td colspan="3" class="toastr-table-buttons" style="padding-top: 5px"></td>',$(n).find(".toastr-table-buttons").append(UYAP_EXT.TOOL.imerekButtons.goruntule((async()=>{UYAP_EXT.TOOL.dosyaGoruntule(i[0])}))).append(UYAP_EXT.TOOL.imerekButtons.notAl((async()=>{UYAP_EXT.DIALOG.openEvrakSummernote(i[0]).then((e=>{}))}))),$(l).append(n),a.tebligatlar_isLastState){case 1:t="error";break;case 2:t="success";break;default:return delete UYAP_EXT.TOOL._user.interrupts.showToastrs.tebligat[a.tebligatlar_id],UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,!0;break}return document.getElementById("tebligatNotify").style.display="unset",PNotify[t]({icon:"fas fa-envelope",addClass:"zindex",addModalClass:"zindex-modal",title:"error"==t?"TEBLİGAT TESLİM EDİLEMEDİ":"TEBLİGAT TESLİM EDİLDİ",text:$(l)[0],sticker:!1,hide:!1,labels:{close:"Bu Tebligat İçin Tekrar Gösterme"},closerHover:!1,icons:{prefix:PNotify.defaults.icons,closer:"fas fa-window-close"},modules:new Map([...PNotify.defaultModules,[PNotifyAnimate,{inClass:"animate__fadeInUp",outClass:"animate__fadeOutRight"}]]),stack:UYAP_EXT.DIALOG.toastr.downRightStack}).on("pnotify:afterOpen",(e=>{document.querySelectorAll("#notifyright,#notifyleft").forEach(((a,t,r)=>{a.style.bottom=e.target.offsetHeight/2-a.offsetHeight/2})),e.target.querySelector(".fa-window-close").addEventListener("click",(()=>{delete UYAP_EXT.TOOL._user.interrupts.showToastrs.tebligat[a.tebligatlar_id],UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.DB.gorulmemisKaldir("tebligatlar",a.tebligatlar_id),1==UYAP_EXT.DIALOG.toastr.downRightStack.length&&(document.getElementById("tebligatNotifyCheck").checked=!1,$("#tebligatNotify").fadeOut("slow"))}))})),!0}},setgorulmemis:!0,askPTT:function(e,a="tebligatlar"){return new Promise((async t=>{let r=[];if(e.length>0){document.getElementById("dialog_son")&&(document.getElementById("dialog_son").innerHTML="Tebligatlarınız PTT sitesinden Sorgulanıyor");for(let t=0;t<e.length;t++){let i={};for(const[r,l]of Object.entries(e[t]))if(0==r.indexOf(a+"_")&&r!=a+"_id"){i[r.replace(a+"_","")]=l}let l=await UYAP_EXT.TOOL.messageToPortal({ask:"tabligatlarToCheck",params:{tebligat:i,index:t,tebligatslength:e.length}});r.push(l),l.result&&("tebligatlar"==a?(e[t].tebligatlar_isLastState!=l.checkedTebligat.isLastState&&UYAP_EXT.DB.tebligatCheck.toastr.show(l.checkedTebligat),l.checkedTebligat.durum=l.checkedTebligat.durum.replace(/\s*\/\s*$/gm,"").toLocaleUpperCase("TR"),UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:a,data:[l.checkedTebligat]}})):(e[t].tebligatlar_isLastState!=l.checkedTebligat.isLastState&&(l.checkedTebligat.gorulmemis=!0),await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:a,data:[l.checkedTebligat]}})))}}t(r)}))},autoReadPDF:async function(e){let a,t=0,r=!1,i=UYAP_EXT.TOOL.fileDownload(e.evrakId,e.birimEvrakNo,e.dosyaId,null,null,!1);if(a=await i.promise,0!=a)do{try{r=await UYAP_EXT.TOOL.pdf.readPDF(a.XHR.response,e.turu)}catch(e){if(t>8){UYAP_EXT.MENU.badgeOlustur("tebligatlar"),r.barkodNo=0;break}t++;continue}break}while(t<9);return r},tebligatState:function(e){function a(e){return e instanceof Date&&!isNaN(e)}let t=structuredClone(e);Object.keys(t).forEach((e=>{(e.indexOf("tebligatlar",0)<0||"tebligatlar_id"==e)&&(t["tebligatlar_"+e]=t[e])}));let r=parseInt(t.tebligatlar_isLastState);if(1==t.tebligatlar_eTebligat||"true"==t.tebligatlar_eTebligat){let e=a(t.evraklar_onaylandigiTarih)?t.evraklar_onaylandigiTarih:a(t.evraklar_evrakTarihi)?t.evraklar_evrakTarihi:t.tebligatlar_lastStateTarihi,r=Math.ceil((new Date-e)/864e5);if(r>=5){let a=new Date(e);a.setDate(e.getDate()+5),t.tebligatlar_isLastState=2,t.tebligatlar_lastStateTarihi=a,t.tebligatlar_durum=Math.abs(r-1-5)+" GÜN ÖNCE UETS HESABINDA TEBLİĞ EDİLDİ",t.tebligatlar__durum=Math.abs(r-1-5)+" GÜN ÖNCE UETS HESABINDA TEBLİĞ EDİLDİ"}else t.tebligatlar_isLastState=0,t.tebligatlar_lastStateTarihi=e,t.tebligatlar_durum="UETS HESABINDA BEKLEMEDE("+r+". GÜN)",t.tebligatlar__durum="UETS HESABINDA BEKLEMEDE("+r+". GÜN)"}else{let e=Math.ceil((new Date-t.tebligatlar_lastStateTarihi)/864e5);t.tebligatlar__durum=0!=t.tebligatlar_isLastState?e-1+" GÜN ÖNCE "+t.tebligatlar_durum:e-1+" GÜNDÜR "+t.tebligatlar_durum}return r!==t.tebligatlar_isLastState&&UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"tebligatlar",where:[["AND","tebligatlar.barkodNo","=",t.tebligatlar_barkodNo]],data:[{isLastState:t.tebligatlar_isLastState,lastStateTarihi:t.tebligatlar_lastStateTarihi,durum:t.tebligatlar_durum}]}}),t},default:function(e,a=!0,t=!0,r=!1){if(r){let e=Object.values(UYAP_EXT.TOOL.tasksRequests.mainqueue);for(let a=0;a<e.length;a++)Array.isArray(e[a])?e[a]=[]:e[a].reject()}let i=Math.floor(65536*(1+Math.random())).toString(16).substring(1),l=!0,n=null,o=null;let s=new Promise((async(r,i)=>{t&&UYAP_EXT.DIALOG.blockUILogo.show("Tebligatlarınız Kontrol Ediliyor","PTT Gönderi Takip Sisteminin Güvenlik Önlemleri Sebebiyle İşleminiz Uzun Sürebilir","Lütfen İşlem Bitene Kadar Bekleyiniz","body"),n=r,o=i,await Promise.allSettled(Object.values(UYAP_EXT.DB.queue.tebligat));let s=[],d=new Set,u=new Set;for(let a=0;a<e.length&&l;a++){if(e[a].evraklar_anaEvrakId>0)continue;let r=0!=a?100*a/e.length:0;t&&(document.getElementById("dialog_son").innerHTML="Tebligatlarınız Alınıyor",document.getElementById("dialog_yuzde_son").innerHTML=" ( "+Math.round(r)+"% )");let i=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"evraklar",join:[["JOIN","dosyalar",[["evraklar.ana_dosyaId","dosyalar.hash"]]]],where:[["AND","evraklar.ana_dosyaId","=",e[a].evraklar_ana_dosyaId],["AND","evraklar.birimEvrakNo","=",e[a].evraklar_birimEvrakNo],["AND","evraklar.evrakId","=",e[a].evraklar_evrakId]]}});d.add(i[0].dosyalar_hash),u.add(e[a].evraklar_evrakId);let l=await UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"tebligatlar",where:[["AND","tebligatlar.dosyaId","=",i[0].dosyalar_hash],["AND","tebligatlar.evrakId","=",e[a].evraklar_evrakId]]}});if(0==l.length){let t=await this.autoReadPDF({evraklar_id:i[0].evraklar_evraklar_id,evrakId:i[0].evraklar_evrakId,birimEvrakNo:i[0].evraklar_birimEvrakNo,dosyaId:i[0].dosyalar_hash,turu:i[0].evraklar_tur,table_dosya:i[0].dosyalar_table_name});if("object"==typeof t){s[a]={evrakId:parseInt(i[0].evraklar_evrakId),dosyaId:i[0].dosyalar_hash,barkodNo:parseInt(t.barkodNo),durum:"",muhatap:/.*\[(.*)\]/.test(i[0].evraklar_aciklama)?/.*\[(.*)\]/.exec(i[0].evraklar_aciklama)[1].trim():"Tespit Edilemeyen Muhatap",icerik:t.icerik&&t.icerik[1]?t.icerik[1].trim():"?",isLastState:0,eTebligat:t.eTebligat,lastStateTarihi:i[0].evraklar_sistemeGonderildigiTarih,evrakTarihi:i[0].evraklar_sistemeGonderildigiTarih,gorulmemis:this.setgorulmemis};try{await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"tebligatlar",data:[s[a]]}})}catch(e){}}else if(0==t){s[a]={evrakId:parseInt(i[0].evraklar_evrakId),dosyaId:i[0].dosyalar_hash,dosyaId_tam:i[0].dosyalar_dosyaId_tam,barkodNo:0,durum:"",muhatap:/.*\[(.*)\]/.test(i[0].evraklar_aciklama)?/.*\[(.*)\]/.exec(e[a].evraklar_aciklama)[1].trim():"Tespit Edilemeyen Muhatap",icerik:"?",isLastState:0,lastStateTarihi:i[0].evraklar_sistemeGonderildigiTarih,evrakTarihi:i[0].evraklar_sistemeGonderildigiTarih,gorulmemis:this.setgorulmemis};try{await UYAP_EXT.DB.connection.merge({method:"PUT",body:{into:"tebligatlar",data:[s[a]]}})}catch(e){}}}else 1!=l[0].tebligatlar_isEdited&&"true"!=l[0].tebligatlar_isEdited||(1==s[a].eTebligat||"true"==s[a].eTebligat?UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"tebligatlar",where:[["AND","evraklar.tebligatlar_id","=",s[a].tebligatlar_id]],data:[{isLastState:s[a].isLastState,lastStateTarihi:s[a].lastStateTarihi,durum:s[a].durum,isEdited:!1}]}}):s[a].barkodNo>1e9&&UYAP_EXT.DB.connection.update({method:"PUT",body:{into:"tebligatlar",where:[["AND","evraklar.tebligatlar_id","=",s[a].tebligatlar_id]],data:[{isLastState:0,eTebligat:!1,isEdited:!1}]}}))}UYAP_EXT.MENU.isBadgeOlustur&&UYAP_EXT.MENU.badgeOlustur("tebligatlar");let c={from:"tebligatlar",where:[["AND","tebligatlar.isLastState","=",0],["AND","tebligatlar.eTebligat","isfalse","false"],["AND","tebligatlar.dosyaId","in",Array.from(d)]]};a||c.where.push(["AND","tebligatlar.evrakId","in",Array.from(u)]);let m=await UYAP_EXT.DB.connection.select("",{method:"POST",body:c});await this.askPTT(m,"tebligatlar"),r(!0)})).catch((e=>{l=!1})).finally((()=>{t&&"false"==document.getElementById("dialog_genel").dataset.koru&&UYAP_EXT.DIALOG.blockUILogo.hide(),delete UYAP_EXT.DB.queue.tebligat[i]}));return UYAP_EXT.DB.queue.tebligat[i]=s,{resolve:n,reject:o,promise:s}}}};try{UYAP_EXT.TOOL.user,UYAP_EXT.TOOL.user.options.promode?UYAP_EXT.TOOL.messageToPortal({ask:"database",url:"/system/serverVersion",request:{method:"GET"}}).then((async e=>{404!=e.status?UYAP_EXT.DIALOG.onerGuncelSunucu():(0==UYAP_EXT.TOOL.user.promode.activated&&await UYAP_EXT.TOOL.toPromode(),UYAP_EXT.TOOL.user.promode.activated=!0,UYAP_EXT.TOOL.user=UYAP_EXT.TOOL._user,UYAP_EXT.TOOL.startUpInitialize())})):1==UYAP_EXT.TOOL.user.promode.activated?UYAP_EXT.DIALOG.sunucuBulunamadi():UYAP_EXT.DB.connectionJsStore.initDb(UYAP_EXT.DB.db).then((e=>{e?UYAP_EXT.DB.connection.select("",{method:"POST",body:{from:"calisma_grubu",where:[["AND","calisma_grubu.username","=","ADMIN"]],limit:1}}).then((e=>{0==e.length&&UYAP_EXT.DB.connection.insert({method:"PUT",body:{into:"calisma_grubu",data:[{username:"ADMIN"}]}}),2===UYAP_EXT.DB.db.version?UYAP_EXT.DB.connectionJsStore.select({from:"tebligatlar"}).then((e=>{UYAP_EXT.DB.connectionJsStore.clear("tebligatlar").then((a=>{e=e.map((e=>("1"!=e.eTebligat&&1!=e.eTebligat||(e.eTebligat="true"),"0"!=e.eTebligat&&0!=e.eTebligat||(e.eTebligat="false"),"-1"!=e.eTebligat&&-1!=e.eTebligat||delete e.eTebligat,e))),UYAP_EXT.DB.connection.insert({method:"PUT",body:{into:"tebligatlar",data:e}}).then((e=>{UYAP_EXT.TOOL.startUpInitialize()}))}))})):UYAP_EXT.TOOL.startUpInitialize()})):UYAP_EXT.TOOL.startUpInitialize()}))}catch(e){UYAP_EXT.TOOL.errorHandling.reloadError(e)}